// src/routes/AppRoutes.jsx
import React, { Suspense, lazy } from 'react';
import { Routes, Route, Navigate } from 'react-router-dom';

// Lazy load screens for optimal performance
const SplashScreen = lazy(() => import('../screens/SplashScreen'));

// Import your existing IntroScreen
const IntroScreen = lazy(() => import('../screens/IntroScreen'));

// Loading fallback for Suspense
const LoadingFallback = () => (
  <div className="fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800">
    <div className="text-center">
      <div className="relative">
        <div className="w-16 h-16 border-4 border-indigo-500/30 border-t-indigo-500 rounded-full animate-spin mx-auto mb-6"></div>
        <div className="absolute inset-0 w-16 h-16 border-4 border-transparent border-t-purple-500 rounded-full animate-spin mx-auto mb-6" style={{ animationDirection: 'reverse', animationDuration: '1.5s' }}></div>
      </div>
      <p className="text-gray-600 dark:text-gray-400 font-medium">Loading Arvdoul...</p>
    </div>
  </div>
);

// Placeholder for HomeScreen (you'll create this later)
const HomeScreen = () => (
  <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-900 dark:to-gray-800">
    <div className="text-center p-8 max-w-lg">
      <h1 className="text-5xl font-bold text-gray-800 dark:text-white mb-6">
        Welcome to Arvdoul! ðŸŽ‰
      </h1>
      <p className="text-lg text-gray-600 dark:text-gray-300 mb-8">
        This is the home screen. The splash screen successfully navigated here.
      </p>
      <div className="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
        <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-200 mb-4">
          Home Screen âœ…
        </h2>
        <p className="text-gray-600 dark:text-gray-400 mb-4">
          This screen is for logged-in users. You'll build the full dashboard here.
        </p>
        <div className="mt-6 flex gap-4 justify-center">
          <button
            onClick={() => window.history.back()}
            className="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium"
          >
            Go Back
          </button>
          <button
            onClick={() => window.location.href = '/'}
            className="px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white rounded-lg font-medium"
          >
            Restart
          </button>
        </div>
      </div>
    </div>
  </div>
);

// Main AppRoutes component
export default function AppRoutes() {
  return (
    <Suspense fallback={<LoadingFallback />}>
      <Routes>
        {/* 
          Splash Screen - Entry Point 
          This screen handles its own navigation logic:
          - If user is logged in â†’ /home
          - If user is not logged in â†’ /intro
        */}
        <Route path="/" element={<SplashScreen />} />
        
        {/* Intro Screen - Your existing IntroScreen.jsx */}
        <Route path="/intro" element={<IntroScreen />} />
        
        {/* Home Screen - Main dashboard for logged-in users */}
        <Route path="/home" element={<HomeScreen />} />
        
        {/* 
          Catch-all route 
          Redirects to splash screen for any undefined routes
          This ensures users always start at the splash screen
        */}
        <Route path="*" element={<Navigate to="/" replace />} />
      </Routes>
    </Suspense>
  );
}
