function nD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ZS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eA={exports:{}},rf={},tA={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $u=Symbol.for("react.element"),rD=Symbol.for("react.portal"),iD=Symbol.for("react.fragment"),sD=Symbol.for("react.strict_mode"),oD=Symbol.for("react.profiler"),aD=Symbol.for("react.provider"),lD=Symbol.for("react.context"),uD=Symbol.for("react.forward_ref"),cD=Symbol.for("react.suspense"),hD=Symbol.for("react.memo"),dD=Symbol.for("react.lazy"),Ww=Symbol.iterator;function fD(t){return t===null||typeof t!="object"?null:(t=Ww&&t[Ww]||t["@@iterator"],typeof t=="function"?t:null)}var nA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rA=Object.assign,iA={};function Sa(t,e,n){this.props=t,this.context=e,this.refs=iA,this.updater=n||nA}Sa.prototype.isReactComponent={};Sa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sA(){}sA.prototype=Sa.prototype;function Jy(t,e,n){this.props=t,this.context=e,this.refs=iA,this.updater=n||nA}var Zy=Jy.prototype=new sA;Zy.constructor=Jy;rA(Zy,Sa.prototype);Zy.isPureReactComponent=!0;var Gw=Array.isArray,oA=Object.prototype.hasOwnProperty,ev={current:null},aA={key:!0,ref:!0,__self:!0,__source:!0};function lA(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)oA.call(e,r)&&!aA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:$u,type:t,key:s,ref:o,props:i,_owner:ev.current}}function pD(t,e){return{$$typeof:$u,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tv(t){return typeof t=="object"&&t!==null&&t.$$typeof===$u}function mD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Kw=/\/+/g;function Cp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mD(""+t.key):e.toString(36)}function hh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $u:case rD:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Cp(o,0):r,Gw(i)?(n="",t!=null&&(n=t.replace(Kw,"$&/")+"/"),hh(i,e,n,"",function(u){return u})):i!=null&&(tv(i)&&(i=pD(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Kw,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Gw(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Cp(s,a);o+=hh(s,e,n,l,i)}else if(l=fD(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Cp(s,a++),o+=hh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cc(t,e,n){if(t==null)return t;var r=[],i=0;return hh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function gD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},dh={transition:null},yD={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:dh,ReactCurrentOwner:ev};function uA(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:Cc,forEach:function(t,e,n){Cc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cc(t,function(){e++}),e},toArray:function(t){return Cc(t,function(e){return e})||[]},only:function(t){if(!tv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Sa;de.Fragment=iD;de.Profiler=oD;de.PureComponent=Jy;de.StrictMode=sD;de.Suspense=cD;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yD;de.act=uA;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rA({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ev.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)oA.call(e,l)&&!aA.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:$u,type:t.type,key:i,ref:s,props:r,_owner:o}};de.createContext=function(t){return t={$$typeof:lD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aD,_context:t},t.Consumer=t};de.createElement=lA;de.createFactory=function(t){var e=lA.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:uD,render:t}};de.isValidElement=tv;de.lazy=function(t){return{$$typeof:dD,_payload:{_status:-1,_result:t},_init:gD}};de.memo=function(t,e){return{$$typeof:hD,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=dh.transition;dh.transition={};try{t()}finally{dh.transition=e}};de.unstable_act=uA;de.useCallback=function(t,e){return Ut.current.useCallback(t,e)};de.useContext=function(t){return Ut.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};de.useEffect=function(t,e){return Ut.current.useEffect(t,e)};de.useId=function(){return Ut.current.useId()};de.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Ut.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};de.useRef=function(t){return Ut.current.useRef(t)};de.useState=function(t){return Ut.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Ut.current.useTransition()};de.version="18.3.1";tA.exports=de;var x=tA.exports;const On=ZS(x),vD=nD({__proto__:null,default:On},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _D=x,wD=Symbol.for("react.element"),ED=Symbol.for("react.fragment"),TD=Object.prototype.hasOwnProperty,ID=_D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SD={key:!0,ref:!0,__self:!0,__source:!0};function cA(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)TD.call(e,r)&&!SD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:wD,type:t,key:s,ref:o,props:i,_owner:ID.current}}rf.Fragment=ED;rf.jsx=cA;rf.jsxs=cA;eA.exports=rf;var O=eA.exports,Xm={},hA={exports:{}},fn={},dA={exports:{}},fA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,X){var J=q.length;q.push(X);e:for(;0<J;){var ee=J-1>>>1,pe=q[ee];if(0<i(pe,X))q[ee]=X,q[J]=pe,J=ee;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var X=q[0],J=q.pop();if(J!==X){q[0]=J;e:for(var ee=0,pe=q.length,Bt=pe>>>1;ee<Bt;){var B=2*(ee+1)-1,G=q[B],z=B+1,re=q[z];if(0>i(G,J))z<pe&&0>i(re,G)?(q[ee]=re,q[z]=J,ee=z):(q[ee]=G,q[B]=J,ee=B);else if(z<pe&&0>i(re,J))q[ee]=re,q[z]=J,ee=z;else break e}}return X}function i(q,X){var J=q.sortIndex-X.sortIndex;return J!==0?J:q.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,g=!1,T=!1,w=!1,P=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(q){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=q)r(u),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(u)}}function C(q){if(w=!1,v(q),!T)if(n(l)!==null)T=!0,ue(N);else{var X=n(u);X!==null&&ge(C,X.startTime-q)}}function N(q,X){T=!1,w&&(w=!1,E(_),_=-1),g=!0;var J=f;try{for(v(X),d=n(l);d!==null&&(!(d.expirationTime>X)||q&&!k());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,f=d.priorityLevel;var pe=ee(d.expirationTime<=X);X=t.unstable_now(),typeof pe=="function"?d.callback=pe:d===n(l)&&r(l),v(X)}else r(l);d=n(l)}if(d!==null)var Bt=!0;else{var B=n(u);B!==null&&ge(C,B.startTime-X),Bt=!1}return Bt}finally{d=null,f=J,g=!1}}var V=!1,S=null,_=-1,A=5,b=-1;function k(){return!(t.unstable_now()-b<A)}function D(){if(S!==null){var q=t.unstable_now();b=q;var X=!0;try{X=S(!0,q)}finally{X?R():(V=!1,S=null)}}else V=!1}var R;if(typeof y=="function")R=function(){y(D)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,_e=oe.port2;oe.port1.onmessage=D,R=function(){_e.postMessage(null)}}else R=function(){P(D,0)};function ue(q){S=q,V||(V=!0,R())}function ge(q,X){_=P(function(){q(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){T||g||(T=!0,ue(N))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(q){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var J=f;f=X;try{return q()}finally{f=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var J=f;f=q;try{return X()}finally{f=J}},t.unstable_scheduleCallback=function(q,X,J){var ee=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ee+J:ee):J=ee,q){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=J+pe,q={id:h++,callback:X,priorityLevel:q,startTime:J,expirationTime:pe,sortIndex:-1},J>ee?(q.sortIndex=J,e(u,q),n(l)===null&&q===n(u)&&(w?(E(_),_=-1):w=!0,ge(C,J-ee))):(q.sortIndex=pe,e(l,q),T||g||(T=!0,ue(N))),q},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(q){var X=f;return function(){var J=f;f=X;try{return q.apply(this,arguments)}finally{f=J}}}})(fA);dA.exports=fA;var AD=dA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PD=x,un=AD;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pA=new Set,su={};function Ws(t,e){Xo(t,e),Xo(t+"Capture",e)}function Xo(t,e){for(su[t]=e,t=0;t<e.length;t++)pA.add(e[t])}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jm=Object.prototype.hasOwnProperty,RD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hw={},Qw={};function xD(t){return Jm.call(Qw,t)?!0:Jm.call(Hw,t)?!1:RD.test(t)?Qw[t]=!0:(Hw[t]=!0,!1)}function bD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CD(t,e,n,r){if(e===null||typeof e>"u"||bD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vt[t]=new jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vt[e]=new jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vt[t]=new jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vt[t]=new jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vt[t]=new jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vt[t]=new jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vt[t]=new jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vt[t]=new jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vt[t]=new jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var nv=/[\-:]([a-z])/g;function rv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nv,rv);vt[e]=new jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nv,rv);vt[e]=new jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nv,rv);vt[e]=new jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vt[t]=new jt(t,1,!1,t.toLowerCase(),null,!1,!1)});vt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vt[t]=new jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function iv(t,e,n,r){var i=vt.hasOwnProperty(e)?vt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CD(e,n,i,r)&&(n=null),r||i===null?xD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var kr=PD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kc=Symbol.for("react.element"),_o=Symbol.for("react.portal"),wo=Symbol.for("react.fragment"),sv=Symbol.for("react.strict_mode"),Zm=Symbol.for("react.profiler"),mA=Symbol.for("react.provider"),gA=Symbol.for("react.context"),ov=Symbol.for("react.forward_ref"),eg=Symbol.for("react.suspense"),tg=Symbol.for("react.suspense_list"),av=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),yA=Symbol.for("react.offscreen"),Yw=Symbol.iterator;function el(t){return t===null||typeof t!="object"?null:(t=Yw&&t[Yw]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,kp;function vl(t){if(kp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kp=e&&e[1]||""}return`
`+kp+t}var Np=!1;function Vp(t,e){if(!t||Np)return"";Np=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Np=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vl(t):""}function kD(t){switch(t.tag){case 5:return vl(t.type);case 16:return vl("Lazy");case 13:return vl("Suspense");case 19:return vl("SuspenseList");case 0:case 2:case 15:return t=Vp(t.type,!1),t;case 11:return t=Vp(t.type.render,!1),t;case 1:return t=Vp(t.type,!0),t;default:return""}}function ng(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wo:return"Fragment";case _o:return"Portal";case Zm:return"Profiler";case sv:return"StrictMode";case eg:return"Suspense";case tg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gA:return(t.displayName||"Context")+".Consumer";case mA:return(t._context.displayName||"Context")+".Provider";case ov:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case av:return e=t.displayName||null,e!==null?e:ng(t.type)||"Memo";case Qr:e=t._payload,t=t._init;try{return ng(t(e))}catch{}}return null}function ND(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ng(e);case 8:return e===sv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VD(t){var e=vA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nc(t){t._valueTracker||(t._valueTracker=VD(t))}function _A(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rg(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wA(t,e){e=e.checked,e!=null&&iv(t,"checked",e,!1)}function ig(t,e){wA(t,e);var n=Pi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sg(t,e.type,n):e.hasOwnProperty("defaultValue")&&sg(t,e.type,Pi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sg(t,e,n){(e!=="number"||zh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _l=Array.isArray;function Lo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function og(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(_l(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pi(n)}}function EA(t,e){var n=Pi(e.value),r=Pi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function eE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ag(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vc,IA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vc=Vc||document.createElement("div"),Vc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ou(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DD=["Webkit","ms","Moz","O"];Object.keys(kl).forEach(function(t){DD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kl[e]=kl[t]})});function SA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kl.hasOwnProperty(t)&&kl[t]?(""+e).trim():e+"px"}function AA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=SA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var OD=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lg(t,e){if(e){if(OD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function ug(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cg=null;function lv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hg=null,Fo=null,Uo=null;function tE(t){if(t=Wu(t)){if(typeof hg!="function")throw Error($(280));var e=t.stateNode;e&&(e=uf(e),hg(t.stateNode,t.type,e))}}function PA(t){Fo?Uo?Uo.push(t):Uo=[t]:Fo=t}function RA(){if(Fo){var t=Fo,e=Uo;if(Uo=Fo=null,tE(t),e)for(t=0;t<e.length;t++)tE(e[t])}}function xA(t,e){return t(e)}function bA(){}var Dp=!1;function CA(t,e,n){if(Dp)return t(e,n);Dp=!0;try{return xA(t,e,n)}finally{Dp=!1,(Fo!==null||Uo!==null)&&(bA(),RA())}}function au(t,e){var n=t.stateNode;if(n===null)return null;var r=uf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var dg=!1;if(Tr)try{var tl={};Object.defineProperty(tl,"passive",{get:function(){dg=!0}}),window.addEventListener("test",tl,tl),window.removeEventListener("test",tl,tl)}catch{dg=!1}function MD(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Nl=!1,qh=null,Wh=!1,fg=null,LD={onError:function(t){Nl=!0,qh=t}};function FD(t,e,n,r,i,s,o,a,l){Nl=!1,qh=null,MD.apply(LD,arguments)}function UD(t,e,n,r,i,s,o,a,l){if(FD.apply(this,arguments),Nl){if(Nl){var u=qh;Nl=!1,qh=null}else throw Error($(198));Wh||(Wh=!0,fg=u)}}function Gs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nE(t){if(Gs(t)!==t)throw Error($(188))}function jD(t){var e=t.alternate;if(!e){if(e=Gs(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nE(i),t;if(s===r)return nE(i),e;s=s.sibling}throw Error($(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function NA(t){return t=jD(t),t!==null?VA(t):null}function VA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=VA(t);if(e!==null)return e;t=t.sibling}return null}var DA=un.unstable_scheduleCallback,rE=un.unstable_cancelCallback,BD=un.unstable_shouldYield,$D=un.unstable_requestPaint,Ge=un.unstable_now,zD=un.unstable_getCurrentPriorityLevel,uv=un.unstable_ImmediatePriority,OA=un.unstable_UserBlockingPriority,Gh=un.unstable_NormalPriority,qD=un.unstable_LowPriority,MA=un.unstable_IdlePriority,sf=null,Jn=null;function WD(t){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(sf,t,void 0,(t.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:HD,GD=Math.log,KD=Math.LN2;function HD(t){return t>>>=0,t===0?32:31-(GD(t)/KD|0)|0}var Dc=64,Oc=4194304;function wl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=wl(a):(s&=o,s!==0&&(r=wl(s)))}else o=n&~i,o!==0?r=wl(o):s!==0&&(r=wl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fn(e),i=1<<n,r|=t[n],e&=~i;return r}function QD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=QD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function pg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LA(){var t=Dc;return Dc<<=1,!(Dc&4194240)&&(Dc=64),t}function Op(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fn(e),t[e]=n}function XD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function cv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Te=0;function FA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UA,hv,jA,BA,$A,mg=!1,Mc=[],ci=null,hi=null,di=null,lu=new Map,uu=new Map,Jr=[],JD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iE(t,e){switch(t){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":lu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(e.pointerId)}}function nl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Wu(e),e!==null&&hv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ZD(t,e,n,r,i){switch(e){case"focusin":return ci=nl(ci,t,e,n,r,i),!0;case"dragenter":return hi=nl(hi,t,e,n,r,i),!0;case"mouseover":return di=nl(di,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return lu.set(s,nl(lu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,uu.set(s,nl(uu.get(s)||null,t,e,n,r,i)),!0}return!1}function zA(t){var e=fs(t.target);if(e!==null){var n=Gs(e);if(n!==null){if(e=n.tag,e===13){if(e=kA(n),e!==null){t.blockedOn=e,$A(t.priority,function(){jA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);cg=r,n.target.dispatchEvent(r),cg=null}else return e=Wu(n),e!==null&&hv(e),t.blockedOn=n,!1;e.shift()}return!0}function sE(t,e,n){fh(t)&&n.delete(e)}function e2(){mg=!1,ci!==null&&fh(ci)&&(ci=null),hi!==null&&fh(hi)&&(hi=null),di!==null&&fh(di)&&(di=null),lu.forEach(sE),uu.forEach(sE)}function rl(t,e){t.blockedOn===e&&(t.blockedOn=null,mg||(mg=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,e2)))}function cu(t){function e(i){return rl(i,t)}if(0<Mc.length){rl(Mc[0],t);for(var n=1;n<Mc.length;n++){var r=Mc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ci!==null&&rl(ci,t),hi!==null&&rl(hi,t),di!==null&&rl(di,t),lu.forEach(e),uu.forEach(e),n=0;n<Jr.length;n++)r=Jr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Jr.length&&(n=Jr[0],n.blockedOn===null);)zA(n),n.blockedOn===null&&Jr.shift()}var jo=kr.ReactCurrentBatchConfig,Hh=!0;function t2(t,e,n,r){var i=Te,s=jo.transition;jo.transition=null;try{Te=1,dv(t,e,n,r)}finally{Te=i,jo.transition=s}}function n2(t,e,n,r){var i=Te,s=jo.transition;jo.transition=null;try{Te=4,dv(t,e,n,r)}finally{Te=i,jo.transition=s}}function dv(t,e,n,r){if(Hh){var i=gg(t,e,n,r);if(i===null)Wp(t,e,r,Qh,n),iE(t,r);else if(ZD(i,t,e,n,r))r.stopPropagation();else if(iE(t,r),e&4&&-1<JD.indexOf(t)){for(;i!==null;){var s=Wu(i);if(s!==null&&UA(s),s=gg(t,e,n,r),s===null&&Wp(t,e,r,Qh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Wp(t,e,r,null,n)}}var Qh=null;function gg(t,e,n,r){if(Qh=null,t=lv(r),t=fs(t),t!==null)if(e=Gs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qh=t,null}function qA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zD()){case uv:return 1;case OA:return 4;case Gh:case qD:return 16;case MA:return 536870912;default:return 16}default:return 16}}var oi=null,fv=null,ph=null;function WA(){if(ph)return ph;var t,e=fv,n=e.length,r,i="value"in oi?oi.value:oi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ph=i.slice(t,1<r?1-r:void 0)}function mh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lc(){return!0}function oE(){return!1}function pn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Lc:oE,this.isPropagationStopped=oE,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lc)},persist:function(){},isPersistent:Lc}),e}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pv=pn(Aa),qu=je({},Aa,{view:0,detail:0}),r2=pn(qu),Mp,Lp,il,of=je({},qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==il&&(il&&t.type==="mousemove"?(Mp=t.screenX-il.screenX,Lp=t.screenY-il.screenY):Lp=Mp=0,il=t),Mp)},movementY:function(t){return"movementY"in t?t.movementY:Lp}}),aE=pn(of),i2=je({},of,{dataTransfer:0}),s2=pn(i2),o2=je({},qu,{relatedTarget:0}),Fp=pn(o2),a2=je({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),l2=pn(a2),u2=je({},Aa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),c2=pn(u2),h2=je({},Aa,{data:0}),lE=pn(h2),d2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=p2[t])?!!e[t]:!1}function mv(){return m2}var g2=je({},qu,{key:function(t){if(t.key){var e=d2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?f2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mv,charCode:function(t){return t.type==="keypress"?mh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),y2=pn(g2),v2=je({},of,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uE=pn(v2),_2=je({},qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mv}),w2=pn(_2),E2=je({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),T2=pn(E2),I2=je({},of,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),S2=pn(I2),A2=[9,13,27,32],gv=Tr&&"CompositionEvent"in window,Vl=null;Tr&&"documentMode"in document&&(Vl=document.documentMode);var P2=Tr&&"TextEvent"in window&&!Vl,GA=Tr&&(!gv||Vl&&8<Vl&&11>=Vl),cE=String.fromCharCode(32),hE=!1;function KA(t,e){switch(t){case"keyup":return A2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Eo=!1;function R2(t,e){switch(t){case"compositionend":return HA(e);case"keypress":return e.which!==32?null:(hE=!0,cE);case"textInput":return t=e.data,t===cE&&hE?null:t;default:return null}}function x2(t,e){if(Eo)return t==="compositionend"||!gv&&KA(t,e)?(t=WA(),ph=fv=oi=null,Eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GA&&e.locale!=="ko"?null:e.data;default:return null}}var b2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!b2[t.type]:e==="textarea"}function QA(t,e,n,r){PA(r),e=Yh(e,"onChange"),0<e.length&&(n=new pv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Dl=null,hu=null;function C2(t){oP(t,0)}function af(t){var e=So(t);if(_A(e))return t}function k2(t,e){if(t==="change")return e}var YA=!1;if(Tr){var Up;if(Tr){var jp="oninput"in document;if(!jp){var fE=document.createElement("div");fE.setAttribute("oninput","return;"),jp=typeof fE.oninput=="function"}Up=jp}else Up=!1;YA=Up&&(!document.documentMode||9<document.documentMode)}function pE(){Dl&&(Dl.detachEvent("onpropertychange",XA),hu=Dl=null)}function XA(t){if(t.propertyName==="value"&&af(hu)){var e=[];QA(e,hu,t,lv(t)),CA(C2,e)}}function N2(t,e,n){t==="focusin"?(pE(),Dl=e,hu=n,Dl.attachEvent("onpropertychange",XA)):t==="focusout"&&pE()}function V2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return af(hu)}function D2(t,e){if(t==="click")return af(e)}function O2(t,e){if(t==="input"||t==="change")return af(e)}function M2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jn=typeof Object.is=="function"?Object.is:M2;function du(t,e){if(jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jm.call(e,i)||!jn(t[i],e[i]))return!1}return!0}function mE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gE(t,e){var n=mE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mE(n)}}function JA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZA(){for(var t=window,e=zh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zh(t.document)}return e}function yv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function L2(t){var e=ZA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&JA(n.ownerDocument.documentElement,n)){if(r!==null&&yv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=gE(n,s);var o=gE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var F2=Tr&&"documentMode"in document&&11>=document.documentMode,To=null,yg=null,Ol=null,vg=!1;function yE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vg||To==null||To!==zh(r)||(r=To,"selectionStart"in r&&yv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ol&&du(Ol,r)||(Ol=r,r=Yh(yg,"onSelect"),0<r.length&&(e=new pv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=To)))}function Fc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Io={animationend:Fc("Animation","AnimationEnd"),animationiteration:Fc("Animation","AnimationIteration"),animationstart:Fc("Animation","AnimationStart"),transitionend:Fc("Transition","TransitionEnd")},Bp={},eP={};Tr&&(eP=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function lf(t){if(Bp[t])return Bp[t];if(!Io[t])return t;var e=Io[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eP)return Bp[t]=e[n];return t}var tP=lf("animationend"),nP=lf("animationiteration"),rP=lf("animationstart"),iP=lf("transitionend"),sP=new Map,vE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fi(t,e){sP.set(t,e),Ws(e,[t])}for(var $p=0;$p<vE.length;$p++){var zp=vE[$p],U2=zp.toLowerCase(),j2=zp[0].toUpperCase()+zp.slice(1);Fi(U2,"on"+j2)}Fi(tP,"onAnimationEnd");Fi(nP,"onAnimationIteration");Fi(rP,"onAnimationStart");Fi("dblclick","onDoubleClick");Fi("focusin","onFocus");Fi("focusout","onBlur");Fi(iP,"onTransitionEnd");Xo("onMouseEnter",["mouseout","mouseover"]);Xo("onMouseLeave",["mouseout","mouseover"]);Xo("onPointerEnter",["pointerout","pointerover"]);Xo("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B2=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function _E(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,UD(r,e,void 0,t),t.currentTarget=null}function oP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;_E(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;_E(i,a,u),s=l}}}if(Wh)throw t=fg,Wh=!1,fg=null,t}function ke(t,e){var n=e[Ig];n===void 0&&(n=e[Ig]=new Set);var r=t+"__bubble";n.has(r)||(aP(e,t,2,!1),n.add(r))}function qp(t,e,n){var r=0;e&&(r|=4),aP(n,t,r,e)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function fu(t){if(!t[Uc]){t[Uc]=!0,pA.forEach(function(n){n!=="selectionchange"&&(B2.has(n)||qp(n,!1,t),qp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uc]||(e[Uc]=!0,qp("selectionchange",!1,e))}}function aP(t,e,n,r){switch(qA(e)){case 1:var i=t2;break;case 4:i=n2;break;default:i=dv}n=i.bind(null,e,n,t),i=void 0,!dg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=fs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}CA(function(){var u=s,h=lv(n),d=[];e:{var f=sP.get(t);if(f!==void 0){var g=pv,T=t;switch(t){case"keypress":if(mh(n)===0)break e;case"keydown":case"keyup":g=y2;break;case"focusin":T="focus",g=Fp;break;case"focusout":T="blur",g=Fp;break;case"beforeblur":case"afterblur":g=Fp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=aE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=s2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=w2;break;case tP:case nP:case rP:g=l2;break;case iP:g=T2;break;case"scroll":g=r2;break;case"wheel":g=S2;break;case"copy":case"cut":case"paste":g=c2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=uE}var w=(e&4)!==0,P=!w&&t==="scroll",E=w?f!==null?f+"Capture":null:f;w=[];for(var y=u,v;y!==null;){v=y;var C=v.stateNode;if(v.tag===5&&C!==null&&(v=C,E!==null&&(C=au(y,E),C!=null&&w.push(pu(y,C,v)))),P)break;y=y.return}0<w.length&&(f=new g(f,T,null,n,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==cg&&(T=n.relatedTarget||n.fromElement)&&(fs(T)||T[Ir]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(T=n.relatedTarget||n.toElement,g=u,T=T?fs(T):null,T!==null&&(P=Gs(T),T!==P||T.tag!==5&&T.tag!==6)&&(T=null)):(g=null,T=u),g!==T)){if(w=aE,C="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=uE,C="onPointerLeave",E="onPointerEnter",y="pointer"),P=g==null?f:So(g),v=T==null?f:So(T),f=new w(C,y+"leave",g,n,h),f.target=P,f.relatedTarget=v,C=null,fs(h)===u&&(w=new w(E,y+"enter",T,n,h),w.target=v,w.relatedTarget=P,C=w),P=C,g&&T)t:{for(w=g,E=T,y=0,v=w;v;v=no(v))y++;for(v=0,C=E;C;C=no(C))v++;for(;0<y-v;)w=no(w),y--;for(;0<v-y;)E=no(E),v--;for(;y--;){if(w===E||E!==null&&w===E.alternate)break t;w=no(w),E=no(E)}w=null}else w=null;g!==null&&wE(d,f,g,w,!1),T!==null&&P!==null&&wE(d,P,T,w,!0)}}e:{if(f=u?So(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var N=k2;else if(dE(f))if(YA)N=O2;else{N=V2;var V=N2}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=D2);if(N&&(N=N(t,u))){QA(d,N,n,h);break e}V&&V(t,f,u),t==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&sg(f,"number",f.value)}switch(V=u?So(u):window,t){case"focusin":(dE(V)||V.contentEditable==="true")&&(To=V,yg=u,Ol=null);break;case"focusout":Ol=yg=To=null;break;case"mousedown":vg=!0;break;case"contextmenu":case"mouseup":case"dragend":vg=!1,yE(d,n,h);break;case"selectionchange":if(F2)break;case"keydown":case"keyup":yE(d,n,h)}var S;if(gv)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Eo?KA(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(GA&&n.locale!=="ko"&&(Eo||_!=="onCompositionStart"?_==="onCompositionEnd"&&Eo&&(S=WA()):(oi=h,fv="value"in oi?oi.value:oi.textContent,Eo=!0)),V=Yh(u,_),0<V.length&&(_=new lE(_,t,null,n,h),d.push({event:_,listeners:V}),S?_.data=S:(S=HA(n),S!==null&&(_.data=S)))),(S=P2?R2(t,n):x2(t,n))&&(u=Yh(u,"onBeforeInput"),0<u.length&&(h=new lE("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=S))}oP(d,e)})}function pu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=au(t,n),s!=null&&r.unshift(pu(t,s,i)),s=au(t,e),s!=null&&r.push(pu(t,s,i))),t=t.return}return r}function no(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=au(n,s),l!=null&&o.unshift(pu(n,l,a))):i||(l=au(n,s),l!=null&&o.push(pu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $2=/\r\n?/g,z2=/\u0000|\uFFFD/g;function EE(t){return(typeof t=="string"?t:""+t).replace($2,`
`).replace(z2,"")}function jc(t,e,n){if(e=EE(e),EE(t)!==e&&n)throw Error($(425))}function Xh(){}var _g=null,wg=null;function Eg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tg=typeof setTimeout=="function"?setTimeout:void 0,q2=typeof clearTimeout=="function"?clearTimeout:void 0,TE=typeof Promise=="function"?Promise:void 0,W2=typeof queueMicrotask=="function"?queueMicrotask:typeof TE<"u"?function(t){return TE.resolve(null).then(t).catch(G2)}:Tg;function G2(t){setTimeout(function(){throw t})}function Gp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),cu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);cu(e)}function fi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function IE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pa=Math.random().toString(36).slice(2),Qn="__reactFiber$"+Pa,mu="__reactProps$"+Pa,Ir="__reactContainer$"+Pa,Ig="__reactEvents$"+Pa,K2="__reactListeners$"+Pa,H2="__reactHandles$"+Pa;function fs(t){var e=t[Qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ir]||n[Qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=IE(t);t!==null;){if(n=t[Qn])return n;t=IE(t)}return e}t=n,n=t.parentNode}return null}function Wu(t){return t=t[Qn]||t[Ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function So(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function uf(t){return t[mu]||null}var Sg=[],Ao=-1;function Ui(t){return{current:t}}function Ne(t){0>Ao||(t.current=Sg[Ao],Sg[Ao]=null,Ao--)}function xe(t,e){Ao++,Sg[Ao]=t.current,t.current=e}var Ri={},bt=Ui(Ri),Kt=Ui(!1),Ps=Ri;function Jo(t,e){var n=t.type.contextTypes;if(!n)return Ri;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ht(t){return t=t.childContextTypes,t!=null}function Jh(){Ne(Kt),Ne(bt)}function SE(t,e,n){if(bt.current!==Ri)throw Error($(168));xe(bt,e),xe(Kt,n)}function lP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,ND(t)||"Unknown",i));return je({},n,r)}function Zh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ri,Ps=bt.current,xe(bt,t),xe(Kt,Kt.current),!0}function AE(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=lP(t,e,Ps),r.__reactInternalMemoizedMergedChildContext=t,Ne(Kt),Ne(bt),xe(bt,t)):Ne(Kt),xe(Kt,n)}var dr=null,cf=!1,Kp=!1;function uP(t){dr===null?dr=[t]:dr.push(t)}function Q2(t){cf=!0,uP(t)}function ji(){if(!Kp&&dr!==null){Kp=!0;var t=0,e=Te;try{var n=dr;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}dr=null,cf=!1}catch(i){throw dr!==null&&(dr=dr.slice(t+1)),DA(uv,ji),i}finally{Te=e,Kp=!1}}return null}var Po=[],Ro=0,ed=null,td=0,vn=[],_n=0,Rs=null,fr=1,pr="";function ts(t,e){Po[Ro++]=td,Po[Ro++]=ed,ed=t,td=e}function cP(t,e,n){vn[_n++]=fr,vn[_n++]=pr,vn[_n++]=Rs,Rs=t;var r=fr;t=pr;var i=32-Fn(r)-1;r&=~(1<<i),n+=1;var s=32-Fn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,fr=1<<32-Fn(e)+i|n<<i|r,pr=s+t}else fr=1<<s|n<<i|r,pr=t}function vv(t){t.return!==null&&(ts(t,1),cP(t,1,0))}function _v(t){for(;t===ed;)ed=Po[--Ro],Po[Ro]=null,td=Po[--Ro],Po[Ro]=null;for(;t===Rs;)Rs=vn[--_n],vn[_n]=null,pr=vn[--_n],vn[_n]=null,fr=vn[--_n],vn[_n]=null}var sn=null,nn=null,Oe=!1,Dn=null;function hP(t,e){var n=Tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function PE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sn=t,nn=fi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sn=t,nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rs!==null?{id:fr,overflow:pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,sn=t,nn=null,!0):!1;default:return!1}}function Ag(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pg(t){if(Oe){var e=nn;if(e){var n=e;if(!PE(t,e)){if(Ag(t))throw Error($(418));e=fi(n.nextSibling);var r=sn;e&&PE(t,e)?hP(r,n):(t.flags=t.flags&-4097|2,Oe=!1,sn=t)}}else{if(Ag(t))throw Error($(418));t.flags=t.flags&-4097|2,Oe=!1,sn=t}}}function RE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sn=t}function Bc(t){if(t!==sn)return!1;if(!Oe)return RE(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Eg(t.type,t.memoizedProps)),e&&(e=nn)){if(Ag(t))throw dP(),Error($(418));for(;e;)hP(t,e),e=fi(e.nextSibling)}if(RE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nn=fi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nn=null}}else nn=sn?fi(t.stateNode.nextSibling):null;return!0}function dP(){for(var t=nn;t;)t=fi(t.nextSibling)}function Zo(){nn=sn=null,Oe=!1}function wv(t){Dn===null?Dn=[t]:Dn.push(t)}var Y2=kr.ReactCurrentBatchConfig;function sl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function $c(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xE(t){var e=t._init;return e(t._payload)}function fP(t){function e(E,y){if(t){var v=E.deletions;v===null?(E.deletions=[y],E.flags|=16):v.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function i(E,y){return E=yi(E,y),E.index=0,E.sibling=null,E}function s(E,y,v){return E.index=v,t?(v=E.alternate,v!==null?(v=v.index,v<y?(E.flags|=2,y):v):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,y,v,C){return y===null||y.tag!==6?(y=em(v,E.mode,C),y.return=E,y):(y=i(y,v),y.return=E,y)}function l(E,y,v,C){var N=v.type;return N===wo?h(E,y,v.props.children,C,v.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Qr&&xE(N)===y.type)?(C=i(y,v.props),C.ref=sl(E,y,v),C.return=E,C):(C=Th(v.type,v.key,v.props,null,E.mode,C),C.ref=sl(E,y,v),C.return=E,C)}function u(E,y,v,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=tm(v,E.mode,C),y.return=E,y):(y=i(y,v.children||[]),y.return=E,y)}function h(E,y,v,C,N){return y===null||y.tag!==7?(y=ws(v,E.mode,C,N),y.return=E,y):(y=i(y,v),y.return=E,y)}function d(E,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=em(""+y,E.mode,v),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case kc:return v=Th(y.type,y.key,y.props,null,E.mode,v),v.ref=sl(E,null,y),v.return=E,v;case _o:return y=tm(y,E.mode,v),y.return=E,y;case Qr:var C=y._init;return d(E,C(y._payload),v)}if(_l(y)||el(y))return y=ws(y,E.mode,v,null),y.return=E,y;$c(E,y)}return null}function f(E,y,v,C){var N=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return N!==null?null:a(E,y,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case kc:return v.key===N?l(E,y,v,C):null;case _o:return v.key===N?u(E,y,v,C):null;case Qr:return N=v._init,f(E,y,N(v._payload),C)}if(_l(v)||el(v))return N!==null?null:h(E,y,v,C,null);$c(E,v)}return null}function g(E,y,v,C,N){if(typeof C=="string"&&C!==""||typeof C=="number")return E=E.get(v)||null,a(y,E,""+C,N);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case kc:return E=E.get(C.key===null?v:C.key)||null,l(y,E,C,N);case _o:return E=E.get(C.key===null?v:C.key)||null,u(y,E,C,N);case Qr:var V=C._init;return g(E,y,v,V(C._payload),N)}if(_l(C)||el(C))return E=E.get(v)||null,h(y,E,C,N,null);$c(y,C)}return null}function T(E,y,v,C){for(var N=null,V=null,S=y,_=y=0,A=null;S!==null&&_<v.length;_++){S.index>_?(A=S,S=null):A=S.sibling;var b=f(E,S,v[_],C);if(b===null){S===null&&(S=A);break}t&&S&&b.alternate===null&&e(E,S),y=s(b,y,_),V===null?N=b:V.sibling=b,V=b,S=A}if(_===v.length)return n(E,S),Oe&&ts(E,_),N;if(S===null){for(;_<v.length;_++)S=d(E,v[_],C),S!==null&&(y=s(S,y,_),V===null?N=S:V.sibling=S,V=S);return Oe&&ts(E,_),N}for(S=r(E,S);_<v.length;_++)A=g(S,E,_,v[_],C),A!==null&&(t&&A.alternate!==null&&S.delete(A.key===null?_:A.key),y=s(A,y,_),V===null?N=A:V.sibling=A,V=A);return t&&S.forEach(function(k){return e(E,k)}),Oe&&ts(E,_),N}function w(E,y,v,C){var N=el(v);if(typeof N!="function")throw Error($(150));if(v=N.call(v),v==null)throw Error($(151));for(var V=N=null,S=y,_=y=0,A=null,b=v.next();S!==null&&!b.done;_++,b=v.next()){S.index>_?(A=S,S=null):A=S.sibling;var k=f(E,S,b.value,C);if(k===null){S===null&&(S=A);break}t&&S&&k.alternate===null&&e(E,S),y=s(k,y,_),V===null?N=k:V.sibling=k,V=k,S=A}if(b.done)return n(E,S),Oe&&ts(E,_),N;if(S===null){for(;!b.done;_++,b=v.next())b=d(E,b.value,C),b!==null&&(y=s(b,y,_),V===null?N=b:V.sibling=b,V=b);return Oe&&ts(E,_),N}for(S=r(E,S);!b.done;_++,b=v.next())b=g(S,E,_,b.value,C),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?_:b.key),y=s(b,y,_),V===null?N=b:V.sibling=b,V=b);return t&&S.forEach(function(D){return e(E,D)}),Oe&&ts(E,_),N}function P(E,y,v,C){if(typeof v=="object"&&v!==null&&v.type===wo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case kc:e:{for(var N=v.key,V=y;V!==null;){if(V.key===N){if(N=v.type,N===wo){if(V.tag===7){n(E,V.sibling),y=i(V,v.props.children),y.return=E,E=y;break e}}else if(V.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Qr&&xE(N)===V.type){n(E,V.sibling),y=i(V,v.props),y.ref=sl(E,V,v),y.return=E,E=y;break e}n(E,V);break}else e(E,V);V=V.sibling}v.type===wo?(y=ws(v.props.children,E.mode,C,v.key),y.return=E,E=y):(C=Th(v.type,v.key,v.props,null,E.mode,C),C.ref=sl(E,y,v),C.return=E,E=C)}return o(E);case _o:e:{for(V=v.key;y!==null;){if(y.key===V)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(E,y.sibling),y=i(y,v.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=tm(v,E.mode,C),y.return=E,E=y}return o(E);case Qr:return V=v._init,P(E,y,V(v._payload),C)}if(_l(v))return T(E,y,v,C);if(el(v))return w(E,y,v,C);$c(E,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(E,y.sibling),y=i(y,v),y.return=E,E=y):(n(E,y),y=em(v,E.mode,C),y.return=E,E=y),o(E)):n(E,y)}return P}var ea=fP(!0),pP=fP(!1),nd=Ui(null),rd=null,xo=null,Ev=null;function Tv(){Ev=xo=rd=null}function Iv(t){var e=nd.current;Ne(nd),t._currentValue=e}function Rg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bo(t,e){rd=t,Ev=xo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zt=!0),t.firstContext=null)}function Sn(t){var e=t._currentValue;if(Ev!==t)if(t={context:t,memoizedValue:e,next:null},xo===null){if(rd===null)throw Error($(308));xo=t,rd.dependencies={lanes:0,firstContext:t}}else xo=xo.next=t;return e}var ps=null;function Sv(t){ps===null?ps=[t]:ps.push(t)}function mP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Sr(t,r)}function Sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yr=!1;function Av(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sr(t,n)}return i=r.interleaved,i===null?(e.next=e,Sv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sr(t,n)}function gh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cv(t,n)}}function bE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function id(t,e,n,r){var i=t.updateQueue;Yr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,w=a;switch(f=e,g=n,w.tag){case 1:if(T=w.payload,typeof T=="function"){d=T.call(g,d,f);break e}d=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=w.payload,f=typeof T=="function"?T.call(g,d,f):T,f==null)break e;d=je({},d,f);break e;case 2:Yr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,l=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);bs|=o,t.lanes=o,t.memoizedState=d}}function CE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Gu={},Zn=Ui(Gu),gu=Ui(Gu),yu=Ui(Gu);function ms(t){if(t===Gu)throw Error($(174));return t}function Pv(t,e){switch(xe(yu,e),xe(gu,t),xe(Zn,Gu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ag(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ag(e,t)}Ne(Zn),xe(Zn,e)}function ta(){Ne(Zn),Ne(gu),Ne(yu)}function yP(t){ms(yu.current);var e=ms(Zn.current),n=ag(e,t.type);e!==n&&(xe(gu,t),xe(Zn,n))}function Rv(t){gu.current===t&&(Ne(Zn),Ne(gu))}var Me=Ui(0);function sd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hp=[];function xv(){for(var t=0;t<Hp.length;t++)Hp[t]._workInProgressVersionPrimary=null;Hp.length=0}var yh=kr.ReactCurrentDispatcher,Qp=kr.ReactCurrentBatchConfig,xs=0,Ue=null,rt=null,ht=null,od=!1,Ml=!1,vu=0,X2=0;function wt(){throw Error($(321))}function bv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jn(t[n],e[n]))return!1;return!0}function Cv(t,e,n,r,i,s){if(xs=s,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yh.current=t===null||t.memoizedState===null?tO:nO,t=n(r,i),Ml){s=0;do{if(Ml=!1,vu=0,25<=s)throw Error($(301));s+=1,ht=rt=null,e.updateQueue=null,yh.current=rO,t=n(r,i)}while(Ml)}if(yh.current=ad,e=rt!==null&&rt.next!==null,xs=0,ht=rt=Ue=null,od=!1,e)throw Error($(300));return t}function kv(){var t=vu!==0;return vu=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ue.memoizedState=ht=t:ht=ht.next=t,ht}function An(){if(rt===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var e=ht===null?Ue.memoizedState:ht.next;if(e!==null)ht=e,rt=t;else{if(t===null)throw Error($(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},ht===null?Ue.memoizedState=ht=t:ht=ht.next=t}return ht}function _u(t,e){return typeof e=="function"?e(t):e}function Yp(t){var e=An(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=rt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((xs&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ue.lanes|=h,bs|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,jn(r,e.memoizedState)||(zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ue.lanes|=s,bs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xp(t){var e=An(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);jn(s,e.memoizedState)||(zt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function vP(){}function _P(t,e){var n=Ue,r=An(),i=e(),s=!jn(r.memoizedState,i);if(s&&(r.memoizedState=i,zt=!0),r=r.queue,Nv(TP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,wu(9,EP.bind(null,n,r,i,e),void 0,null),ft===null)throw Error($(349));xs&30||wP(n,e,i)}return i}function wP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function EP(t,e,n,r){e.value=n,e.getSnapshot=r,IP(e)&&SP(t)}function TP(t,e,n){return n(function(){IP(e)&&SP(t)})}function IP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jn(t,n)}catch{return!0}}function SP(t){var e=Sr(t,1);e!==null&&Un(e,t,1,-1)}function kE(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_u,lastRenderedState:t},e.queue=t,t=t.dispatch=eO.bind(null,Ue,t),[e.memoizedState,t]}function wu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function AP(){return An().memoizedState}function vh(t,e,n,r){var i=Gn();Ue.flags|=t,i.memoizedState=wu(1|e,n,void 0,r===void 0?null:r)}function hf(t,e,n,r){var i=An();r=r===void 0?null:r;var s=void 0;if(rt!==null){var o=rt.memoizedState;if(s=o.destroy,r!==null&&bv(r,o.deps)){i.memoizedState=wu(e,n,s,r);return}}Ue.flags|=t,i.memoizedState=wu(1|e,n,s,r)}function NE(t,e){return vh(8390656,8,t,e)}function Nv(t,e){return hf(2048,8,t,e)}function PP(t,e){return hf(4,2,t,e)}function RP(t,e){return hf(4,4,t,e)}function xP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bP(t,e,n){return n=n!=null?n.concat([t]):null,hf(4,4,xP.bind(null,e,t),n)}function Vv(){}function CP(t,e){var n=An();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kP(t,e){var n=An();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function NP(t,e,n){return xs&21?(jn(n,e)||(n=LA(),Ue.lanes|=n,bs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zt=!0),t.memoizedState=n)}function J2(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Qp.transition;Qp.transition={};try{t(!1),e()}finally{Te=n,Qp.transition=r}}function VP(){return An().memoizedState}function Z2(t,e,n){var r=gi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},DP(t))OP(e,n);else if(n=mP(t,e,n,r),n!==null){var i=Mt();Un(n,t,r,i),MP(n,e,r)}}function eO(t,e,n){var r=gi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(DP(t))OP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,jn(a,o)){var l=e.interleaved;l===null?(i.next=i,Sv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=mP(t,e,i,r),n!==null&&(i=Mt(),Un(n,t,r,i),MP(n,e,r))}}function DP(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function OP(t,e){Ml=od=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cv(t,n)}}var ad={readContext:Sn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},tO={readContext:Sn,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:Sn,useEffect:NE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vh(4194308,4,xP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vh(4194308,4,t,e)},useInsertionEffect:function(t,e){return vh(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Z2.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:kE,useDebugValue:Vv,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=kE(!1),e=t[0];return t=J2.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,i=Gn();if(Oe){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),ft===null)throw Error($(349));xs&30||wP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,NE(TP.bind(null,r,s,t),[t]),r.flags|=2048,wu(9,EP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Gn(),e=ft.identifierPrefix;if(Oe){var n=pr,r=fr;n=(r&~(1<<32-Fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=X2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},nO={readContext:Sn,useCallback:CP,useContext:Sn,useEffect:Nv,useImperativeHandle:bP,useInsertionEffect:PP,useLayoutEffect:RP,useMemo:kP,useReducer:Yp,useRef:AP,useState:function(){return Yp(_u)},useDebugValue:Vv,useDeferredValue:function(t){var e=An();return NP(e,rt.memoizedState,t)},useTransition:function(){var t=Yp(_u)[0],e=An().memoizedState;return[t,e]},useMutableSource:vP,useSyncExternalStore:_P,useId:VP,unstable_isNewReconciler:!1},rO={readContext:Sn,useCallback:CP,useContext:Sn,useEffect:Nv,useImperativeHandle:bP,useInsertionEffect:PP,useLayoutEffect:RP,useMemo:kP,useReducer:Xp,useRef:AP,useState:function(){return Xp(_u)},useDebugValue:Vv,useDeferredValue:function(t){var e=An();return rt===null?e.memoizedState=t:NP(e,rt.memoizedState,t)},useTransition:function(){var t=Xp(_u)[0],e=An().memoizedState;return[t,e]},useMutableSource:vP,useSyncExternalStore:_P,useId:VP,unstable_isNewReconciler:!1};function Cn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var df={isMounted:function(t){return(t=t._reactInternals)?Gs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mt(),i=gi(t),s=_r(r,i);s.payload=e,n!=null&&(s.callback=n),e=pi(t,s,i),e!==null&&(Un(e,t,i,r),gh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mt(),i=gi(t),s=_r(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=pi(t,s,i),e!==null&&(Un(e,t,i,r),gh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mt(),r=gi(t),i=_r(n,r);i.tag=2,e!=null&&(i.callback=e),e=pi(t,i,r),e!==null&&(Un(e,t,r,n),gh(e,t,r))}};function VE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!du(n,r)||!du(i,s):!0}function LP(t,e,n){var r=!1,i=Ri,s=e.contextType;return typeof s=="object"&&s!==null?s=Sn(s):(i=Ht(e)?Ps:bt.current,r=e.contextTypes,s=(r=r!=null)?Jo(t,i):Ri),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=df,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function DE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&df.enqueueReplaceState(e,e.state,null)}function bg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Av(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Sn(s):(s=Ht(e)?Ps:bt.current,i.context=Jo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(xg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&df.enqueueReplaceState(i,i.state,null),id(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function na(t,e){try{var n="",r=e;do n+=kD(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Jp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var iO=typeof WeakMap=="function"?WeakMap:Map;function FP(t,e,n){n=_r(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ud||(ud=!0,jg=r),Cg(t,e)},n}function UP(t,e,n){n=_r(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Cg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Cg(t,e),typeof r!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function OE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new iO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=vO.bind(null,t,e,n),e.then(t,t))}function ME(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function LE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_r(-1,1),e.tag=2,pi(n,e,1))),n.lanes|=1),t)}var sO=kr.ReactCurrentOwner,zt=!1;function Dt(t,e,n,r){e.child=t===null?pP(e,null,n,r):ea(e,t.child,n,r)}function FE(t,e,n,r,i){n=n.render;var s=e.ref;return Bo(e,i),r=Cv(t,e,n,r,s,i),n=kv(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ar(t,e,i)):(Oe&&n&&vv(e),e.flags|=1,Dt(t,e,r,i),e.child)}function UE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Bv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,jP(t,e,s,r,i)):(t=Th(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:du,n(o,r)&&t.ref===e.ref)return Ar(t,e,i)}return e.flags|=1,t=yi(s,r),t.ref=e.ref,t.return=e,e.child=t}function jP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(du(s,r)&&t.ref===e.ref)if(zt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(zt=!0);else return e.lanes=t.lanes,Ar(t,e,i)}return kg(t,e,n,r,i)}function BP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Co,Zt),Zt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(Co,Zt),Zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,xe(Co,Zt),Zt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,xe(Co,Zt),Zt|=r;return Dt(t,e,i,n),e.child}function $P(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kg(t,e,n,r,i){var s=Ht(n)?Ps:bt.current;return s=Jo(e,s),Bo(e,i),n=Cv(t,e,n,r,s,i),r=kv(),t!==null&&!zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ar(t,e,i)):(Oe&&r&&vv(e),e.flags|=1,Dt(t,e,n,i),e.child)}function jE(t,e,n,r,i){if(Ht(n)){var s=!0;Zh(e)}else s=!1;if(Bo(e,i),e.stateNode===null)_h(t,e),LP(e,n,r),bg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Sn(u):(u=Ht(n)?Ps:bt.current,u=Jo(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&DE(e,o,r,u),Yr=!1;var f=e.memoizedState;o.state=f,id(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Kt.current||Yr?(typeof h=="function"&&(xg(e,n,h,r),l=e.memoizedState),(a=Yr||VE(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gP(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Cn(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Sn(l):(l=Ht(n)?Ps:bt.current,l=Jo(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&DE(e,o,r,l),Yr=!1,f=e.memoizedState,o.state=f,id(e,r,o,i);var T=e.memoizedState;a!==d||f!==T||Kt.current||Yr?(typeof g=="function"&&(xg(e,n,g,r),T=e.memoizedState),(u=Yr||VE(e,n,u,r,f,T,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ng(t,e,n,r,s,i)}function Ng(t,e,n,r,i,s){$P(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&AE(e,n,!1),Ar(t,e,s);r=e.stateNode,sO.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ea(e,t.child,null,s),e.child=ea(e,null,a,s)):Dt(t,e,a,s),e.memoizedState=r.state,i&&AE(e,n,!0),e.child}function zP(t){var e=t.stateNode;e.pendingContext?SE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&SE(t,e.context,!1),Pv(t,e.containerInfo)}function BE(t,e,n,r,i){return Zo(),wv(i),e.flags|=256,Dt(t,e,n,r),e.child}var Vg={dehydrated:null,treeContext:null,retryLane:0};function Dg(t){return{baseLanes:t,cachePool:null,transitions:null}}function qP(t,e,n){var r=e.pendingProps,i=Me.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),xe(Me,i&1),t===null)return Pg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=mf(o,r,0,null),t=ws(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Dg(n),e.memoizedState=Vg,t):Dv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return oO(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=yi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=yi(a,s):(s=ws(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Dg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Vg,r}return s=t.child,t=s.sibling,r=yi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dv(t,e){return e=mf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zc(t,e,n,r){return r!==null&&wv(r),ea(e,t.child,null,n),t=Dv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function oO(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Jp(Error($(422))),zc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=mf({mode:"visible",children:r.children},i,0,null),s=ws(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ea(e,t.child,null,o),e.child.memoizedState=Dg(o),e.memoizedState=Vg,s);if(!(e.mode&1))return zc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error($(419)),r=Jp(s,r,void 0),zc(t,e,o,r)}if(a=(o&t.childLanes)!==0,zt||a){if(r=ft,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Sr(t,i),Un(r,t,i,-1))}return jv(),r=Jp(Error($(421))),zc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=_O.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,nn=fi(i.nextSibling),sn=e,Oe=!0,Dn=null,t!==null&&(vn[_n++]=fr,vn[_n++]=pr,vn[_n++]=Rs,fr=t.id,pr=t.overflow,Rs=e),e=Dv(e,r.children),e.flags|=4096,e)}function $E(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rg(t.return,e,n)}function Zp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function WP(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Dt(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$E(t,n,e);else if(t.tag===19)$E(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(xe(Me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&sd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zp(e,!0,n,null,s);break;case"together":Zp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _h(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=yi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function aO(t,e,n){switch(e.tag){case 3:zP(e),Zo();break;case 5:yP(e);break;case 1:Ht(e.type)&&Zh(e);break;case 4:Pv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xe(nd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xe(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?qP(t,e,n):(xe(Me,Me.current&1),t=Ar(t,e,n),t!==null?t.sibling:null);xe(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return WP(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xe(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,BP(t,e,n)}return Ar(t,e,n)}var GP,Og,KP,HP;GP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Og=function(){};KP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ms(Zn.current);var s=null;switch(n){case"input":i=rg(t,i),r=rg(t,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=og(t,i),r=og(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xh)}lg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(su.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(su.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ke("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};HP=function(t,e,n,r){n!==r&&(e.flags|=4)};function ol(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function lO(t,e,n){var r=e.pendingProps;switch(_v(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(e),null;case 1:return Ht(e.type)&&Jh(),Et(e),null;case 3:return r=e.stateNode,ta(),Ne(Kt),Ne(bt),xv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dn!==null&&(zg(Dn),Dn=null))),Og(t,e),Et(e),null;case 5:Rv(e);var i=ms(yu.current);if(n=e.type,t!==null&&e.stateNode!=null)KP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Et(e),null}if(t=ms(Zn.current),Bc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qn]=e,r[mu]=s,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(i=0;i<El.length;i++)ke(El[i],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":Xw(r,s),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ke("invalid",r);break;case"textarea":Zw(r,s),ke("invalid",r)}lg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&jc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&jc(r.textContent,a,t),i=["children",""+a]):su.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":Nc(r),Jw(r,s,!0);break;case"textarea":Nc(r),eE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qn]=e,t[mu]=r,GP(t,e,!1,!1),e.stateNode=t;e:{switch(o=ug(n,r),n){case"dialog":ke("cancel",t),ke("close",t),i=r;break;case"iframe":case"object":case"embed":ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<El.length;i++)ke(El[i],t);i=r;break;case"source":ke("error",t),i=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),i=r;break;case"details":ke("toggle",t),i=r;break;case"input":Xw(t,r),i=rg(t,r),ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),ke("invalid",t);break;case"textarea":Zw(t,r),i=og(t,r),ke("invalid",t);break;default:i=r}lg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?AA(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&IA(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ou(t,l):typeof l=="number"&&ou(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(su.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ke("scroll",t):l!=null&&iv(t,s,l,o))}switch(n){case"input":Nc(t),Jw(t,r,!1);break;case"textarea":Nc(t),eE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Lo(t,!!r.multiple,s,!1):r.defaultValue!=null&&Lo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Et(e),null;case 6:if(t&&e.stateNode!=null)HP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=ms(yu.current),ms(Zn.current),Bc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qn]=e,(s=r.nodeValue!==n)&&(t=sn,t!==null))switch(t.tag){case 3:jc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qn]=e,e.stateNode=r}return Et(e),null;case 13:if(Ne(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&nn!==null&&e.mode&1&&!(e.flags&128))dP(),Zo(),e.flags|=98560,s=!1;else if(s=Bc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Qn]=e}else Zo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Et(e),s=!1}else Dn!==null&&(zg(Dn),Dn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?it===0&&(it=3):jv())),e.updateQueue!==null&&(e.flags|=4),Et(e),null);case 4:return ta(),Og(t,e),t===null&&fu(e.stateNode.containerInfo),Et(e),null;case 10:return Iv(e.type._context),Et(e),null;case 17:return Ht(e.type)&&Jh(),Et(e),null;case 19:if(Ne(Me),s=e.memoizedState,s===null)return Et(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ol(s,!1);else{if(it!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sd(t),o!==null){for(e.flags|=128,ol(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(Me,Me.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ge()>ra&&(e.flags|=128,r=!0,ol(s,!1),e.lanes=4194304)}else{if(!r)if(t=sd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ol(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Oe)return Et(e),null}else 2*Ge()-s.renderingStartTime>ra&&n!==1073741824&&(e.flags|=128,r=!0,ol(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ge(),e.sibling=null,n=Me.current,xe(Me,r?n&1|2:n&1),e):(Et(e),null);case 22:case 23:return Uv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zt&1073741824&&(Et(e),e.subtreeFlags&6&&(e.flags|=8192)):Et(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function uO(t,e){switch(_v(e),e.tag){case 1:return Ht(e.type)&&Jh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ta(),Ne(Kt),Ne(bt),xv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rv(e),null;case 13:if(Ne(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Zo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Me),null;case 4:return ta(),null;case 10:return Iv(e.type._context),null;case 22:case 23:return Uv(),null;case 24:return null;default:return null}}var qc=!1,At=!1,cO=typeof WeakSet=="function"?WeakSet:Set,Q=null;function bo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function Mg(t,e,n){try{n()}catch(r){$e(t,e,r)}}var zE=!1;function hO(t,e){if(_g=Hh,t=ZA(),yv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(wg={focusedElem:t,selectionRange:n},Hh=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var w=T.memoizedProps,P=T.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?w:Cn(e.type,w),P);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(C){$e(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return T=zE,zE=!1,T}function Ll(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Mg(e,n,s)}i=i.next}while(i!==r)}}function ff(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QP(t){var e=t.alternate;e!==null&&(t.alternate=null,QP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qn],delete e[mu],delete e[Ig],delete e[K2],delete e[H2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YP(t){return t.tag===5||t.tag===3||t.tag===4}function qE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xh));else if(r!==4&&(t=t.child,t!==null))for(Fg(t,e,n),t=t.sibling;t!==null;)Fg(t,e,n),t=t.sibling}function Ug(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ug(t,e,n),t=t.sibling;t!==null;)Ug(t,e,n),t=t.sibling}var mt=null,kn=!1;function zr(t,e,n){for(n=n.child;n!==null;)XP(t,e,n),n=n.sibling}function XP(t,e,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(sf,n)}catch{}switch(n.tag){case 5:At||bo(n,e);case 6:var r=mt,i=kn;mt=null,zr(t,e,n),mt=r,kn=i,mt!==null&&(kn?(t=mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(kn?(t=mt,n=n.stateNode,t.nodeType===8?Gp(t.parentNode,n):t.nodeType===1&&Gp(t,n),cu(t)):Gp(mt,n.stateNode));break;case 4:r=mt,i=kn,mt=n.stateNode.containerInfo,kn=!0,zr(t,e,n),mt=r,kn=i;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Mg(n,e,o),i=i.next}while(i!==r)}zr(t,e,n);break;case 1:if(!At&&(bo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){$e(n,e,a)}zr(t,e,n);break;case 21:zr(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,zr(t,e,n),At=r):zr(t,e,n);break;default:zr(t,e,n)}}function WE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cO),e.forEach(function(r){var i=wO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:mt=a.stateNode,kn=!1;break e;case 3:mt=a.stateNode.containerInfo,kn=!0;break e;case 4:mt=a.stateNode.containerInfo,kn=!0;break e}a=a.return}if(mt===null)throw Error($(160));XP(s,o,i),mt=null,kn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){$e(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JP(e,t),e=e.sibling}function JP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(bn(e,t),Wn(t),r&4){try{Ll(3,t,t.return),ff(3,t)}catch(w){$e(t,t.return,w)}try{Ll(5,t,t.return)}catch(w){$e(t,t.return,w)}}break;case 1:bn(e,t),Wn(t),r&512&&n!==null&&bo(n,n.return);break;case 5:if(bn(e,t),Wn(t),r&512&&n!==null&&bo(n,n.return),t.flags&32){var i=t.stateNode;try{ou(i,"")}catch(w){$e(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wA(i,s),ug(a,o);var u=ug(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?AA(i,d):h==="dangerouslySetInnerHTML"?IA(i,d):h==="children"?ou(i,d):iv(i,h,d,u)}switch(a){case"input":ig(i,s);break;case"textarea":EA(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Lo(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?Lo(i,!!s.multiple,s.defaultValue,!0):Lo(i,!!s.multiple,s.multiple?[]:"",!1))}i[mu]=s}catch(w){$e(t,t.return,w)}}break;case 6:if(bn(e,t),Wn(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){$e(t,t.return,w)}}break;case 3:if(bn(e,t),Wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cu(e.containerInfo)}catch(w){$e(t,t.return,w)}break;case 4:bn(e,t),Wn(t);break;case 13:bn(e,t),Wn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lv=Ge())),r&4&&WE(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(At=(u=At)||h,bn(e,t),At=u):bn(e,t),Wn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Q=t,h=t.child;h!==null;){for(d=Q=h;Q!==null;){switch(f=Q,g=f.child,f.tag){case 0:case 11:case 14:case 15:Ll(4,f,f.return);break;case 1:bo(f,f.return);var T=f.stateNode;if(typeof T.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(w){$e(r,n,w)}}break;case 5:bo(f,f.return);break;case 22:if(f.memoizedState!==null){KE(d);continue}}g!==null?(g.return=f,Q=g):KE(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=SA("display",o))}catch(w){$e(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){$e(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bn(e,t),Wn(t),r&4&&WE(t);break;case 21:break;default:bn(e,t),Wn(t)}}function Wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YP(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ou(i,""),r.flags&=-33);var s=qE(t);Ug(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qE(t);Fg(t,a,o);break;default:throw Error($(161))}}catch(l){$e(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dO(t,e,n){Q=t,ZP(t)}function ZP(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||At;a=qc;var u=At;if(qc=o,(At=l)&&!u)for(Q=i;Q!==null;)o=Q,l=o.child,o.tag===22&&o.memoizedState!==null?HE(i):l!==null?(l.return=o,Q=l):HE(i);for(;s!==null;)Q=s,ZP(s),s=s.sibling;Q=i,qc=a,At=u}GE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Q=s):GE(t)}}function GE(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||ff(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Cn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&CE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}CE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&cu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}At||e.flags&512&&Lg(e)}catch(f){$e(e,e.return,f)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function KE(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function HE(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ff(4,e)}catch(l){$e(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){$e(e,i,l)}}var s=e.return;try{Lg(e)}catch(l){$e(e,s,l)}break;case 5:var o=e.return;try{Lg(e)}catch(l){$e(e,o,l)}}}catch(l){$e(e,e.return,l)}if(e===t){Q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Q=a;break}Q=e.return}}var fO=Math.ceil,ld=kr.ReactCurrentDispatcher,Ov=kr.ReactCurrentOwner,In=kr.ReactCurrentBatchConfig,ye=0,ft=null,Ze=null,yt=0,Zt=0,Co=Ui(0),it=0,Eu=null,bs=0,pf=0,Mv=0,Fl=null,$t=null,Lv=0,ra=1/0,hr=null,ud=!1,jg=null,mi=null,Wc=!1,ai=null,cd=0,Ul=0,Bg=null,wh=-1,Eh=0;function Mt(){return ye&6?Ge():wh!==-1?wh:wh=Ge()}function gi(t){return t.mode&1?ye&2&&yt!==0?yt&-yt:Y2.transition!==null?(Eh===0&&(Eh=LA()),Eh):(t=Te,t!==0||(t=window.event,t=t===void 0?16:qA(t.type)),t):1}function Un(t,e,n,r){if(50<Ul)throw Ul=0,Bg=null,Error($(185));zu(t,n,r),(!(ye&2)||t!==ft)&&(t===ft&&(!(ye&2)&&(pf|=n),it===4&&Zr(t,yt)),Qt(t,r),n===1&&ye===0&&!(e.mode&1)&&(ra=Ge()+500,cf&&ji()))}function Qt(t,e){var n=t.callbackNode;YD(t,e);var r=Kh(t,t===ft?yt:0);if(r===0)n!==null&&rE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rE(n),e===1)t.tag===0?Q2(QE.bind(null,t)):uP(QE.bind(null,t)),W2(function(){!(ye&6)&&ji()}),n=null;else{switch(FA(r)){case 1:n=uv;break;case 4:n=OA;break;case 16:n=Gh;break;case 536870912:n=MA;break;default:n=Gh}n=aR(n,eR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function eR(t,e){if(wh=-1,Eh=0,ye&6)throw Error($(327));var n=t.callbackNode;if($o()&&t.callbackNode!==n)return null;var r=Kh(t,t===ft?yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hd(t,r);else{e=r;var i=ye;ye|=2;var s=nR();(ft!==t||yt!==e)&&(hr=null,ra=Ge()+500,_s(t,e));do try{gO();break}catch(a){tR(t,a)}while(1);Tv(),ld.current=s,ye=i,Ze!==null?e=0:(ft=null,yt=0,e=it)}if(e!==0){if(e===2&&(i=pg(t),i!==0&&(r=i,e=$g(t,i))),e===1)throw n=Eu,_s(t,0),Zr(t,r),Qt(t,Ge()),n;if(e===6)Zr(t,r);else{if(i=t.current.alternate,!(r&30)&&!pO(i)&&(e=hd(t,r),e===2&&(s=pg(t),s!==0&&(r=s,e=$g(t,s))),e===1))throw n=Eu,_s(t,0),Zr(t,r),Qt(t,Ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:ns(t,$t,hr);break;case 3:if(Zr(t,r),(r&130023424)===r&&(e=Lv+500-Ge(),10<e)){if(Kh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Tg(ns.bind(null,t,$t,hr),e);break}ns(t,$t,hr);break;case 4:if(Zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Fn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fO(r/1960))-r,10<r){t.timeoutHandle=Tg(ns.bind(null,t,$t,hr),r);break}ns(t,$t,hr);break;case 5:ns(t,$t,hr);break;default:throw Error($(329))}}}return Qt(t,Ge()),t.callbackNode===n?eR.bind(null,t):null}function $g(t,e){var n=Fl;return t.current.memoizedState.isDehydrated&&(_s(t,e).flags|=256),t=hd(t,e),t!==2&&(e=$t,$t=n,e!==null&&zg(e)),t}function zg(t){$t===null?$t=t:$t.push.apply($t,t)}function pO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zr(t,e){for(e&=~Mv,e&=~pf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fn(e),r=1<<n;t[n]=-1,e&=~r}}function QE(t){if(ye&6)throw Error($(327));$o();var e=Kh(t,0);if(!(e&1))return Qt(t,Ge()),null;var n=hd(t,e);if(t.tag!==0&&n===2){var r=pg(t);r!==0&&(e=r,n=$g(t,r))}if(n===1)throw n=Eu,_s(t,0),Zr(t,e),Qt(t,Ge()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ns(t,$t,hr),Qt(t,Ge()),null}function Fv(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(ra=Ge()+500,cf&&ji())}}function Cs(t){ai!==null&&ai.tag===0&&!(ye&6)&&$o();var e=ye;ye|=1;var n=In.transition,r=Te;try{if(In.transition=null,Te=1,t)return t()}finally{Te=r,In.transition=n,ye=e,!(ye&6)&&ji()}}function Uv(){Zt=Co.current,Ne(Co)}function _s(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,q2(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(_v(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jh();break;case 3:ta(),Ne(Kt),Ne(bt),xv();break;case 5:Rv(r);break;case 4:ta();break;case 13:Ne(Me);break;case 19:Ne(Me);break;case 10:Iv(r.type._context);break;case 22:case 23:Uv()}n=n.return}if(ft=t,Ze=t=yi(t.current,null),yt=Zt=e,it=0,Eu=null,Mv=pf=bs=0,$t=Fl=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ps=null}return t}function tR(t,e){do{var n=Ze;try{if(Tv(),yh.current=ad,od){for(var r=Ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}od=!1}if(xs=0,ht=rt=Ue=null,Ml=!1,vu=0,Ov.current=null,n===null||n.return===null){it=1,Eu=e,Ze=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=ME(o);if(g!==null){g.flags&=-257,LE(g,o,a,s,e),g.mode&1&&OE(s,u,e),e=g,l=u;var T=e.updateQueue;if(T===null){var w=new Set;w.add(l),e.updateQueue=w}else T.add(l);break e}else{if(!(e&1)){OE(s,u,e),jv();break e}l=Error($(426))}}else if(Oe&&a.mode&1){var P=ME(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),LE(P,o,a,s,e),wv(na(l,a));break e}}s=l=na(l,a),it!==4&&(it=2),Fl===null?Fl=[s]:Fl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=FP(s,l,e);bE(s,E);break e;case 1:a=l;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(mi===null||!mi.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=UP(s,a,e);bE(s,C);break e}}s=s.return}while(s!==null)}iR(n)}catch(N){e=N,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(1)}function nR(){var t=ld.current;return ld.current=ad,t===null?ad:t}function jv(){(it===0||it===3||it===2)&&(it=4),ft===null||!(bs&268435455)&&!(pf&268435455)||Zr(ft,yt)}function hd(t,e){var n=ye;ye|=2;var r=nR();(ft!==t||yt!==e)&&(hr=null,_s(t,e));do try{mO();break}catch(i){tR(t,i)}while(1);if(Tv(),ye=n,ld.current=r,Ze!==null)throw Error($(261));return ft=null,yt=0,it}function mO(){for(;Ze!==null;)rR(Ze)}function gO(){for(;Ze!==null&&!BD();)rR(Ze)}function rR(t){var e=oR(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,e===null?iR(t):Ze=e,Ov.current=null}function iR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=uO(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,Ze=null;return}}else if(n=lO(n,e,Zt),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);it===0&&(it=5)}function ns(t,e,n){var r=Te,i=In.transition;try{In.transition=null,Te=1,yO(t,e,n,r)}finally{In.transition=i,Te=r}return null}function yO(t,e,n,r){do $o();while(ai!==null);if(ye&6)throw Error($(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(XD(t,s),t===ft&&(Ze=ft=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wc||(Wc=!0,aR(Gh,function(){return $o(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=In.transition,In.transition=null;var o=Te;Te=1;var a=ye;ye|=4,Ov.current=null,hO(t,n),JP(n,t),L2(wg),Hh=!!_g,wg=_g=null,t.current=n,dO(n),$D(),ye=a,Te=o,In.transition=s}else t.current=n;if(Wc&&(Wc=!1,ai=t,cd=i),s=t.pendingLanes,s===0&&(mi=null),WD(n.stateNode),Qt(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ud)throw ud=!1,t=jg,jg=null,t;return cd&1&&t.tag!==0&&$o(),s=t.pendingLanes,s&1?t===Bg?Ul++:(Ul=0,Bg=t):Ul=0,ji(),null}function $o(){if(ai!==null){var t=FA(cd),e=In.transition,n=Te;try{if(In.transition=null,Te=16>t?16:t,ai===null)var r=!1;else{if(t=ai,ai=null,cd=0,ye&6)throw Error($(331));var i=ye;for(ye|=4,Q=t.current;Q!==null;){var s=Q,o=s.child;if(Q.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Q=u;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:Ll(8,h,s)}var d=h.child;if(d!==null)d.return=h,Q=d;else for(;Q!==null;){h=Q;var f=h.sibling,g=h.return;if(QP(h),h===u){Q=null;break}if(f!==null){f.return=g,Q=f;break}Q=g}}}var T=s.alternate;if(T!==null){var w=T.child;if(w!==null){T.child=null;do{var P=w.sibling;w.sibling=null,w=P}while(w!==null)}}Q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Q=o;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ll(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,Q=E;break e}Q=s.return}}var y=t.current;for(Q=y;Q!==null;){o=Q;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Q=v;else e:for(o=y;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ff(9,a)}}catch(N){$e(a,a.return,N)}if(a===o){Q=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,Q=C;break e}Q=a.return}}if(ye=i,ji(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(sf,t)}catch{}r=!0}return r}finally{Te=n,In.transition=e}}return!1}function YE(t,e,n){e=na(n,e),e=FP(t,e,1),t=pi(t,e,1),e=Mt(),t!==null&&(zu(t,1,e),Qt(t,e))}function $e(t,e,n){if(t.tag===3)YE(t,t,n);else for(;e!==null;){if(e.tag===3){YE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mi===null||!mi.has(r))){t=na(n,t),t=UP(e,t,1),e=pi(e,t,1),t=Mt(),e!==null&&(zu(e,1,t),Qt(e,t));break}}e=e.return}}function vO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mt(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(yt&n)===n&&(it===4||it===3&&(yt&130023424)===yt&&500>Ge()-Lv?_s(t,0):Mv|=n),Qt(t,e)}function sR(t,e){e===0&&(t.mode&1?(e=Oc,Oc<<=1,!(Oc&130023424)&&(Oc=4194304)):e=1);var n=Mt();t=Sr(t,e),t!==null&&(zu(t,e,n),Qt(t,n))}function _O(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sR(t,n)}function wO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),sR(t,n)}var oR;oR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zt=!1,aO(t,e,n);zt=!!(t.flags&131072)}else zt=!1,Oe&&e.flags&1048576&&cP(e,td,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_h(t,e),t=e.pendingProps;var i=Jo(e,bt.current);Bo(e,n),i=Cv(null,e,r,t,i,n);var s=kv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(s=!0,Zh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Av(e),i.updater=df,e.stateNode=i,i._reactInternals=e,bg(e,r,t,n),e=Ng(null,e,r,!0,s,n)):(e.tag=0,Oe&&s&&vv(e),Dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_h(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=TO(r),t=Cn(r,t),i){case 0:e=kg(null,e,r,t,n);break e;case 1:e=jE(null,e,r,t,n);break e;case 11:e=FE(null,e,r,t,n);break e;case 14:e=UE(null,e,r,Cn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),kg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),jE(t,e,r,i,n);case 3:e:{if(zP(e),t===null)throw Error($(387));r=e.pendingProps,s=e.memoizedState,i=s.element,gP(t,e),id(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=na(Error($(423)),e),e=BE(t,e,r,n,i);break e}else if(r!==i){i=na(Error($(424)),e),e=BE(t,e,r,n,i);break e}else for(nn=fi(e.stateNode.containerInfo.firstChild),sn=e,Oe=!0,Dn=null,n=pP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zo(),r===i){e=Ar(t,e,n);break e}Dt(t,e,r,n)}e=e.child}return e;case 5:return yP(e),t===null&&Pg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Eg(r,i)?o=null:s!==null&&Eg(r,s)&&(e.flags|=32),$P(t,e),Dt(t,e,o,n),e.child;case 6:return t===null&&Pg(e),null;case 13:return qP(t,e,n);case 4:return Pv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ea(e,null,r,n):Dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),FE(t,e,r,i,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xe(nd,r._currentValue),r._currentValue=o,s!==null)if(jn(s.value,o)){if(s.children===i.children&&!Kt.current){e=Ar(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=_r(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Rg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bo(e,n),i=Sn(i),r=r(i),e.flags|=1,Dt(t,e,r,n),e.child;case 14:return r=e.type,i=Cn(r,e.pendingProps),i=Cn(r.type,i),UE(t,e,r,i,n);case 15:return jP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Cn(r,i),_h(t,e),e.tag=1,Ht(r)?(t=!0,Zh(e)):t=!1,Bo(e,n),LP(e,r,i),bg(e,r,i,n),Ng(null,e,r,!0,t,n);case 19:return WP(t,e,n);case 22:return BP(t,e,n)}throw Error($(156,e.tag))};function aR(t,e){return DA(t,e)}function EO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,e,n,r){return new EO(t,e,n,r)}function Bv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function TO(t){if(typeof t=="function")return Bv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ov)return 11;if(t===av)return 14}return 2}function yi(t,e){var n=t.alternate;return n===null?(n=Tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Th(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Bv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case wo:return ws(n.children,i,s,e);case sv:o=8,i|=8;break;case Zm:return t=Tn(12,n,e,i|2),t.elementType=Zm,t.lanes=s,t;case eg:return t=Tn(13,n,e,i),t.elementType=eg,t.lanes=s,t;case tg:return t=Tn(19,n,e,i),t.elementType=tg,t.lanes=s,t;case yA:return mf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mA:o=10;break e;case gA:o=9;break e;case ov:o=11;break e;case av:o=14;break e;case Qr:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Tn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ws(t,e,n,r){return t=Tn(7,t,r,e),t.lanes=n,t}function mf(t,e,n,r){return t=Tn(22,t,r,e),t.elementType=yA,t.lanes=n,t.stateNode={isHidden:!1},t}function em(t,e,n){return t=Tn(6,t,null,e),t.lanes=n,t}function tm(t,e,n){return e=Tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Op(0),this.expirationTimes=Op(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Op(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $v(t,e,n,r,i,s,o,a,l){return t=new IO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Tn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Av(s),t}function SO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_o,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lR(t){if(!t)return Ri;t=t._reactInternals;e:{if(Gs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Ht(n))return lP(t,n,e)}return e}function uR(t,e,n,r,i,s,o,a,l){return t=$v(n,r,!0,t,i,s,o,a,l),t.context=lR(null),n=t.current,r=Mt(),i=gi(n),s=_r(r,i),s.callback=e??null,pi(n,s,i),t.current.lanes=i,zu(t,i,r),Qt(t,r),t}function gf(t,e,n,r){var i=e.current,s=Mt(),o=gi(i);return n=lR(n),e.context===null?e.context=n:e.pendingContext=n,e=_r(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pi(i,e,o),t!==null&&(Un(t,i,o,s),gh(t,i,o)),o}function dd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zv(t,e){XE(t,e),(t=t.alternate)&&XE(t,e)}function AO(){return null}var cR=typeof reportError=="function"?reportError:function(t){console.error(t)};function qv(t){this._internalRoot=t}yf.prototype.render=qv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));gf(t,e,null,null)};yf.prototype.unmount=qv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cs(function(){gf(null,t,null,null)}),e[Ir]=null}};function yf(t){this._internalRoot=t}yf.prototype.unstable_scheduleHydration=function(t){if(t){var e=BA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Jr.length&&e!==0&&e<Jr[n].priority;n++);Jr.splice(n,0,t),n===0&&zA(t)}};function Wv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function JE(){}function PO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=dd(o);s.call(u)}}var o=uR(e,r,t,0,null,!1,!1,"",JE);return t._reactRootContainer=o,t[Ir]=o.current,fu(t.nodeType===8?t.parentNode:t),Cs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=dd(l);a.call(u)}}var l=$v(t,0,!1,null,null,!1,!1,"",JE);return t._reactRootContainer=l,t[Ir]=l.current,fu(t.nodeType===8?t.parentNode:t),Cs(function(){gf(e,l,n,r)}),l}function _f(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=dd(o);a.call(l)}}gf(e,o,t,i)}else o=PO(n,e,t,i,r);return dd(o)}UA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wl(e.pendingLanes);n!==0&&(cv(e,n|1),Qt(e,Ge()),!(ye&6)&&(ra=Ge()+500,ji()))}break;case 13:Cs(function(){var r=Sr(t,1);if(r!==null){var i=Mt();Un(r,t,1,i)}}),zv(t,1)}};hv=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var n=Mt();Un(e,t,134217728,n)}zv(t,134217728)}};jA=function(t){if(t.tag===13){var e=gi(t),n=Sr(t,e);if(n!==null){var r=Mt();Un(n,t,e,r)}zv(t,e)}};BA=function(){return Te};$A=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};hg=function(t,e,n){switch(e){case"input":if(ig(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=uf(r);if(!i)throw Error($(90));_A(r),ig(r,i)}}}break;case"textarea":EA(t,n);break;case"select":e=n.value,e!=null&&Lo(t,!!n.multiple,e,!1)}};xA=Fv;bA=Cs;var RO={usingClientEntryPoint:!1,Events:[Wu,So,uf,PA,RA,Fv]},al={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xO={bundleType:al.bundleType,version:al.version,rendererPackageName:al.rendererPackageName,rendererConfig:al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=NA(t),t===null?null:t.stateNode},findFiberByHostInstance:al.findFiberByHostInstance||AO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{sf=Gc.inject(xO),Jn=Gc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RO;fn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wv(e))throw Error($(200));return SO(t,e,null,n)};fn.createRoot=function(t,e){if(!Wv(t))throw Error($(299));var n=!1,r="",i=cR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$v(t,1,!1,null,null,n,!1,r,i),t[Ir]=e.current,fu(t.nodeType===8?t.parentNode:t),new qv(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=NA(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return Cs(t)};fn.hydrate=function(t,e,n){if(!vf(e))throw Error($(200));return _f(null,t,e,!0,n)};fn.hydrateRoot=function(t,e,n){if(!Wv(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=cR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uR(e,null,t,1,n??null,i,!1,s,o),t[Ir]=e.current,fu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new yf(e)};fn.render=function(t,e,n){if(!vf(e))throw Error($(200));return _f(null,t,e,!1,n)};fn.unmountComponentAtNode=function(t){if(!vf(t))throw Error($(40));return t._reactRootContainer?(Cs(function(){_f(null,null,t,!1,function(){t._reactRootContainer=null,t[Ir]=null})}),!0):!1};fn.unstable_batchedUpdates=Fv;fn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vf(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return _f(t,e,n,!1,r)};fn.version="18.3.1-next-f1338f8080-20240426";function hR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hR)}catch(t){console.error(t)}}hR(),hA.exports=fn;var bO=hA.exports,ZE=bO;Xm.createRoot=ZE.createRoot,Xm.hydrateRoot=ZE.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tu(){return Tu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tu.apply(this,arguments)}var li;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(li||(li={}));const eT="popstate";function CO(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return qg("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:dR(i)}return NO(e,n,null,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kO(){return Math.random().toString(36).substr(2,8)}function tT(t,e){return{usr:t.state,key:t.key,idx:e}}function qg(t,e,n,r){return n===void 0&&(n=null),Tu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ra(e):e,{state:n,key:e&&e.key||r||kO()})}function dR(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ra(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function NO(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=li.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(Tu({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=li.Pop;let P=h(),E=P==null?null:P-u;u=P,l&&l({action:a,location:w.location,delta:E})}function f(P,E){a=li.Push;let y=qg(w.location,P,E);n&&n(y,P),u=h()+1;let v=tT(y,u),C=w.createHref(y);try{o.pushState(v,"",C)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(C)}s&&l&&l({action:a,location:w.location,delta:1})}function g(P,E){a=li.Replace;let y=qg(w.location,P,E);n&&n(y,P),u=h();let v=tT(y,u),C=w.createHref(y);o.replaceState(v,"",C),s&&l&&l({action:a,location:w.location,delta:0})}function T(P){let E=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof P=="string"?P:dR(P);return y=y.replace(/ $/,"%20"),tt(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let w={get action(){return a},get location(){return t(i,o)},listen(P){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(eT,d),l=P,()=>{i.removeEventListener(eT,d),l=null}},createHref(P){return e(i,P)},createURL:T,encodeLocation(P){let E=T(P);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:g,go(P){return o.go(P)}};return w}var nT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(nT||(nT={}));function VO(t,e,n){return n===void 0&&(n="/"),DO(t,e,n,!1)}function DO(t,e,n,r){let i=typeof e=="string"?Ra(e):e,s=mR(i.pathname||"/",n);if(s==null)return null;let o=fR(t);OO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=GO(s);a=qO(o[l],u,r)}return a}function fR(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(tt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Es([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(tt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),fR(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:$O(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of pR(s.path))i(s,o,l)}),e}function pR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=pR(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function OO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const MO=/^:[\w-]+$/,LO=3,FO=2,UO=1,jO=10,BO=-2,rT=t=>t==="*";function $O(t,e){let n=t.split("/"),r=n.length;return n.some(rT)&&(r+=BO),e&&(r+=FO),n.filter(i=>!rT(i)).reduce((i,s)=>i+(MO.test(s)?LO:s===""?UO:jO),r)}function zO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function qO(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=iT({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=iT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Es([s,d.pathname]),pathnameBase:XO(Es([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Es([s,d.pathnameBase]))}return o}function iT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=WO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,d)=>{let{paramName:f,isOptional:g}=h;if(f==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const T=a[d];return g&&!T?u[f]=void 0:u[f]=(T||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function WO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Gv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function GO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mR(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const KO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,HO=t=>KO.test(t);function QO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ra(t):t,s;if(n)if(HO(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Gv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=sT(n.substring(1),"/"):s=sT(n,e)}else s=e;return{pathname:s,search:JO(r),hash:ZO(i)}}function sT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function nm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gR(t,e){let n=YO(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function yR(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ra(t):(i=Tu({},t),tt(!i.pathname||!i.pathname.includes("?"),nm("?","pathname","search",i)),tt(!i.pathname||!i.pathname.includes("#"),nm("#","pathname","hash",i)),tt(!i.search||!i.search.includes("#"),nm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=QO(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Es=t=>t.join("/").replace(/\/\/+/g,"/"),XO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ZO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function eM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vR=["post","put","patch","delete"];new Set(vR);const tM=["get",...vR];new Set(tM);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iu(){return Iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Iu.apply(this,arguments)}const Kv=x.createContext(null),nM=x.createContext(null),Ku=x.createContext(null),wf=x.createContext(null),Ks=x.createContext({outlet:null,matches:[],isDataRoute:!1}),_R=x.createContext(null);function Hu(){return x.useContext(wf)!=null}function Hv(){return Hu()||tt(!1),x.useContext(wf).location}function wR(t){x.useContext(Ku).static||x.useLayoutEffect(t)}function Qv(){let{isDataRoute:t}=x.useContext(Ks);return t?mM():rM()}function rM(){Hu()||tt(!1);let t=x.useContext(Kv),{basename:e,future:n,navigator:r}=x.useContext(Ku),{matches:i}=x.useContext(Ks),{pathname:s}=Hv(),o=JSON.stringify(gR(i,n.v7_relativeSplatPath)),a=x.useRef(!1);return wR(()=>{a.current=!0}),x.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=yR(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Es([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function iM(t,e){return sM(t,e)}function sM(t,e,n,r){Hu()||tt(!1);let{navigator:i}=x.useContext(Ku),{matches:s}=x.useContext(Ks),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Hv(),h;if(e){var d;let P=typeof e=="string"?Ra(e):e;l==="/"||(d=P.pathname)!=null&&d.startsWith(l)||tt(!1),h=P}else h=u;let f=h.pathname||"/",g=f;if(l!=="/"){let P=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(P.length).join("/")}let T=VO(t,{pathname:g}),w=cM(T&&T.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:Es([l,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?l:Es([l,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r);return e&&w?x.createElement(wf.Provider,{value:{location:Iu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:li.Pop}},w):w}function oM(){let t=pM(),e=eM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,s)}const aM=x.createElement(oM,null);class lM extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(Ks.Provider,{value:this.props.routeContext},x.createElement(_R.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uM(t){let{routeContext:e,match:n,children:r}=t,i=x.useContext(Kv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Ks.Provider,{value:e},r)}function cM(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||tt(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:g}=n,T=d.route.loader&&f[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||T){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let g,T=!1,w=null,P=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||aM,l&&(u<0&&f===0?(gM("route-fallback",!1),T=!0,P=null):u===f&&(T=!0,P=d.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),y=()=>{let v;return g?v=w:T?v=P:d.route.Component?v=x.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=h,x.createElement(uM,{match:d,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?x.createElement(lM,{location:n.location,revalidation:n.revalidation,component:w,error:g,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var ER=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ER||{}),fd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fd||{});function hM(t){let e=x.useContext(Kv);return e||tt(!1),e}function dM(t){let e=x.useContext(nM);return e||tt(!1),e}function fM(t){let e=x.useContext(Ks);return e||tt(!1),e}function TR(t){let e=fM(),n=e.matches[e.matches.length-1];return n.route.id||tt(!1),n.route.id}function pM(){var t;let e=x.useContext(_R),n=dM(fd.UseRouteError),r=TR(fd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function mM(){let{router:t}=hM(ER.UseNavigateStable),e=TR(fd.UseNavigateStable),n=x.useRef(!1);return wR(()=>{n.current=!0}),x.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Iu({fromRouteId:e},s)))},[t,e])}const oT={};function gM(t,e,n){!e&&!oT[t]&&(oT[t]=!0)}function yM(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function vM(t){let{to:e,replace:n,state:r,relative:i}=t;Hu()||tt(!1);let{future:s,static:o}=x.useContext(Ku),{matches:a}=x.useContext(Ks),{pathname:l}=Hv(),u=Qv(),h=yR(e,gR(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return x.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:i}),[u,d,i,n,r]),null}function Tl(t){tt(!1)}function _M(t){let{basename:e="/",children:n=null,location:r,navigationType:i=li.Pop,navigator:s,static:o=!1,future:a}=t;Hu()&&tt(!1);let l=e.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:l,navigator:s,static:o,future:Iu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Ra(r));let{pathname:h="/",search:d="",hash:f="",state:g=null,key:T="default"}=r,w=x.useMemo(()=>{let P=mR(h,l);return P==null?null:{location:{pathname:P,search:d,hash:f,state:g,key:T},navigationType:i}},[l,h,d,f,g,T,i]);return w==null?null:x.createElement(Ku.Provider,{value:u},x.createElement(wf.Provider,{children:n,value:w}))}function wM(t){let{children:e,location:n}=t;return iM(Wg(e),n)}new Promise(()=>{});function Wg(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let s=[...e,i];if(r.type===x.Fragment){n.push.apply(n,Wg(r.props.children,s));return}r.type!==Tl&&tt(!1),!r.props.index||!r.props.children||tt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wg(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const EM="6";try{window.__reactRouterVersion=EM}catch{}const TM="startTransition",aT=vD[TM];function IM(t){let{basename:e,children:n,future:r,window:i}=t,s=x.useRef();s.current==null&&(s.current=CO({window:i,v5Compat:!0}));let o=s.current,[a,l]=x.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=x.useCallback(d=>{u&&aT?aT(()=>l(d)):l(d)},[l,u]);return x.useLayoutEffect(()=>o.listen(h),[o,h]),x.useEffect(()=>yM(r),[r]),x.createElement(_M,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var lT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lT||(lT={}));var uT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uT||(uT={}));const IR=x.createContext(),SM=({children:t})=>{const[e,n]=x.useState("light"),[r,i]=x.useState("light");x.useEffect(()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),l=u=>{i(u.matches?"dark":"light")};return l(a),a.addEventListener("change",l),()=>{a.removeEventListener("change",l)}},[]);const s=()=>{n(a=>a==="light"?"dark":"light")},o=e==="system"?r:e;return x.useEffect(()=>{const a=document.documentElement;o==="dark"?(a.classList.add("dark"),a.setAttribute("data-theme","dark")):(a.classList.remove("dark"),a.setAttribute("data-theme","light"))},[o]),O.jsx(IR.Provider,{value:{theme:e,systemTheme:r,toggleTheme:s,setTheme:n,resolvedTheme:o},children:t})},vi=()=>{const t=x.useContext(IR);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t},AM=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},PM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},AR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),r.push(n[h],n[d],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(SR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new RM;const f=s<<2|a>>4;if(r.push(f),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const T=u<<6&192|d;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xM=function(t){const e=SR(t);return AR.encodeByteArray(e,!0)},pd=function(t){return xM(t).replace(/\./g,"")},PR=function(t){try{return AR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=()=>RR().__FIREBASE_DEFAULTS__,CM=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&PR(t[1]);return e&&JSON.parse(e)},Ef=()=>{try{return AM()||bM()||CM()||kM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xR=t=>{var e,n;return(n=(e=Ef())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},bR=t=>{const e=xR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},CR=()=>{var t;return(t=Ef())==null?void 0:t.config},kR=t=>{var e;return(e=Ef())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[pd(JSON.stringify(n)),pd(JSON.stringify(o)),a].join(".")}const jl={};function VM(){const t={prod:[],emulator:[]};for(const e of Object.keys(jl))jl[e]?t.emulator.push(e):t.prod.push(e);return t}function DM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let cT=!1;function Xv(t,e){if(typeof window>"u"||typeof document>"u"||!Hs(window.location.host)||jl[t]===e||jl[t]||cT)return;jl[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=VM().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{cT=!0,o()},f}function h(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=DM(r),g=n("text"),T=document.getElementById(g)||document.createElement("span"),w=n("learnmore"),P=document.getElementById(w)||document.createElement("a"),E=n("preprendIcon"),y=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;a(v),h(P,w);const C=u();l(y,E),v.append(y,T,P,C),document.body.appendChild(v)}s?(T.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function VR(){var e;const t=(e=Ef())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jv(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FM(){const t=ot();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DR(){return!VR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OR(){return!VR()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Qu(){try{return typeof indexedDB=="object"}catch{return!1}}function Tf(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function Zv(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="FirebaseError";class Rn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=UM,Object.setPrototypeOf(this,Rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bi.prototype.create)}}class Bi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?jM(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Rn(i,a,r)}}function jM(t,e){return t.replace(BM,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const BM=/\{\$([^}]+)}/g;function $M(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(hT(s)&&hT(o)){if(!xi(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Il(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Sl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function zM(t,e){const n=new qM(t,e);return n.subscribe.bind(n)}class qM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=rm),i.error===void 0&&(i.error=rm),i.complete===void 0&&(i.complete=rm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=1e3,KM=2,HM=4*60*60*1e3,QM=.5;function dT(t,e=GM,n=KM){const r=e*Math.pow(n,t),i=Math.round(QM*r*(Math.random()-.5)*2);return Math.min(HM,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t){return t&&t._delegate?t._delegate:t}class cn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new NM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JM(e))try{this.getOrInitializeService({instanceIdentifier:rs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=rs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rs){return this.instances.has(e)}getOptions(e=rs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rs){return this.component?this.component.multipleInstances?e:rs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XM(t){return t===rs?void 0:t}function JM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(he||(he={}));const eL={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},tL=he.INFO,nL={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},rL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=nL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yu{constructor(e){this.name=e,this._logLevel=tL,this._logHandler=rL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const iL=(t,e)=>e.some(n=>t instanceof n);let fT,pT;function sL(){return fT||(fT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oL(){return pT||(pT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MR=new WeakMap,Gg=new WeakMap,LR=new WeakMap,im=new WeakMap,e0=new WeakMap;function aL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_i(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&MR.set(n,t)}).catch(()=>{}),e0.set(e,t),e}function lL(t){if(Gg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Gg.set(t,e)}let Kg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _i(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uL(t){Kg=t(Kg)}function cL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sm(this),e,...n);return LR.set(r,e.sort?e.sort():[e]),_i(r)}:oL().includes(t)?function(...e){return t.apply(sm(this),e),_i(MR.get(this))}:function(...e){return _i(t.apply(sm(this),e))}}function hL(t){return typeof t=="function"?cL(t):(t instanceof IDBTransaction&&lL(t),iL(t,sL())?new Proxy(t,Kg):t)}function _i(t){if(t instanceof IDBRequest)return aL(t);if(im.has(t))return im.get(t);const e=hL(t);return e!==t&&(im.set(t,e),e0.set(e,t)),e}const sm=t=>e0.get(t);function FR(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=_i(o);return r&&o.addEventListener("upgradeneeded",l=>{r(_i(o.result),l.oldVersion,l.newVersion,_i(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const dL=["get","getKey","getAll","getAllKeys","count"],fL=["put","add","delete","clear"],om=new Map;function mT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(om.get(e))return om.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=fL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dL.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return om.set(e,s),s}uL(t=>({...t,get:(e,n,r)=>mT(e,n)||t.get(e,n,r),has:(e,n)=>!!mT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mL(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hg="@firebase/app",gT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Yu("@firebase/app"),gL="@firebase/app-compat",yL="@firebase/analytics-compat",vL="@firebase/analytics",_L="@firebase/app-check-compat",wL="@firebase/app-check",EL="@firebase/auth",TL="@firebase/auth-compat",IL="@firebase/database",SL="@firebase/data-connect",AL="@firebase/database-compat",PL="@firebase/functions",RL="@firebase/functions-compat",xL="@firebase/installations",bL="@firebase/installations-compat",CL="@firebase/messaging",kL="@firebase/messaging-compat",NL="@firebase/performance",VL="@firebase/performance-compat",DL="@firebase/remote-config",OL="@firebase/remote-config-compat",ML="@firebase/storage",LL="@firebase/storage-compat",FL="@firebase/firestore",UL="@firebase/ai",jL="@firebase/firestore-compat",BL="firebase",$L="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="[DEFAULT]",zL={[Hg]:"fire-core",[gL]:"fire-core-compat",[vL]:"fire-analytics",[yL]:"fire-analytics-compat",[wL]:"fire-app-check",[_L]:"fire-app-check-compat",[EL]:"fire-auth",[TL]:"fire-auth-compat",[IL]:"fire-rtdb",[SL]:"fire-data-connect",[AL]:"fire-rtdb-compat",[PL]:"fire-fn",[RL]:"fire-fn-compat",[xL]:"fire-iid",[bL]:"fire-iid-compat",[CL]:"fire-fcm",[kL]:"fire-fcm-compat",[NL]:"fire-perf",[VL]:"fire-perf-compat",[DL]:"fire-rc",[OL]:"fire-rc-compat",[ML]:"fire-gcs",[LL]:"fire-gcs-compat",[FL]:"fire-fst",[jL]:"fire-fst-compat",[UL]:"fire-vertex","fire-js":"fire-js",[BL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Map,qL=new Map,Yg=new Map;function yT(t,e){try{t.container.addComponent(e)}catch(n){Pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pn(t){const e=t.name;if(Yg.has(e))return Pr.debug(`There were multiple attempts to register component ${e}.`),!1;Yg.set(e,t);for(const n of md.values())yT(n,t);for(const n of qL.values())yT(n,t);return!0}function Nr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wi=new Bi("app","Firebase",WL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=$L;function UR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Qg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw wi.create("bad-app-name",{appName:String(i)});if(n||(n=CR()),!n)throw wi.create("no-options");const s=md.get(i);if(s){if(xi(n,s.options)&&xi(r,s.config))return s;throw wi.create("duplicate-app",{appName:i})}const o=new ZM(i);for(const l of Yg.values())o.addComponent(l);const a=new GL(n,r,o);return md.set(i,a),a}function Xu(t=Qg){const e=md.get(t);if(!e&&t===Qg&&CR())return UR();if(!e)throw wi.create("no-app",{appName:t});return e}function Rt(t,e,n){let r=zL[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pr.warn(o.join(" "));return}Pn(new cn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL="firebase-heartbeat-database",HL=1,Su="firebase-heartbeat-store";let am=null;function jR(){return am||(am=FR(KL,HL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Su)}catch(n){console.warn(n)}}}}).catch(t=>{throw wi.create("idb-open",{originalErrorMessage:t.message})})),am}async function QL(t){try{const n=(await jR()).transaction(Su),r=await n.objectStore(Su).get(BR(t));return await n.done,r}catch(e){if(e instanceof Rn)Pr.warn(e.message);else{const n=wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pr.warn(n.message)}}}async function vT(t,e){try{const r=(await jR()).transaction(Su,"readwrite");await r.objectStore(Su).put(e,BR(t)),await r.done}catch(n){if(n instanceof Rn)Pr.warn(n.message);else{const r=wi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Pr.warn(r.message)}}}function BR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=1024,XL=30;class JL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_T();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>XL){const o=tF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Pr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_T(),{heartbeatsToSend:r,unsentEntries:i}=ZL(this._heartbeatsCache.heartbeats),s=pd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Pr.warn(n),""}}}function _T(){return new Date().toISOString().substring(0,10)}function ZL(t,e=YL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),wT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qu()?Tf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function wT(t){return pd(JSON.stringify({version:2,heartbeats:t})).length}function tF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(t){Pn(new cn("platform-logger",e=>new pL(e),"PRIVATE")),Pn(new cn("heartbeat",e=>new JL(e),"PRIVATE")),Rt(Hg,gT,t),Rt(Hg,gT,"esm2020"),Rt("fire-js","")}nF("");function $R(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rF=$R,zR=new Bi("auth","Firebase",$R());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Yu("@firebase/auth");function iF(t,...e){gd.logLevel<=he.WARN&&gd.warn(`Auth (${Qs}): ${t}`,...e)}function Ih(t,...e){gd.logLevel<=he.ERROR&&gd.error(`Auth (${Qs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw t0(t,...e)}function on(t,...e){return t0(t,...e)}function qR(t,e,n){const r={...rF(),[e]:n};return new Bi("auth","Firebase",r).create(e,{appName:t.name})}function wr(t){return qR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function t0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zR.create(t,...e)}function Z(t,e,...n){if(!t)throw t0(e,...n)}function mr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ih(e),new Error(e)}function Rr(t,e){t||mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function WR(){return ET()==="http:"||ET()==="https:"}function ET(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WR()||Jv()||"connection"in navigator)?navigator.onLine:!0}function oF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rr(n>e,"Short delay should be less than long delay!"),this.isMobile=OM()||LM()}get(){return sF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t,e){Rr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uF=new Ju(3e4,6e4);function Vr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function xn(t,e,n,r,i={}){return KR(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=xa({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return MM()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Hs(t.emulatorConfig.host)&&(u.credentials="include"),GR.fetch()(await HR(t,t.config.apiHost,n,a),u)})}async function KR(t,e,n){t._canInitEmulator=!1;const r={...aF,...e};try{const i=new hF(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Kc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Kc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Kc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw qR(t,h,u);Bn(t,h)}}catch(i){if(i instanceof Rn)throw i;Bn(t,"network-request-failed",{message:String(i)})}}async function Zu(t,e,n,r,i={}){const s=await xn(t,e,n,r,i);return"mfaPendingCredential"in s&&Bn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function HR(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?n0(t.config,i):`${t.config.apiScheme}://${i}`;return lF.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function cF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(on(this.auth,"network-request-failed")),uF.get())})}}function Kc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=on(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){return t!==void 0&&t.getResponse!==void 0}function IT(t){return t!==void 0&&t.enterprise!==void 0}class dF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(t){return(await xn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function pF(t,e){return xn(t,"GET","/v2/recaptchaConfig",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mF(t,e){return xn(t,"POST","/v1/accounts:delete",e)}async function yd(t,e){return xn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gF(t,e=!1){const n=Re(t),r=await n.getIdToken(e),i=r0(r);Z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Bl(lm(i.auth_time)),issuedAtTime:Bl(lm(i.iat)),expirationTime:Bl(lm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function lm(t){return Number(t)*1e3}function r0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ih("JWT malformed, contained fewer than 3 sections"),null;try{const i=PR(n);return i?JSON.parse(i):(Ih("Failed to decode base64 JWT payload"),null)}catch(i){return Ih("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ST(t){const e=r0(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ks(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rn&&yF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function yF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bl(this.lastLoginAt),this.creationTime=Bl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(t){var d;const e=t.auth,n=await t.getIdToken(),r=await ks(t,yd(e,{idToken:n}));Z(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?QR(i.providerUserInfo):[],o=wF(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Jg(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function _F(t){const e=Re(t);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function QR(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EF(t,e){const n=await KR(t,{},async()=>{const r=xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await HR(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Hs(t.emulatorConfig.host)&&(l.credentials="include"),GR.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TF(t,e){return xn(t,"POST","/v2/accounts:revokeToken",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ST(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=ST(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await EF(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new zo;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new vF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Jg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ks(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gF(this,e)}reload(){return _F(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(wr(this.auth));const e=await this.getIdToken();return await ks(this,mF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:g,providerData:T,stsTokenManager:w}=n;Z(d&&w,e,"internal-error");const P=zo.fromJSON(this.name,w);Z(typeof d=="string",e,"internal-error"),qr(r,e.name),qr(i,e.name),Z(typeof f=="boolean",e,"internal-error"),Z(typeof g=="boolean",e,"internal-error"),qr(s,e.name),qr(o,e.name),qr(a,e.name),qr(l,e.name),qr(u,e.name),qr(h,e.name);const E=new Mn({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:P,createdAt:u,lastLoginAt:h});return T&&Array.isArray(T)&&(E.providerData=T.map(y=>({...y}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new zo;i.updateFromServerResponse(n);const s=new Mn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Z(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?QR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new zo;a.updateFromIdToken(r);const l=new Mn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Jg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new Map;function gr(t){Rr(t instanceof Function,"Expected a class definition");let e=AT.get(t);return e?(Rr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}YR.type="NONE";const PT=YR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t,e,n){return`firebase:${t}:${e}:${n}`}class qo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Sh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Sh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await yd(this.auth,{idToken:e}).catch(()=>{});return n?Mn._fromGetAccountInfoResponse(this.auth,n,e):null}return Mn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new qo(gr(PT),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||gr(PT);const o=Sh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const f=await yd(e,{idToken:h}).catch(()=>{});if(!f)break;d=await Mn._fromGetAccountInfoResponse(e,f,h)}else d=Mn._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new qo(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new qo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ex(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nx(e))return"Blackberry";if(rx(e))return"Webos";if(JR(e))return"Safari";if((e.includes("chrome/")||ZR(e))&&!e.includes("edge/"))return"Chrome";if(tx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XR(t=ot()){return/firefox\//i.test(t)}function JR(t=ot()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZR(t=ot()){return/crios\//i.test(t)}function ex(t=ot()){return/iemobile/i.test(t)}function tx(t=ot()){return/android/i.test(t)}function nx(t=ot()){return/blackberry/i.test(t)}function rx(t=ot()){return/webos/i.test(t)}function i0(t=ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IF(t=ot()){var e;return i0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function SF(){return FM()&&document.documentMode===10}function ix(t=ot()){return i0(t)||tx(t)||rx(t)||nx(t)||/windows phone/i.test(t)||ex(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(t,e=[]){let n;switch(t){case"Browser":n=RT(ot());break;case"Worker":n=`${RT(ot())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PF(t,e={}){return xn(t,"GET","/v2/passwordPolicy",Vr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=6;class xF{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??RF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xT(this),this.idTokenSubscription=new xT(this),this.beforeStateQueue=new AF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yd(this,{idToken:e}),r=await Mn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(tn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(wr(this));const n=e?Re(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PF(this),n=new xF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&iF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Dr(t){return Re(t)}class xT{constructor(e){this.auth=e,this.observer=null,this.addObserver=zM(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CF(t){ec=t}function s0(t){return ec.loadJS(t)}function kF(){return ec.recaptchaV2Script}function NF(){return ec.recaptchaEnterpriseScript}function VF(){return ec.gapiScript}function ox(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=500,OF=6e4,Hc=1e12;class MF{constructor(e){this.auth=e,this.counter=Hc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new UF(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||Hc;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||Hc;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||Hc;return(r=this._widgets.get(n))==null||r.execute(),""}}class LF{constructor(){this.enterprise=new FF}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FF{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class UF{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;Z(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=jF(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},OF)},DF))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function jF(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const BF="recaptcha-enterprise",ax="NO_RECAPTCHA";class $F{constructor(e){this.type=BF,this.auth=Dr(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{pF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new dF(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;IT(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(ax)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LF().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&IT(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=NF();l.length!==0&&(l+=a),s0(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function ll(t,e,n,r=!1,i=!1){const s=new $F(t);let o;if(i)o=ax;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function _d(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ll(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ll(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await ll(t,e,n);return r(t,a).catch(async l=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await ll(t,e,n,!1,!0);return r(t,h)}return Promise.reject(l)})}else{const a=await ll(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t,e){const n=Nr(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(xi(s,e??{}))return i;Bn(i,"already-initialized")}return n.initialize({options:e})}function qF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lx(t,e,n){const r=Dr(t);Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=ux(e),{host:o,port:a}=WF(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Z(xi(u,r.config.emulator)&&xi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Hs(o)?(Yv(`${s}//${o}${l}`),Xv("Auth",!0)):i||GF()}function ux(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WF(t){const e=ux(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:bT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:bT(o)}}}function bT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mr("not implemented")}_getIdTokenResponse(e){return mr("not implemented")}_linkToIdToken(e,n){return mr("not implemented")}_getReauthenticationResolver(e){return mr("not implemented")}}async function KF(t,e){return xn(t,"POST","/v1/accounts:update",e)}async function HF(t,e){return xn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QF(t,e){return Zu(t,"POST","/v1/accounts:signInWithPassword",Vr(t,e))}async function YF(t,e){return xn(t,"POST","/v1/accounts:sendOobCode",Vr(t,e))}async function XF(t,e){return YF(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JF(t,e){return Zu(t,"POST","/v1/accounts:signInWithEmailLink",Vr(t,e))}async function ZF(t,e){return Zu(t,"POST","/v1/accounts:signInWithEmailLink",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends o0{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Au(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Au(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,n,"signInWithPassword",QF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return JF(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,r,"signUpPassword",HF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ZF(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(t,e){return Zu(t,"POST","/v1/accounts:signInWithIdp",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="http://localhost";class Ns extends o0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Ns(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Wo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Wo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wo(e,n)}buildRequest(){const e={requestUri:e4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function n4(t){const e=Il(Sl(t)).link,n=e?Il(Sl(e)).deep_link_id:null,r=Il(Sl(t)).deep_link_id;return(r?Il(Sl(r)).link:null)||r||n||e||t}class a0{constructor(e){const n=Il(Sl(e)),r=n.apiKey??null,i=n.oobCode??null,s=t4(n.mode??null);Z(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=n4(e);try{return new a0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){this.providerId=bi.PROVIDER_ID}static credential(e,n){return Au._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=a0.parseLink(n);return Z(r,"argument-error"),Au._fromEmailAndCode(e,r.code,r.tenantId)}}bi.PROVIDER_ID="password";bi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends cx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends tc{constructor(){super("facebook.com")}static credential(e){return Ns._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends tc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ns._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ti.credential(n,r)}catch{return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends tc{constructor(){super("github.com")}static credential(e){return Ns._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.GITHUB_SIGN_IN_METHOD="github.com";ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends tc{constructor(){super("twitter.com")}static credential(e,n){return Ns._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ri.credential(n,r)}catch{return null}}}ri.TWITTER_SIGN_IN_METHOD="twitter.com";ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(t,e){return Zu(t,"POST","/v1/accounts:signUp",Vr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Mn._fromIdTokenResponse(e,r,i),o=CT(r);return new Vs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=CT(r);return new Vs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function CT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd extends Rn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,wd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new wd(e,n,r,i)}}function hx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wd._fromErrorAndOperation(t,s,e,r):s})}async function i4(t,e,n=!1){const r=await ks(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dx(t,e,n=!1){const{auth:r}=t;if(tn(r.app))return Promise.reject(wr(r));const i="reauthenticate";try{const s=await ks(t,hx(r,i,e,t),n);Z(s.idToken,r,"internal-error");const o=r0(s.idToken);Z(o,r,"internal-error");const{sub:a}=o;return Z(t.uid===a,r,"user-mismatch"),Vs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Bn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fx(t,e,n=!1){if(tn(t.app))return Promise.reject(wr(t));const r="signIn",i=await hx(t,r,e),s=await Vs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function s4(t,e){return fx(Dr(t),e)}async function kT(t,e){return dx(Re(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t,e,n){var r;Z(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),Z(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Z(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Z(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Z(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(t){const e=Dr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function a4(t,e,n){const r=Dr(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&o4(r,i,n),await _d(r,i,"getOobCode",XF,"EMAIL_PASSWORD_PROVIDER")}async function l4(t,e,n){if(tn(t.app))return Promise.reject(wr(t));const r=Dr(t),o=await _d(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",r4,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&px(t),l}),a=await Vs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function u4(t,e,n){return tn(t.app)?Promise.reject(wr(t)):s4(Re(t),bi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&px(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c4(t,e){return xn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Re(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ks(r,c4(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function h4(t,e){return d4(Re(t),null,e)}async function d4(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await ks(t,KF(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t,e){return Re(t).setPersistence(e)}function p4(t,e,n,r){return Re(t).onIdTokenChanged(e,n,r)}function m4(t,e,n){return Re(t).beforeAuthStateChanged(e,n)}function g4(t,e,n,r){return Re(t).onAuthStateChanged(e,n,r)}function y4(t){return Re(t).signOut()}const Ed="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ed,"1"),this.storage.removeItem(Ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=1e3,_4=10;class gx extends mx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ix(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);SF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},v4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gx.type="LOCAL";const yx=gx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx extends mx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vx.type="SESSION";const _x=vx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new If(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await w4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}If.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=l0("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(){return window}function T4(t){Je().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(){return typeof Je().WorkerGlobalScope<"u"&&typeof Je().importScripts=="function"}async function I4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function S4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function A4(){return u0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="firebaseLocalStorageDb",P4=1,Td="firebaseLocalStorage",Ex="fbase_key";class nc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sf(t,e){return t.transaction([Td],e?"readwrite":"readonly").objectStore(Td)}function R4(){const t=indexedDB.deleteDatabase(wx);return new nc(t).toPromise()}function Zg(){const t=indexedDB.open(wx,P4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Td,{keyPath:Ex})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Td)?e(r):(r.close(),await R4(),e(await Zg()))})})}async function VT(t,e,n){const r=Sf(t,!0).put({[Ex]:e,value:n});return new nc(r).toPromise()}async function x4(t,e){const n=Sf(t,!1).get(e),r=await new nc(n).toPromise();return r===void 0?null:r.value}function DT(t,e){const n=Sf(t,!0).delete(e);return new nc(n).toPromise()}const b4=800,C4=3;class Tx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>C4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return u0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=If._getInstance(A4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await I4(),!this.activeServiceWorker)return;this.sender=new E4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||S4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zg();return await VT(e,Ed,"1"),await DT(e,Ed),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>VT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>x4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>DT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Sf(i,!1).getAll();return new nc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),b4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Tx.type="LOCAL";const k4=Tx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um=ox("rcb"),N4=new Ju(3e4,6e4);class V4{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Je().grecaptcha)!=null&&e.render)}load(e,n=""){return Z(D4(n),e,"argument-error"),this.shouldResolveImmediately(n)&&TT(Je().grecaptcha)?Promise.resolve(Je().grecaptcha):new Promise((r,i)=>{const s=Je().setTimeout(()=>{i(on(e,"network-request-failed"))},N4.get());Je()[um]=()=>{Je().clearTimeout(s),delete Je()[um];const a=Je().grecaptcha;if(!a||!TT(a)){i(on(e,"internal-error"));return}const l=a.render;a.render=(u,h)=>{const d=l(u,h);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${kF()}?${xa({onload:um,render:"explicit",hl:n})}`;s0(o).catch(()=>{clearTimeout(s),i(on(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Je().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function D4(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class O4{async load(e){return new MF(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4="recaptcha",L4={theme:"light",type:"image"};class F4{constructor(e,n,r={...L4}){this.parameters=r,this.type=M4,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dr(e),this.isInvisible=this.parameters.size==="invisible",Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;Z(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new O4:new V4,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Z(!this.parameters.sitekey,this.auth,"argument-error"),Z(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Z(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Je()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Z(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Z(WR()&&!u0(),this.auth,"internal-error"),await U4(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await fF(this.auth);Z(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Z(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function U4(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t,e){return e?gr(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0 extends o0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function B4(t){return fx(t.auth,new c0(t),t.bypassAuthState)}function $4(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),dx(n,new c0(t),t.bypassAuthState)}async function z4(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),i4(n,new c0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B4;case"linkViaPopup":case"linkViaRedirect":return z4;case"reauthViaPopup":case"reauthViaRedirect":return $4;default:Bn(this.auth,"internal-error")}}resolve(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=new Ju(2e3,1e4);class ko extends Ix{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){Rr(this.filter.length===1,"Popup operations only handle one event");const e=l0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,q4.get())};e()}}ko.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="pendingRedirect",Ah=new Map;class G4 extends Ix{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ah.get(this.auth._key());if(!e){try{const r=await K4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ah.set(this.auth._key(),e)}return this.bypassAuthState||Ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function K4(t,e){const n=Y4(e),r=Q4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function H4(t,e){Ah.set(t._key(),e)}function Q4(t){return gr(t._redirectPersistence)}function Y4(t){return Sh(W4,t.config.apiKey,t.name)}async function X4(t,e,n=!1){if(tn(t.app))return Promise.reject(wr(t));const r=Dr(t),i=j4(r,e),o=await new G4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=10*60*1e3;class Z4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Sx(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(on(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J4&&this.cachedEventUids.clear(),this.cachedEventUids.has(OT(e))}saveEventToCache(e){this.cachedEventUids.add(OT(e)),this.lastProcessedEventTime=Date.now()}}function OT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Sx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tU(t,e={}){return xn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rU=/^https?/;async function iU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tU(t);for(const n of e)try{if(sU(n))return}catch{}Bn(t,"unauthorized-domain")}function sU(t){const e=Xg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!rU.test(n))return!1;if(nU.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=new Ju(3e4,6e4);function MT(){const t=Je().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aU(t){return new Promise((e,n)=>{var i,s,o;function r(){MT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MT(),n(on(t,"network-request-failed"))},timeout:oU.get()})}if((s=(i=Je().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Je().gapi)!=null&&o.load)r();else{const a=ox("iframefcb");return Je()[a]=()=>{gapi.load?r():n(on(t,"network-request-failed"))},s0(`${VF()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ph=null,e})}let Ph=null;function lU(t){return Ph=Ph||aU(t),Ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=new Ju(5e3,15e3),cU="__/auth/iframe",hU="emulator/auth/iframe",dU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pU(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?n0(e,hU):`https://${t.config.authDomain}/${cU}`,r={apiKey:e.apiKey,appName:t.name,v:Qs},i=fU.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xa(r).slice(1)}`}async function mU(t){const e=await lU(t),n=Je().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:pU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=on(t,"network-request-failed"),a=Je().setTimeout(()=>{s(o)},uU.get());function l(){Je().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yU=500,vU=600,_U="_blank",wU="http://localhost";class LT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EU(t,e,n,r=yU,i=vU){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...gU,width:r.toString(),height:i.toString(),top:s,left:o},u=ot().toLowerCase();n&&(a=ZR(u)?_U:n),XR(u)&&(e=e||wU,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[g,T])=>`${f}${g}=${T},`,"");if(IF(u)&&a!=="_self")return TU(e||"",a),new LT(null);const d=window.open(e||"",a,h);Z(d,t,"popup-blocked");try{d.focus()}catch{}return new LT(d)}function TU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU="__/auth/handler",SU="emulator/auth/handler",AU=encodeURIComponent("fac");async function FT(t,e,n,r,i,s){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qs,eventId:i};if(e instanceof cx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$M(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))o[h]=d}if(e instanceof tc){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${AU}=${encodeURIComponent(l)}`:"";return`${PU(t)}?${xa(a).slice(1)}${u}`}function PU({config:t}){return t.emulator?n0(t,SU):`https://${t.authDomain}/${IU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="webStorageSupport";class RU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_x,this._completeRedirectFn=X4,this._overrideRedirectResult=H4}async _openPopup(e,n,r,i){var o;Rr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await FT(e,n,r,Xg(),i);return EU(e,s,l0())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await FT(e,n,r,Xg(),i);return T4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Rr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mU(e),r=new Z4(e);return n.register("authEvent",i=>(Z(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cm,{type:cm},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[cm];s!==void 0&&n(!!s),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ix()||JR()||i0()}}const xU=RU;var UT="@firebase/auth",jT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kU(t){Pn(new cn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sx(t)},u=new bF(r,i,s,l);return qF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pn(new cn("auth-internal",e=>{const n=Dr(e.getProvider("auth").getImmediate());return(r=>new bU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rt(UT,jT,CU(t)),Rt(UT,jT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU=5*60,VU=kR("authIdTokenMaxAge")||NU;let BT=null;const DU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>VU)return;const i=n==null?void 0:n.token;BT!==i&&(BT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function OU(t=Xu()){const e=Nr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zF(t,{popupRedirectResolver:xU,persistence:[k4,yx,_x]}),r=kR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=DU(s.toString());m4(n,o,()=>o(n.currentUser)),p4(n,a=>o(a))}}const i=xR("auth");return i&&lx(n,`http://${i}`),n}function MU(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}CF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=on("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",MU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kU("Browser");var $T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ei,Ax;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function A(){}A.prototype=_.prototype,S.F=_.prototype,S.prototype=new A,S.prototype.constructor=S,S.D=function(b,k,D){for(var R=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)R[oe-2]=arguments[oe];return _.prototype[k].apply(b,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,_,A){A||(A=0);const b=Array(16);if(typeof _=="string")for(var k=0;k<16;++k)b[k]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(k=0;k<16;++k)b[k]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=S.g[0],A=S.g[1],k=S.g[2];let D=S.g[3],R;R=_+(D^A&(k^D))+b[0]+3614090360&4294967295,_=A+(R<<7&4294967295|R>>>25),R=D+(k^_&(A^k))+b[1]+3905402710&4294967295,D=_+(R<<12&4294967295|R>>>20),R=k+(A^D&(_^A))+b[2]+606105819&4294967295,k=D+(R<<17&4294967295|R>>>15),R=A+(_^k&(D^_))+b[3]+3250441966&4294967295,A=k+(R<<22&4294967295|R>>>10),R=_+(D^A&(k^D))+b[4]+4118548399&4294967295,_=A+(R<<7&4294967295|R>>>25),R=D+(k^_&(A^k))+b[5]+1200080426&4294967295,D=_+(R<<12&4294967295|R>>>20),R=k+(A^D&(_^A))+b[6]+2821735955&4294967295,k=D+(R<<17&4294967295|R>>>15),R=A+(_^k&(D^_))+b[7]+4249261313&4294967295,A=k+(R<<22&4294967295|R>>>10),R=_+(D^A&(k^D))+b[8]+1770035416&4294967295,_=A+(R<<7&4294967295|R>>>25),R=D+(k^_&(A^k))+b[9]+2336552879&4294967295,D=_+(R<<12&4294967295|R>>>20),R=k+(A^D&(_^A))+b[10]+4294925233&4294967295,k=D+(R<<17&4294967295|R>>>15),R=A+(_^k&(D^_))+b[11]+2304563134&4294967295,A=k+(R<<22&4294967295|R>>>10),R=_+(D^A&(k^D))+b[12]+1804603682&4294967295,_=A+(R<<7&4294967295|R>>>25),R=D+(k^_&(A^k))+b[13]+4254626195&4294967295,D=_+(R<<12&4294967295|R>>>20),R=k+(A^D&(_^A))+b[14]+2792965006&4294967295,k=D+(R<<17&4294967295|R>>>15),R=A+(_^k&(D^_))+b[15]+1236535329&4294967295,A=k+(R<<22&4294967295|R>>>10),R=_+(k^D&(A^k))+b[1]+4129170786&4294967295,_=A+(R<<5&4294967295|R>>>27),R=D+(A^k&(_^A))+b[6]+3225465664&4294967295,D=_+(R<<9&4294967295|R>>>23),R=k+(_^A&(D^_))+b[11]+643717713&4294967295,k=D+(R<<14&4294967295|R>>>18),R=A+(D^_&(k^D))+b[0]+3921069994&4294967295,A=k+(R<<20&4294967295|R>>>12),R=_+(k^D&(A^k))+b[5]+3593408605&4294967295,_=A+(R<<5&4294967295|R>>>27),R=D+(A^k&(_^A))+b[10]+38016083&4294967295,D=_+(R<<9&4294967295|R>>>23),R=k+(_^A&(D^_))+b[15]+3634488961&4294967295,k=D+(R<<14&4294967295|R>>>18),R=A+(D^_&(k^D))+b[4]+3889429448&4294967295,A=k+(R<<20&4294967295|R>>>12),R=_+(k^D&(A^k))+b[9]+568446438&4294967295,_=A+(R<<5&4294967295|R>>>27),R=D+(A^k&(_^A))+b[14]+3275163606&4294967295,D=_+(R<<9&4294967295|R>>>23),R=k+(_^A&(D^_))+b[3]+4107603335&4294967295,k=D+(R<<14&4294967295|R>>>18),R=A+(D^_&(k^D))+b[8]+1163531501&4294967295,A=k+(R<<20&4294967295|R>>>12),R=_+(k^D&(A^k))+b[13]+2850285829&4294967295,_=A+(R<<5&4294967295|R>>>27),R=D+(A^k&(_^A))+b[2]+4243563512&4294967295,D=_+(R<<9&4294967295|R>>>23),R=k+(_^A&(D^_))+b[7]+1735328473&4294967295,k=D+(R<<14&4294967295|R>>>18),R=A+(D^_&(k^D))+b[12]+2368359562&4294967295,A=k+(R<<20&4294967295|R>>>12),R=_+(A^k^D)+b[5]+4294588738&4294967295,_=A+(R<<4&4294967295|R>>>28),R=D+(_^A^k)+b[8]+2272392833&4294967295,D=_+(R<<11&4294967295|R>>>21),R=k+(D^_^A)+b[11]+1839030562&4294967295,k=D+(R<<16&4294967295|R>>>16),R=A+(k^D^_)+b[14]+4259657740&4294967295,A=k+(R<<23&4294967295|R>>>9),R=_+(A^k^D)+b[1]+2763975236&4294967295,_=A+(R<<4&4294967295|R>>>28),R=D+(_^A^k)+b[4]+1272893353&4294967295,D=_+(R<<11&4294967295|R>>>21),R=k+(D^_^A)+b[7]+4139469664&4294967295,k=D+(R<<16&4294967295|R>>>16),R=A+(k^D^_)+b[10]+3200236656&4294967295,A=k+(R<<23&4294967295|R>>>9),R=_+(A^k^D)+b[13]+681279174&4294967295,_=A+(R<<4&4294967295|R>>>28),R=D+(_^A^k)+b[0]+3936430074&4294967295,D=_+(R<<11&4294967295|R>>>21),R=k+(D^_^A)+b[3]+3572445317&4294967295,k=D+(R<<16&4294967295|R>>>16),R=A+(k^D^_)+b[6]+76029189&4294967295,A=k+(R<<23&4294967295|R>>>9),R=_+(A^k^D)+b[9]+3654602809&4294967295,_=A+(R<<4&4294967295|R>>>28),R=D+(_^A^k)+b[12]+3873151461&4294967295,D=_+(R<<11&4294967295|R>>>21),R=k+(D^_^A)+b[15]+530742520&4294967295,k=D+(R<<16&4294967295|R>>>16),R=A+(k^D^_)+b[2]+3299628645&4294967295,A=k+(R<<23&4294967295|R>>>9),R=_+(k^(A|~D))+b[0]+4096336452&4294967295,_=A+(R<<6&4294967295|R>>>26),R=D+(A^(_|~k))+b[7]+1126891415&4294967295,D=_+(R<<10&4294967295|R>>>22),R=k+(_^(D|~A))+b[14]+2878612391&4294967295,k=D+(R<<15&4294967295|R>>>17),R=A+(D^(k|~_))+b[5]+4237533241&4294967295,A=k+(R<<21&4294967295|R>>>11),R=_+(k^(A|~D))+b[12]+1700485571&4294967295,_=A+(R<<6&4294967295|R>>>26),R=D+(A^(_|~k))+b[3]+2399980690&4294967295,D=_+(R<<10&4294967295|R>>>22),R=k+(_^(D|~A))+b[10]+4293915773&4294967295,k=D+(R<<15&4294967295|R>>>17),R=A+(D^(k|~_))+b[1]+2240044497&4294967295,A=k+(R<<21&4294967295|R>>>11),R=_+(k^(A|~D))+b[8]+1873313359&4294967295,_=A+(R<<6&4294967295|R>>>26),R=D+(A^(_|~k))+b[15]+4264355552&4294967295,D=_+(R<<10&4294967295|R>>>22),R=k+(_^(D|~A))+b[6]+2734768916&4294967295,k=D+(R<<15&4294967295|R>>>17),R=A+(D^(k|~_))+b[13]+1309151649&4294967295,A=k+(R<<21&4294967295|R>>>11),R=_+(k^(A|~D))+b[4]+4149444226&4294967295,_=A+(R<<6&4294967295|R>>>26),R=D+(A^(_|~k))+b[11]+3174756917&4294967295,D=_+(R<<10&4294967295|R>>>22),R=k+(_^(D|~A))+b[2]+718787259&4294967295,k=D+(R<<15&4294967295|R>>>17),R=A+(D^(k|~_))+b[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.v=function(S,_){_===void 0&&(_=S.length);const A=_-this.blockSize,b=this.C;let k=this.h,D=0;for(;D<_;){if(k==0)for(;D<=A;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<_;)if(b[k++]=S.charCodeAt(D++),k==this.blockSize){i(this,b),k=0;break}}else for(;D<_;)if(b[k++]=S[D++],k==this.blockSize){i(this,b),k=0;break}}this.h=k,this.o+=_},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;_=this.o*8;for(var A=S.length-8;A<S.length;++A)S[A]=_&255,_/=256;for(this.v(S),S=Array(16),_=0,A=0;A<4;++A)for(let b=0;b<32;b+=8)S[_++]=this.g[A]>>>b&255;return S};function s(S,_){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=_(S)}function o(S,_){this.h=_;const A=[];let b=!0;for(let k=S.length-1;k>=0;k--){const D=S[k]|0;b&&D==_||(A[k]=D,b=!1)}this.g=A}var a={};function l(S){return-128<=S&&S<128?s(S,function(_){return new o([_|0],_<0?-1:0)}):new o([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(S<0)return P(u(-S));const _=[];let A=1;for(let b=0;S>=A;b++)_[b]=S/A|0,A*=4294967296;return new o(_,0)}function h(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return P(h(S.substring(1),_));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=u(Math.pow(_,8));let b=d;for(let D=0;D<S.length;D+=8){var k=Math.min(8,S.length-D);const R=parseInt(S.substring(D,D+k),_);k<8?(k=u(Math.pow(_,k)),b=b.j(k).add(u(R))):(b=b.j(A),b=b.add(u(R)))}return b}var d=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-P(this).m();let S=0,_=1;for(let A=0;A<this.g.length;A++){const b=this.i(A);S+=(b>=0?b:4294967296+b)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(w(this))return"-"+P(this).toString(S);const _=u(Math.pow(S,6));var A=this;let b="";for(;;){const k=C(A,_).g;A=E(A,k.j(_));let D=((A.g.length>0?A.g[0]:A.h)>>>0).toString(S);if(A=k,T(A))return D+b;for(;D.length<6;)D="0"+D;b=D+b}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(let _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function w(S){return S.h==-1}t.l=function(S){return S=E(this,S),w(S)?-1:T(S)?0:1};function P(S){const _=S.g.length,A=[];for(let b=0;b<_;b++)A[b]=~S.g[b];return new o(A,~S.h).add(f)}t.abs=function(){return w(this)?P(this):this},t.add=function(S){const _=Math.max(this.g.length,S.g.length),A=[];let b=0;for(let k=0;k<=_;k++){let D=b+(this.i(k)&65535)+(S.i(k)&65535),R=(D>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);b=R>>>16,D&=65535,R&=65535,A[k]=R<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(S,_){return S.add(P(_))}t.j=function(S){if(T(this)||T(S))return d;if(w(this))return w(S)?P(this).j(P(S)):P(P(this).j(S));if(w(S))return P(this.j(P(S)));if(this.l(g)<0&&S.l(g)<0)return u(this.m()*S.m());const _=this.g.length+S.g.length,A=[];for(var b=0;b<2*_;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(let k=0;k<S.g.length;k++){const D=this.i(b)>>>16,R=this.i(b)&65535,oe=S.i(k)>>>16,_e=S.i(k)&65535;A[2*b+2*k]+=R*_e,y(A,2*b+2*k),A[2*b+2*k+1]+=D*_e,y(A,2*b+2*k+1),A[2*b+2*k+1]+=R*oe,y(A,2*b+2*k+1),A[2*b+2*k+2]+=D*oe,y(A,2*b+2*k+2)}for(S=0;S<_;S++)A[S]=A[2*S+1]<<16|A[2*S];for(S=_;S<2*_;S++)A[S]=0;return new o(A,0)};function y(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function v(S,_){this.g=S,this.h=_}function C(S,_){if(T(_))throw Error("division by zero");if(T(S))return new v(d,d);if(w(S))return _=C(P(S),_),new v(P(_.g),P(_.h));if(w(_))return _=C(S,P(_)),new v(P(_.g),_.h);if(S.g.length>30){if(w(S)||w(_))throw Error("slowDivide_ only works with positive integers.");for(var A=f,b=_;b.l(S)<=0;)A=N(A),b=N(b);var k=V(A,1),D=V(b,1);for(b=V(b,2),A=V(A,2);!T(b);){var R=D.add(b);R.l(S)<=0&&(k=k.add(A),D=R),b=V(b,1),A=V(A,1)}return _=E(S,k.j(_)),new v(k,_)}for(k=d;S.l(_)>=0;){for(A=Math.max(1,Math.floor(S.m()/_.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),D=u(A),R=D.j(_);w(R)||R.l(S)>0;)A-=b,D=u(A),R=D.j(_);T(D)&&(D=f),k=k.add(D),S=E(S,R)}return new v(k,S)}t.B=function(S){return C(this,S).h},t.and=function(S){const _=Math.max(this.g.length,S.g.length),A=[];for(let b=0;b<_;b++)A[b]=this.i(b)&S.i(b);return new o(A,this.h&S.h)},t.or=function(S){const _=Math.max(this.g.length,S.g.length),A=[];for(let b=0;b<_;b++)A[b]=this.i(b)|S.i(b);return new o(A,this.h|S.h)},t.xor=function(S){const _=Math.max(this.g.length,S.g.length),A=[];for(let b=0;b<_;b++)A[b]=this.i(b)^S.i(b);return new o(A,this.h^S.h)};function N(S){const _=S.g.length+1,A=[];for(let b=0;b<_;b++)A[b]=S.i(b)<<1|S.i(b-1)>>>31;return new o(A,S.h)}function V(S,_){const A=_>>5;_%=32;const b=S.g.length-A,k=[];for(let D=0;D<b;D++)k[D]=_>0?S.i(D+A)>>>_|S.i(D+A+1)<<32-_:S.i(D+A);return new o(k,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ax=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ei=o}).apply(typeof $T<"u"?$T:typeof self<"u"?self:typeof window<"u"?window:{});var Qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Px,Al,Rx,Rh,ey,xx,bx,Cx;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qc=="object"&&Qc];for(var p=0;p<c.length;++p){var m=c[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(c,p){if(p)e:{var m=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var L=c[I];if(!(L in m))break e;m=m[L]}c=c[c.length-1],I=m[c],p=p(I),p!=I&&p!=null&&e(m,c,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(p){var m=[],I;for(I in p)Object.prototype.hasOwnProperty.call(p,I)&&m.push([I,p[I]]);return m}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function l(c,p,m){return c.call.apply(c.bind,arguments)}function u(c,p,m){return u=l,u.apply(null,arguments)}function h(c,p){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function d(c,p){function m(){}m.prototype=p.prototype,c.Z=p.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(I,L,F){for(var K=Array(arguments.length-2),le=2;le<arguments.length;le++)K[le-2]=arguments[le];return p.prototype[L].apply(I,K)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const p=c.length;if(p>0){const m=Array(p);for(let I=0;I<p;I++)m[I]=c[I];return m}return[]}function T(c,p){for(let I=1;I<arguments.length;I++){const L=arguments[I];var m=typeof L;if(m=m!="object"?m:L?Array.isArray(L)?"array":m:"null",m=="array"||m=="object"&&typeof L.length=="number"){m=c.length||0;const F=L.length||0;c.length=m+F;for(let K=0;K<F;K++)c[m+K]=L[K]}else c.push(L)}}class w{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function P(c){o.setTimeout(()=>{throw c},0)}function E(){var c=S;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class y{constructor(){this.h=this.g=null}add(p,m){const I=v.get();I.set(p,m),this.h?this.h.next=I:this.g=I,this.h=I}}var v=new w(()=>new C,c=>c.reset());class C{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let N,V=!1,S=new y,_=()=>{const c=Promise.resolve(void 0);N=()=>{c.then(A)}};function A(){for(var c;c=E();){try{c.h.call(c.g)}catch(m){P(m)}var p=v;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}V=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};o.addEventListener("test",m,p),o.removeEventListener("test",m,p)}catch{}return c}();function R(c){return/^[\s\xa0]*$/.test(c)}function oe(c,p){k.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}d(oe,k),oe.prototype.init=function(c,p){const m=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(m=="mouseover"?p=c.fromElement:m=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&oe.Z.h.call(this)},oe.prototype.h=function(){oe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),ue=0;function ge(c,p,m,I,L){this.listener=c,this.proxy=null,this.src=p,this.type=m,this.capture=!!I,this.ha=L,this.key=++ue,this.da=this.fa=!1}function q(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function X(c,p,m){for(const I in c)p.call(m,c[I],I,c)}function J(c,p){for(const m in c)p.call(void 0,c[m],m,c)}function ee(c){const p={};for(const m in c)p[m]=c[m];return p}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bt(c,p){let m,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(m in I)c[m]=I[m];for(let F=0;F<pe.length;F++)m=pe[F],Object.prototype.hasOwnProperty.call(I,m)&&(c[m]=I[m])}}function B(c){this.src=c,this.g={},this.h=0}B.prototype.add=function(c,p,m,I,L){const F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);const K=z(c,p,I,L);return K>-1?(p=c[K],m||(p.fa=!1)):(p=new ge(p,this.src,F,!!I,L),p.fa=m,c.push(p)),p};function G(c,p){const m=p.type;if(m in c.g){var I=c.g[m],L=Array.prototype.indexOf.call(I,p,void 0),F;(F=L>=0)&&Array.prototype.splice.call(I,L,1),F&&(q(p),c.g[m].length==0&&(delete c.g[m],c.h--))}}function z(c,p,m,I){for(let L=0;L<c.length;++L){const F=c[L];if(!F.da&&F.listener==p&&F.capture==!!m&&F.ha==I)return L}return-1}var re="closure_lm_"+(Math.random()*1e6|0),Se={};function $n(c,p,m,I,L){if(I&&I.once)return lp(c,p,m,I,L);if(Array.isArray(p)){for(let F=0;F<p.length;F++)$n(c,p[F],m,I,L);return null}return m=dp(m),c&&c[_e]?c.J(p,m,a(I)?!!I.capture:!!I,L):Yt(c,p,m,!1,I,L)}function Yt(c,p,m,I,L,F){if(!p)throw Error("Invalid event type");const K=a(L)?!!L.capture:!!L;let le=cp(c);if(le||(c[re]=le=new B(c)),m=le.add(p,m,I,K,F),m.proxy)return m;if(I=cr(),m.proxy=I,I.src=c,I.listener=m,c.addEventListener)D||(L=K),L===void 0&&(L=!1),c.addEventListener(p.toString(),I,L);else if(c.attachEvent)c.attachEvent(Y_(p.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function cr(){function c(m){return p.call(c.src,c.listener,m)}const p=bV;return c}function lp(c,p,m,I,L){if(Array.isArray(p)){for(let F=0;F<p.length;F++)lp(c,p[F],m,I,L);return null}return m=dp(m),c&&c[_e]?c.K(p,m,a(I)?!!I.capture:!!I,L):Yt(c,p,m,!0,I,L)}function Q_(c,p,m,I,L){if(Array.isArray(p))for(var F=0;F<p.length;F++)Q_(c,p[F],m,I,L);else I=a(I)?!!I.capture:!!I,m=dp(m),c&&c[_e]?(c=c.i,F=String(p).toString(),F in c.g&&(p=c.g[F],m=z(p,m,I,L),m>-1&&(q(p[m]),Array.prototype.splice.call(p,m,1),p.length==0&&(delete c.g[F],c.h--)))):c&&(c=cp(c))&&(p=c.g[p.toString()],c=-1,p&&(c=z(p,m,I,L)),(m=c>-1?p[c]:null)&&up(m))}function up(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[_e])G(p.i,c);else{var m=c.type,I=c.proxy;p.removeEventListener?p.removeEventListener(m,I,c.capture):p.detachEvent?p.detachEvent(Y_(m),I):p.addListener&&p.removeListener&&p.removeListener(I),(m=cp(p))?(G(m,c),m.h==0&&(m.src=null,p[re]=null)):q(c)}}}function Y_(c){return c in Se?Se[c]:Se[c]="on"+c}function bV(c,p){if(c.da)c=!0;else{p=new oe(p,this);const m=c.listener,I=c.ha||c.src;c.fa&&up(c),c=m.call(I,p)}return c}function cp(c){return c=c[re],c instanceof B?c:null}var hp="__closure_events_fn_"+(Math.random()*1e9>>>0);function dp(c){return typeof c=="function"?c:(c[hp]||(c[hp]=function(p){return c.handleEvent(p)}),c[hp])}function _t(){b.call(this),this.i=new B(this),this.M=this,this.G=null}d(_t,b),_t.prototype[_e]=!0,_t.prototype.removeEventListener=function(c,p,m,I){Q_(this,c,p,m,I)};function kt(c,p){var m,I=c.G;if(I)for(m=[];I;I=I.G)m.push(I);if(c=c.M,I=p.type||p,typeof p=="string")p=new k(p,c);else if(p instanceof k)p.target=p.target||c;else{var L=p;p=new k(I,c),Bt(p,L)}L=!0;let F,K;if(m)for(K=m.length-1;K>=0;K--)F=p.g=m[K],L=vc(F,I,!0,p)&&L;if(F=p.g=c,L=vc(F,I,!0,p)&&L,L=vc(F,I,!1,p)&&L,m)for(K=0;K<m.length;K++)F=p.g=m[K],L=vc(F,I,!1,p)&&L}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const m=c.g[p];for(let I=0;I<m.length;I++)q(m[I]);delete c.g[p],c.h--}}this.G=null},_t.prototype.J=function(c,p,m,I){return this.i.add(String(c),p,!1,m,I)},_t.prototype.K=function(c,p,m,I){return this.i.add(String(c),p,!0,m,I)};function vc(c,p,m,I){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let L=!0;for(let F=0;F<p.length;++F){const K=p[F];if(K&&!K.da&&K.capture==m){const le=K.listener,nt=K.ha||K.src;K.fa&&G(c.i,K),L=le.call(nt,I)!==!1&&L}}return L&&!I.defaultPrevented}function CV(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(c,p||0)}function X_(c){c.g=CV(()=>{c.g=null,c.i&&(c.i=!1,X_(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class kV extends b{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:X_(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fa(c){b.call(this),this.h=c,this.g={}}d(Fa,b);var J_=[];function Z_(c){X(c.g,function(p,m){this.g.hasOwnProperty(m)&&up(p)},c),c.g={}}Fa.prototype.N=function(){Fa.Z.N.call(this),Z_(this)},Fa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fp=o.JSON.stringify,NV=o.JSON.parse,VV=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function ew(){}function tw(){}var Ua={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pp(){k.call(this,"d")}d(pp,k);function mp(){k.call(this,"c")}d(mp,k);var Ki={},nw=null;function _c(){return nw=nw||new _t}Ki.Ia="serverreachability";function rw(c){k.call(this,Ki.Ia,c)}d(rw,k);function ja(c){const p=_c();kt(p,new rw(p))}Ki.STAT_EVENT="statevent";function iw(c,p){k.call(this,Ki.STAT_EVENT,c),this.stat=p}d(iw,k);function Nt(c){const p=_c();kt(p,new iw(p,c))}Ki.Ja="timingevent";function sw(c,p){k.call(this,Ki.Ja,c),this.size=p}d(sw,k);function Ba(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},p)}function $a(){this.g=!0}$a.prototype.ua=function(){this.g=!1};function DV(c,p,m,I,L,F){c.info(function(){if(c.g)if(F){var K="",le=F.split("&");for(let Ae=0;Ae<le.length;Ae++){var nt=le[Ae].split("=");if(nt.length>1){const lt=nt[0];nt=nt[1];const qn=lt.split("_");K=qn.length>=2&&qn[1]=="type"?K+(lt+"="+nt+"&"):K+(lt+"=redacted&")}}}else K=null;else K=F;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+p+`
`+m+`
`+K})}function OV(c,p,m,I,L,F,K){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+p+`
`+m+`
`+F+" "+K})}function Zs(c,p,m,I){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+LV(c,m)+(I?" "+I:"")})}function MV(c,p){c.info(function(){return"TIMEOUT: "+p})}$a.prototype.info=function(){};function LV(c,p){if(!c.g)return p;if(!p)return null;try{const F=JSON.parse(p);if(F){for(c=0;c<F.length;c++)if(Array.isArray(F[c])){var m=F[c];if(!(m.length<2)){var I=m[1];if(Array.isArray(I)&&!(I.length<1)){var L=I[0];if(L!="noop"&&L!="stop"&&L!="close")for(let K=1;K<I.length;K++)I[K]=""}}}}return fp(F)}catch{return p}}var wc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ow={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},aw;function gp(){}d(gp,ew),gp.prototype.g=function(){return new XMLHttpRequest},aw=new gp;function za(c){return encodeURIComponent(String(c))}function FV(c){var p=1;c=c.split(":");const m=[];for(;p>0&&c.length;)m.push(c.shift()),p--;return c.length&&m.push(c.join(":")),m}function Lr(c,p,m,I){this.j=c,this.i=p,this.l=m,this.S=I||1,this.V=new Fa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new lw}function lw(){this.i=null,this.g="",this.h=!1}var uw={},yp={};function vp(c,p,m){c.M=1,c.A=Tc(zn(p)),c.u=m,c.R=!0,cw(c,null)}function cw(c,p){c.F=Date.now(),Ec(c),c.B=zn(c.A);var m=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),Iw(m.i,"t",I),c.C=0,m=c.j.L,c.h=new lw,c.g=Bw(c.j,m?p:null,!c.u),c.P>0&&(c.O=new kV(u(c.Y,c,c.g),c.P)),p=c.V,m=c.g,I=c.ba;var L="readystatechange";Array.isArray(L)||(L&&(J_[0]=L.toString()),L=J_);for(let F=0;F<L.length;F++){const K=$n(m,L[F],I||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=c.J?ee(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),ja(),DV(c.i,c.v,c.B,c.l,c.S,c.u)}Lr.prototype.ba=function(c){c=c.target;const p=this.O;p&&jr(c)==3?p.j():this.Y(c)},Lr.prototype.Y=function(c){try{if(c==this.g)e:{const le=jr(this.g),nt=this.g.ya(),Ae=this.g.ca();if(!(le<3)&&(le!=3||this.g&&(this.h.h||this.g.la()||Cw(this.g)))){this.K||le!=4||nt==7||(nt==8||Ae<=0?ja(3):ja(2)),_p(this);var p=this.g.ca();this.X=p;var m=UV(this);if(this.o=p==200,OV(this.i,this.v,this.B,this.l,this.S,le,p),this.o){if(this.U&&!this.L){t:{if(this.g){var I,L=this.g;if((I=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(I)){var F=I;break t}}F=null}if(c=F)Zs(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wp(this,c);else{this.o=!1,this.m=3,Nt(12),Hi(this),qa(this);break e}}if(this.R){c=!0;let lt;for(;!this.K&&this.C<m.length;)if(lt=jV(this,m),lt==yp){le==4&&(this.m=4,Nt(14),c=!1),Zs(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==uw){this.m=4,Nt(15),Zs(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else Zs(this.i,this.l,lt,null),wp(this,lt);if(hw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||m.length!=0||this.h.h||(this.m=1,Nt(16),c=!1),this.o=this.o&&c,!c)Zs(this.i,this.l,m,"[Invalid Chunked Response]"),Hi(this),qa(this);else if(m.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),xp(K),K.P=!0,Nt(11))}}else Zs(this.i,this.l,m,null),wp(this,m);le==4&&Hi(this),this.o&&!this.K&&(le==4?Lw(this.j,this):(this.o=!1,Ec(this)))}else eD(this.g),p==400&&m.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),Hi(this),qa(this)}}}catch{}finally{}};function UV(c){if(!hw(c))return c.g.la();const p=Cw(c.g);if(p==="")return"";let m="";const I=p.length,L=jr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Hi(c),qa(c),"";c.h.i=new o.TextDecoder}for(let F=0;F<I;F++)c.h.h=!0,m+=c.h.i.decode(p[F],{stream:!(L&&F==I-1)});return p.length=0,c.h.g+=m,c.C=0,c.h.g}function hw(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function jV(c,p){var m=c.C,I=p.indexOf(`
`,m);return I==-1?yp:(m=Number(p.substring(m,I)),isNaN(m)?uw:(I+=1,I+m>p.length?yp:(p=p.slice(I,I+m),c.C=I+m,p)))}Lr.prototype.cancel=function(){this.K=!0,Hi(this)};function Ec(c){c.T=Date.now()+c.H,dw(c,c.H)}function dw(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ba(u(c.aa,c),p)}function _p(c){c.D&&(o.clearTimeout(c.D),c.D=null)}Lr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(MV(this.i,this.B),this.M!=2&&(ja(),Nt(17)),Hi(this),this.m=2,qa(this)):dw(this,this.T-c)};function qa(c){c.j.I==0||c.K||Lw(c.j,c)}function Hi(c){_p(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,Z_(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function wp(c,p){try{var m=c.j;if(m.I!=0&&(m.g==c||Ep(m.h,c))){if(!c.L&&Ep(m.h,c)&&m.I==3){try{var I=m.Ba.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)Rc(m),Ac(m);else break e;Rp(m),Nt(18)}}else m.xa=L[1],0<m.xa-m.K&&L[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=Ba(u(m.Va,m),6e3));mw(m.h)<=1&&m.ta&&(m.ta=void 0)}else Yi(m,11)}else if((c.L||m.g==c)&&Rc(m),!R(p))for(L=m.Ba.g.parse(p),p=0;p<L.length;p++){let Ae=L[p];const lt=Ae[0];if(!(lt<=m.K))if(m.K=lt,Ae=Ae[1],m.I==2)if(Ae[0]=="c"){m.M=Ae[1],m.ba=Ae[2];const qn=Ae[3];qn!=null&&(m.ka=qn,m.j.info("VER="+m.ka));const Xi=Ae[4];Xi!=null&&(m.za=Xi,m.j.info("SVER="+m.za));const Br=Ae[5];Br!=null&&typeof Br=="number"&&Br>0&&(I=1.5*Br,m.O=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const $r=c.g;if($r){const bc=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bc){var F=I.h;F.g||bc.indexOf("spdy")==-1&&bc.indexOf("quic")==-1&&bc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Tp(F,F.h),F.h=null))}if(I.G){const bp=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;bp&&(I.wa=bp,Ce(I.J,I.G,bp))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),I=m;var K=c;if(I.na=jw(I,I.L?I.ba:null,I.W),K.L){gw(I.h,K);var le=K,nt=I.O;nt&&(le.H=nt),le.D&&(_p(le),Ec(le)),I.g=K}else Ow(I);m.i.length>0&&Pc(m)}else Ae[0]!="stop"&&Ae[0]!="close"||Yi(m,7);else m.I==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?Yi(m,7):Pp(m):Ae[0]!="noop"&&m.l&&m.l.qa(Ae),m.A=0)}}ja(4)}catch{}}var BV=class{constructor(c,p){this.g=c,this.map=p}};function fw(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function pw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function mw(c){return c.h?1:c.g?c.g.size:0}function Ep(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Tp(c,p){c.g?c.g.add(p):c.h=p}function gw(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}fw.prototype.cancel=function(){if(this.i=yw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function yw(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const m of c.g.values())p=p.concat(m.G);return p}return g(c.i)}var vw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $V(c,p){if(c){c=c.split("&");for(let m=0;m<c.length;m++){const I=c[m].indexOf("=");let L,F=null;I>=0?(L=c[m].substring(0,I),F=c[m].substring(I+1)):L=c[m],p(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Fr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof Fr?(this.l=c.l,Wa(this,c.j),this.o=c.o,this.g=c.g,Ga(this,c.u),this.h=c.h,Ip(this,Sw(c.i)),this.m=c.m):c&&(p=String(c).match(vw))?(this.l=!1,Wa(this,p[1]||"",!0),this.o=Ka(p[2]||""),this.g=Ka(p[3]||"",!0),Ga(this,p[4]),this.h=Ka(p[5]||"",!0),Ip(this,p[6]||"",!0),this.m=Ka(p[7]||"")):(this.l=!1,this.i=new Qa(null,this.l))}Fr.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(Ha(p,_w,!0),":");var m=this.g;return(m||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Ha(p,_w,!0),"@"),c.push(za(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(Ha(m,m.charAt(0)=="/"?WV:qV,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",Ha(m,KV)),c.join("")},Fr.prototype.resolve=function(c){const p=zn(this);let m=!!c.j;m?Wa(p,c.j):m=!!c.o,m?p.o=c.o:m=!!c.g,m?p.g=c.g:m=c.u!=null;var I=c.h;if(m)Ga(p,c.u);else if(m=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var L=p.h.lastIndexOf("/");L!=-1&&(I=p.h.slice(0,L+1)+I)}if(L=I,L==".."||L==".")I="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){I=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let K=0;K<L.length;){const le=L[K++];le=="."?I&&K==L.length&&F.push(""):le==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),I&&K==L.length&&F.push("")):(F.push(le),I=!0)}I=F.join("/")}else I=L}return m?p.h=I:m=c.i.toString()!=="",m?Ip(p,Sw(c.i)):m=!!c.m,m&&(p.m=c.m),p};function zn(c){return new Fr(c)}function Wa(c,p,m){c.j=m?Ka(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Ga(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function Ip(c,p,m){p instanceof Qa?(c.i=p,HV(c.i,c.l)):(m||(p=Ha(p,GV)),c.i=new Qa(p,c.l))}function Ce(c,p,m){c.i.set(p,m)}function Tc(c){return Ce(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ka(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ha(c,p,m){return typeof c=="string"?(c=encodeURI(c).replace(p,zV),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function zV(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var _w=/[#\/\?@]/g,qV=/[#\?:]/g,WV=/[#\?]/g,GV=/[#\?@]/g,KV=/#/g;function Qa(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Qi(c){c.g||(c.g=new Map,c.h=0,c.i&&$V(c.i,function(p,m){c.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}t=Qa.prototype,t.add=function(c,p){Qi(this),this.i=null,c=eo(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(p),this.h+=1,this};function ww(c,p){Qi(c),p=eo(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Ew(c,p){return Qi(c),p=eo(c,p),c.g.has(p)}t.forEach=function(c,p){Qi(this),this.g.forEach(function(m,I){m.forEach(function(L){c.call(p,L,I,this)},this)},this)};function Tw(c,p){Qi(c);let m=[];if(typeof p=="string")Ew(c,p)&&(m=m.concat(c.g.get(eo(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)m=m.concat(c[p]);return m}t.set=function(c,p){return Qi(this),this.i=null,c=eo(this,c),Ew(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=Tw(this,c),c.length>0?String(c[0]):p):p};function Iw(c,p,m){ww(c,p),m.length>0&&(c.i=null,c.g.set(eo(c,p),g(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let I=0;I<p.length;I++){var m=p[I];const L=za(m);m=Tw(this,m);for(let F=0;F<m.length;F++){let K=L;m[F]!==""&&(K+="="+za(m[F])),c.push(K)}}return this.i=c.join("&")};function Sw(c){const p=new Qa;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function eo(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function HV(c,p){p&&!c.j&&(Qi(c),c.i=null,c.g.forEach(function(m,I){const L=I.toLowerCase();I!=L&&(ww(this,I),Iw(this,L,m))},c)),c.j=p}function QV(c,p){const m=new $a;if(o.Image){const I=new Image;I.onload=h(Ur,m,"TestLoadImage: loaded",!0,p,I),I.onerror=h(Ur,m,"TestLoadImage: error",!1,p,I),I.onabort=h(Ur,m,"TestLoadImage: abort",!1,p,I),I.ontimeout=h(Ur,m,"TestLoadImage: timeout",!1,p,I),o.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else p(!1)}function YV(c,p){const m=new $a,I=new AbortController,L=setTimeout(()=>{I.abort(),Ur(m,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:I.signal}).then(F=>{clearTimeout(L),F.ok?Ur(m,"TestPingServer: ok",!0,p):Ur(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Ur(m,"TestPingServer: error",!1,p)})}function Ur(c,p,m,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(m)}catch{}}function XV(){this.g=new VV}function Sp(c){this.i=c.Sb||null,this.h=c.ab||!1}d(Sp,ew),Sp.prototype.g=function(){return new Ic(this.i,this.h)};function Ic(c,p){_t.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Ic,_t),t=Ic.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,Xa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ya(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xa(this)),this.g&&(this.readyState=3,Xa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Aw(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Aw(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Ya(this):Xa(this),this.readyState==3&&Aw(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Ya(this))},t.Na=function(c){this.g&&(this.response=c,Ya(this))},t.ga=function(){this.g&&Ya(this)};function Ya(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Xa(c)}t.setRequestHeader=function(c,p){this.A.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=p.next();return c.join(`\r
`)};function Xa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ic.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Pw(c){let p="";return X(c,function(m,I){p+=I,p+=":",p+=m,p+=`\r
`}),p}function Ap(c,p,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=Pw(m),typeof c=="string"?m!=null&&za(m):Ce(c,p,m))}function Be(c){_t.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Be,_t);var JV=/^https?$/i,ZV=["POST","PUT"];t=Be.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,p,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():aw.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(F){Rw(this,F);return}if(c=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)m.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const F of I.keys())m.set(F,I.get(F));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(F=>F.toLowerCase()=="content-type"),L=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(ZV,p,void 0)>=0)||I||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,K]of m)this.g.setRequestHeader(F,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(F){Rw(this,F)}};function Rw(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,xw(c),Sc(c)}function xw(c){c.A||(c.A=!0,kt(c,"complete"),kt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,kt(this,"complete"),kt(this,"abort"),Sc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sc(this,!0)),Be.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?bw(this):this.Xa())},t.Xa=function(){bw(this)};function bw(c){if(c.h&&typeof s<"u"){if(c.v&&jr(c)==4)setTimeout(c.Ca.bind(c),0);else if(kt(c,"readystatechange"),jr(c)==4){c.h=!1;try{const F=c.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var I;if(I=F===0){let K=String(c.D).match(vw)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),I=!JV.test(K?K.toLowerCase():"")}m=I}if(m)kt(c,"complete"),kt(c,"success");else{c.o=6;try{var L=jr(c)>2?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.ca()+"]",xw(c)}}finally{Sc(c)}}}}function Sc(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const m=c.g;c.g=null,p||kt(c,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function jr(c){return c.g?c.g.readyState:0}t.ca=function(){try{return jr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),NV(p)}};function Cw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function eD(c){const p={};c=(c.g&&jr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(R(c[I]))continue;var m=FV(c[I]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const F=p[L]||[];p[L]=F,F.push(m)}J(p,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ja(c,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||p}function kw(c){this.za=0,this.i=[],this.j=new $a,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ja("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ja("baseRetryDelayMs",5e3,c),this.Za=Ja("retryDelaySeedMs",1e4,c),this.Ta=Ja("forwardChannelMaxRetries",2,c),this.va=Ja("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new fw(c&&c.concurrentRequestLimit),this.Ba=new XV,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=kw.prototype,t.ka=8,t.I=1,t.connect=function(c,p,m,I){Nt(0),this.W=c,this.H=p||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.J=jw(this,null,this.W),Pc(this)};function Pp(c){if(Nw(c),c.I==3){var p=c.V++,m=zn(c.J);if(Ce(m,"SID",c.M),Ce(m,"RID",p),Ce(m,"TYPE","terminate"),Za(c,m),p=new Lr(c,c.j,p),p.M=2,p.A=Tc(zn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=p.A,m=!0),m||(p.g=Bw(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ec(p)}Uw(c)}function Ac(c){c.g&&(xp(c),c.g.cancel(),c.g=null)}function Nw(c){Ac(c),c.v&&(o.clearTimeout(c.v),c.v=null),Rc(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Pc(c){if(!pw(c.h)&&!c.m){c.m=!0;var p=c.Ea;N||_(),V||(N(),V=!0),S.add(p,c),c.D=0}}function tD(c,p){return mw(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ba(u(c.Ea,c,p),Fw(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const L=new Lr(this,this.j,c);let F=this.o;if(this.U&&(F?(F=ee(F),Bt(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,p>4096){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=Dw(this,L,p),m=zn(this.J),Ce(m,"RID",c),Ce(m,"CVER",22),this.G&&Ce(m,"X-HTTP-Session-Id",this.G),Za(this,m),F&&(this.R?p="headers="+za(Pw(F))+"&"+p:this.u&&Ap(m,this.u,F)),Tp(this.h,L),this.Ra&&Ce(m,"TYPE","init"),this.S?(Ce(m,"$req",p),Ce(m,"SID","null"),L.U=!0,vp(L,m,null)):vp(L,m,p),this.I=2}}else this.I==3&&(c?Vw(this,c):this.i.length==0||pw(this.h)||Vw(this))};function Vw(c,p){var m;p?m=p.l:m=c.V++;const I=zn(c.J);Ce(I,"SID",c.M),Ce(I,"RID",m),Ce(I,"AID",c.K),Za(c,I),c.u&&c.o&&Ap(I,c.u,c.o),m=new Lr(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),p&&(c.i=p.G.concat(c.i)),p=Dw(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Tp(c.h,m),vp(m,I,p)}function Za(c,p){c.H&&X(c.H,function(m,I){Ce(p,I,m)}),c.l&&X({},function(m,I){Ce(p,I,m)})}function Dw(c,p,m){m=Math.min(c.i.length,m);const I=c.l?u(c.l.Ka,c.l,c):null;e:{var L=c.i;let le=-1;for(;;){const nt=["count="+m];le==-1?m>0?(le=L[0].g,nt.push("ofs="+le)):le=0:nt.push("ofs="+le);let Ae=!0;for(let lt=0;lt<m;lt++){var F=L[lt].g;const qn=L[lt].map;if(F-=le,F<0)le=Math.max(0,L[lt].g-100),Ae=!1;else try{F="req"+F+"_"||"";try{var K=qn instanceof Map?qn:Object.entries(qn);for(const[Xi,Br]of K){let $r=Br;a(Br)&&($r=fp(Br)),nt.push(F+Xi+"="+encodeURIComponent($r))}}catch(Xi){throw nt.push(F+"type="+encodeURIComponent("_badmap")),Xi}}catch{I&&I(qn)}}if(Ae){K=nt.join("&");break e}}K=void 0}return c=c.i.splice(0,m),p.G=c,K}function Ow(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;N||_(),V||(N(),V=!0),S.add(p,c),c.A=0}}function Rp(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ba(u(c.Da,c),Fw(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Mw(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ba(u(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),Ac(this),Mw(this))};function xp(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function Mw(c){c.g=new Lr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=zn(c.na);Ce(p,"RID","rpc"),Ce(p,"SID",c.M),Ce(p,"AID",c.K),Ce(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ce(p,"TO",c.ia),Ce(p,"TYPE","xmlhttp"),Za(c,p),c.u&&c.o&&Ap(p,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=Tc(zn(p)),m.u=null,m.R=!0,cw(m,c)}t.Va=function(){this.C!=null&&(this.C=null,Ac(this),Rp(this),Nt(19))};function Rc(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Lw(c,p){var m=null;if(c.g==p){Rc(c),xp(c),c.g=null;var I=2}else if(Ep(c.h,p))m=p.G,gw(c.h,p),I=1;else return;if(c.I!=0){if(p.o)if(I==1){m=p.u?p.u.length:0,p=Date.now()-p.F;var L=c.D;I=_c(),kt(I,new sw(I,m)),Pc(c)}else Ow(c);else if(L=p.m,L==3||L==0&&p.X>0||!(I==1&&tD(c,p)||I==2&&Rp(c)))switch(m&&m.length>0&&(p=c.h,p.i=p.i.concat(m)),L){case 1:Yi(c,5);break;case 4:Yi(c,10);break;case 3:Yi(c,6);break;default:Yi(c,2)}}}function Fw(c,p){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*p}function Yi(c,p){if(c.j.info("Error code "+p),p==2){var m=u(c.bb,c),I=c.Ua;const L=!I;I=new Fr(I||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Wa(I,"https"),Tc(I),L?QV(I.toString(),m):YV(I.toString(),m)}else Nt(2);c.I=0,c.l&&c.l.pa(p),Uw(c),Nw(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function Uw(c){if(c.I=0,c.ja=[],c.l){const p=yw(c.h);(p.length!=0||c.i.length!=0)&&(T(c.ja,p),T(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function jw(c,p,m){var I=m instanceof Fr?zn(m):new Fr(m);if(I.g!="")p&&(I.g=p+"."+I.g),Ga(I,I.u);else{var L=o.location;I=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;const F=new Fr(null);I&&Wa(F,I),p&&(F.g=p),L&&Ga(F,L),m&&(F.h=m),I=F}return m=c.G,p=c.wa,m&&p&&Ce(I,m,p),Ce(I,"VER",c.ka),Za(c,I),I}function Bw(c,p,m){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new Be(new Sp({ab:m})):new Be(c.ma),p.Fa(c.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $w(){}t=$w.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function xc(){}xc.prototype.g=function(c,p){return new Xt(c,p)};function Xt(c,p){_t.call(this),this.g=new kw(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!R(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!R(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new to(this)}d(Xt,_t),Xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Pp(this.g)},Xt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=fp(c),c=m);p.i.push(new BV(p.Ya++,c)),p.I==3&&Pc(p)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Pp(this.g),delete this.g,Xt.Z.N.call(this)};function zw(c){pp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const m in p){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}d(zw,pp);function qw(){mp.call(this),this.status=1}d(qw,mp);function to(c){this.g=c}d(to,$w),to.prototype.ra=function(){kt(this.g,"a")},to.prototype.qa=function(c){kt(this.g,new zw(c))},to.prototype.pa=function(c){kt(this.g,new qw)},to.prototype.oa=function(){kt(this.g,"b")},xc.prototype.createWebChannel=xc.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,Cx=function(){return new xc},bx=function(){return _c()},xx=Ki,ey={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wc.NO_ERROR=0,wc.TIMEOUT=8,wc.HTTP_ERROR=6,Rh=wc,ow.COMPLETE="complete",Rx=ow,tw.EventType=Ua,Ua.OPEN="a",Ua.CLOSE="b",Ua.ERROR="c",Ua.MESSAGE="d",_t.prototype.listen=_t.prototype.J,Al=tw,Be.prototype.listenOnce=Be.prototype.K,Be.prototype.getLastError=Be.prototype.Ha,Be.prototype.getLastErrorCode=Be.prototype.ya,Be.prototype.getStatus=Be.prototype.ca,Be.prototype.getResponseJson=Be.prototype.La,Be.prototype.getResponseText=Be.prototype.la,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Fa,Px=Be}).apply(typeof Qc<"u"?Qc:typeof self<"u"?self:typeof window<"u"?window:{});const zT="@firebase/firestore",qT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Yu("@firebase/firestore");function po(){return Ds.logLevel}function j(t,...e){if(Ds.logLevel<=he.DEBUG){const n=e.map(h0);Ds.debug(`Firestore (${ba}): ${t}`,...n)}}function Ke(t,...e){if(Ds.logLevel<=he.ERROR){const n=e.map(h0);Ds.error(`Firestore (${ba}): ${t}`,...n)}}function Os(t,...e){if(Ds.logLevel<=he.WARN){const n=e.map(h0);Ds.warn(`Firestore (${ba}): ${t}`,...n)}}function h0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,kx(t,r,n)}function kx(t,e,n){let r=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ke(r),new Error(r)}function ne(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||kx(e,i,r)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Rn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class FU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class UU{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ne(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new er;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new er,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new er)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string",31837,{l:r}),new Nx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class jU{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BU{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new jU(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $U{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ne(this.o===void 0,3512);const r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new WT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new WT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function ty(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return hm(i)===hm(s)?ae(i,s):hm(i)?1:-1}return ae(t.length,e.length)}const qU=55296,WU=57343;function hm(t){const e=t.charCodeAt(0);return e>=qU&&e<=WU}function ia(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Vx(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="__name__";class Kn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Kn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Kn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const r=Kn.isNumericId(e),i=Kn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Kn.extractNumericId(e).compare(Kn.extractNumericId(n)):ty(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ei.fromString(e.substring(4,e.length-2))}}class ve extends Kn{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const GU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Le extends Kn{construct(e,n,r){return new Le(e,n,r)}static isValidIdentifier(e){return GU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Le.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GT}static keyField(){return new Le([GT])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new W(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Le(n)}static emptyPath(){return new Le([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(ve.fromString(e))}static fromName(e){return new H(ve.fromString(e).popFirst(5))}static empty(){return new H(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new ve(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e,n){if(!n)throw new W(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function KU(t,e,n,r){if(e===!0&&r===!0)throw new W(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function KT(t){if(!H.isDocumentKey(t))throw new W(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HT(t){if(H.isDocumentKey(t))throw new W(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ox(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Af(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function sr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Af(t);throw new W(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t,e){const n={typeString:t};return e&&(n.value=e),n}function rc(t,e){if(!Ox(t))throw new W(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new W(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=-62135596800,YT=1e6;class we{static now(){return we.fromMillis(Date.now())}static fromDate(e){return we.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*YT);return new we(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<QT)throw new W(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YT}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:we._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rc(e,we._jsonSchema))return new we(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-QT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}we._jsonSchemaVersion="firestore/timestamp/1.0",we._jsonSchema={type:et("string",we._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{static fromTimestamp(e){return new ie(e)}static min(){return new ie(new we(0,0))}static max(){return new ie(new we(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=-1;class Id{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function ny(t){return t.fields.find(e=>e.kind===2)}function is(t){return t.fields.filter(e=>e.kind!==2)}Id.UNKNOWN_ID=-1;class xh{constructor(e,n){this.fieldPath=e,this.kind=n}}class Pu{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Pu(0,hn.min())}}function Mx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new we(n+1,0):new we(n,r));return new hn(i,H.empty(),e)}function Lx(t){return new hn(t.readTime,t.key,sa)}class hn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hn(ie.min(),H.empty(),sa)}static max(){return new hn(ie.max(),H.empty(),sa)}}function f0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ux{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $i(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==Fx)throw t;j("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="SimpleDb";class Pf{static open(e,n,r,i){try{return new Pf(n,e.transaction(i,r))}catch(s){throw new $l(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new er,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new $l(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=p0(r.target.error);this.S.reject(new $l(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(j(en,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new QU(n)}}class Ti{static delete(e){return j(en,"Removing database:",e),us(RR().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Qu())return!1;if(Ti.F())return!0;const e=ot(),n=Ti.M(e),r=0<n&&n<10,i=jx(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ti.M(ot())===12.2&&Ke("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(j(en,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new $l(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new W(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new W(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new $l(e,o))},i.onupgradeneeded=s=>{j(en,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next(()=>{j(en,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=Pf.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.C(),u)).catch(u=>(a.abort(u),M.reject(u))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(j(en,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function jx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class HU{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return us(this.U.delete())}}class $l extends W{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function zi(t){return t.name==="IndexedDbTransactionError"}class QU{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(j(en,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(j(en,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),us(r)}add(e){return j(en,"ADD",this.store.name,e,e),us(this.store.add(e))}get(e){return us(this.store.get(e)).next(n=>(n===void 0&&(n=null),j(en,"GET",this.store.name,e,n),n))}delete(e){return j(en,"DELETE",this.store.name,e),us(this.store.delete(e))}count(){return j(en,"COUNT",this.store.name),us(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.H(s,(a,l)=>{o.push(l)}).next(()=>o)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Z(e,n){j(en,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,(s,o,a)=>a.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=p0(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new HU(a),u=n(a.primaryKey,a.value,l);if(u instanceof M){const h=u.catch(d=>(l.done(),M.reject(d)));r.push(h)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function us(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=p0(r.target.error);n(i)}})}let XT=!1;function p0(t){const e=Ti.M(ot());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new W("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return XT||(XT=!0,setTimeout(()=>{throw r},0)),r}}return t}const zl="IndexBackfiller";class YU{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){j(zl,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();j(zl,`Documents written: ${n}`)}catch(n){zi(n)?j(zl,"Ignoring IndexedDB error during index backfill: ",n):await $i(n)}await this.re(6e4)})}}class XU{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return j(zl,`Processing collection: ${o}`),this.oe(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(i,s)).next(a=>(j(zl,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}_e(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Lx(s);f0(o,r)>0&&(r=o)}),new hn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qt.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=-1;function Rf(t){return t==null}function Ru(t){return t===0&&1/t==-1/0}function Bx(t){return typeof t=="number"&&Number.isInteger(t)&&!Ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="";function xt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=JT(e)),e=JU(t.get(n),e);return JT(e)}function JU(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Sd:n+="";break;default:n+=s}}return n}function JT(t){return t+Sd+""}function Yn(t){const e=t.length;if(ne(e>=2,64408,{path:t}),e===2)return ne(t.charAt(0)===Sd&&t.charAt(1)==="",56145,{path:t}),ve.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(Sd,s);switch((o<0||o>n)&&Y(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Y(61167,{path:t})}s=o+2}return new ve(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="remoteDocuments",ic="owner",ro="owner",xu="mutationQueues",ZU="userId",Nn="mutations",ZT="batchId",gs="userMutationsIndex",eI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(t,e){return[t,xt(e)]}function $x(t,e,n){return[t,xt(e),n]}const e5={},oa="documentMutations",Ad="remoteDocumentsV14",t5=["prefixPath","collectionGroup","readTime","documentId"],Ch="documentKeyIndex",n5=["prefixPath","collectionGroup","documentId"],zx="collectionGroupIndex",r5=["collectionGroup","readTime","prefixPath","documentId"],bu="remoteDocumentGlobal",ry="remoteDocumentGlobalKey",aa="targets",qx="queryTargetsIndex",i5=["canonicalId","targetId"],la="targetDocuments",s5=["targetId","path"],m0="documentTargetsIndex",o5=["path","targetId"],Pd="targetGlobalKey",Is="targetGlobal",Cu="collectionParents",a5=["collectionId","parent"],ua="clientMetadata",l5="clientId",xf="bundles",u5="bundleId",bf="namedQueries",c5="name",g0="indexConfiguration",h5="indexId",iy="collectionGroupIndex",d5="collectionGroup",ql="indexState",f5=["indexId","uid"],Wx="sequenceNumberIndex",p5=["uid","sequenceNumber"],Wl="indexEntries",m5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Gx="documentKeyIndex",g5=["indexId","uid","orderedDocumentKey"],Cf="documentOverlays",y5=["userId","collectionPath","documentId"],sy="collectionPathOverlayIndex",v5=["userId","collectionPath","largestBatchId"],Kx="collectionGroupOverlayIndex",_5=["userId","collectionGroup","largestBatchId"],y0="globals",w5="name",Hx=[xu,Nn,oa,ss,aa,ic,Is,la,ua,bu,Cu,xf,bf],E5=[...Hx,Cf],Qx=[xu,Nn,oa,Ad,aa,ic,Is,la,ua,bu,Cu,xf,bf,Cf],Yx=Qx,v0=[...Yx,g0,ql,Wl],T5=v0,Xx=[...v0,y0],I5=Xx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy extends Ux{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function at(t,e){const n=te(t);return Ti.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||gt.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??gt.RED,this.left=i??gt.EMPTY,this.right=s??gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new gt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return gt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1;gt.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nI(this.data.getIterator())}getIteratorFrom(e){return new nI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ie)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ie(this.comparator);return n.data=e,n}}class nI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function io(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.fields=e,e.sort(Le.comparator)}static empty(){return new Wt([])}unionWith(e){let n=new Ie(Le.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ia(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Zx("Invalid base64 string: "+s):s}}(e);return new Qe(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const S5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(ne(!!t,39018),typeof t=="string"){let e=0;const n=S5.exec(t);if(ne(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function br(t){return typeof t=="string"?Qe.fromBase64String(t):Qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="server_timestamp",tb="__type__",nb="__previous_value__",rb="__local_write_time__";function _0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tb])==null?void 0:r.stringValue)===eb}function kf(t){const e=t.mapValue.fields[nb];return _0(e)?kf(e):e}function ku(t){const e=xr(t.mapValue.fields[rb].timestampValue);return new we(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,n,r,i,s,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Rd="(default)";class Ms{constructor(e,n){this.projectId=e,this.database=n||Rd}static empty(){return new Ms("","")}get isDefaultDatabase(){return this.database===Rd}isEqual(e){return e instanceof Ms&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="__type__",ib="__max__",ui={mapValue:{fields:{__type__:{stringValue:ib}}}},E0="__vector__",ca="value",kh={nullValue:"NULL_VALUE"};function Ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_0(t)?4:sb(t)?9007199254740991:Nf(t)?10:11:Y(28295,{value:t})}function or(t,e){if(t===e)return!0;const n=Ci(t);if(n!==Ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ku(t).isEqual(ku(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=xr(i.timestampValue),a=xr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return br(i.bytesValue).isEqual(br(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=De(i.doubleValue),a=De(s.doubleValue);return o===a?Ru(o)===Ru(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ia(t.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(tI(o)!==tI(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!or(o[l],a[l])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function Nu(t,e){return(t.values||[]).find(n=>or(n,e))!==void 0}function ki(t,e){if(t===e)return 0;const n=Ci(t),r=Ci(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=De(s.integerValue||s.doubleValue),l=De(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return rI(t.timestampValue,e.timestampValue);case 4:return rI(ku(t),ku(e));case 5:return ty(t.stringValue,e.stringValue);case 6:return function(s,o){const a=br(s),l=br(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ae(a[u],l[u]);if(h!==0)return h}return ae(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ae(De(s.latitude),De(o.latitude));return a!==0?a:ae(De(s.longitude),De(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return iI(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,g,T,w;const a=s.fields||{},l=o.fields||{},u=(f=a[ca])==null?void 0:f.arrayValue,h=(g=l[ca])==null?void 0:g.arrayValue,d=ae(((T=u==null?void 0:u.values)==null?void 0:T.length)||0,((w=h==null?void 0:h.values)==null?void 0:w.length)||0);return d!==0?d:iI(u,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ui.mapValue&&o===ui.mapValue)return 0;if(s===ui.mapValue)return 1;if(o===ui.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=ty(l[d],h[d]);if(f!==0)return f;const g=ki(a[l[d]],u[h[d]]);if(g!==0)return g}return ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:n})}}function rI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=xr(t),r=xr(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function iI(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ki(n[i],r[i]);if(s)return s}return ae(n.length,r.length)}function ha(t){return ay(t)}function ay(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ay(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ay(n.fields[o])}`;return i+"}"}(t.mapValue):Y(61005,{value:t})}function Nh(t){switch(Ci(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kf(t);return e?16+Nh(e):16;case 5:return 2*t.stringValue.length;case 6:return br(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Nh(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return qi(r.fields,(s,o)=>{i+=s.length+Nh(o)}),i}(t.mapValue);default:throw Y(13486,{value:t})}}function Vu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ly(t){return!!t&&"integerValue"in t}function Du(t){return!!t&&"arrayValue"in t}function sI(t){return!!t&&"nullValue"in t}function oI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vh(t){return!!t&&"mapValue"in t}function Nf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[w0])==null?void 0:r.stringValue)===E0}function Gl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return qi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Gl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gl(t.arrayValue.values[n]);return e}return{...t}}function sb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ib}const ob={mapValue:{fields:{[w0]:{stringValue:E0},[ca]:{arrayValue:{}}}}};function P5(t){return"nullValue"in t?kh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vu(Ms.empty(),H.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Nf(t)?ob:{mapValue:{}}:Y(35942,{value:t})}function R5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vu(Ms.empty(),H.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?ob:"mapValue"in t?Nf(t)?{mapValue:{}}:ui:Y(61959,{value:t})}function aI(t,e){const n=ki(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function lI(t,e){const n=ki(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(n)}setAll(e){let n=Le.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Gl(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Pt(Gl(this.value))}}function ab(t){const e=[];return qi(t.fields,(n,r)=>{const i=new Le([n]);if(Vh(r)){const s=ab(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Wt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ze(e,0,ie.min(),ie.min(),ie.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new ze(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new ze(e,2,n,ie.min(),ie.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new ze(e,3,n,ie.min(),ie.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ze&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this.position=e,this.inclusive=n}}function uI(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=ki(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function cI(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!or(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n="asc"){this.field=e,this.dir=n}}function x5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{}class fe extends lb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new b5(e,n,r):n==="array-contains"?new N5(e,r):n==="in"?new pb(e,r):n==="not-in"?new V5(e,r):n==="array-contains-any"?new D5(e,r):new fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new C5(e,r):new k5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ki(n,this.value)):n!==null&&Ci(this.value)===Ci(n)&&this.matchesComparison(ki(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ee extends lb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ee(e,n)}matches(e){return fa(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fa(t){return t.op==="and"}function uy(t){return t.op==="or"}function T0(t){return ub(t)&&fa(t)}function ub(t){for(const e of t.filters)if(e instanceof Ee)return!1;return!0}function cy(t){if(t instanceof fe)return t.field.canonicalString()+t.op.toString()+ha(t.value);if(T0(t))return t.filters.map(e=>cy(e)).join(",");{const e=t.filters.map(n=>cy(n)).join(",");return`${t.op}(${e})`}}function cb(t,e){return t instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&or(r.value,i.value)}(t,e):t instanceof Ee?function(r,i){return i instanceof Ee&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&cb(o,i.filters[a]),!0):!1}(t,e):void Y(19439)}function hb(t,e){const n=t.filters.concat(e);return Ee.create(n,t.op)}function db(t){return t instanceof fe?function(n){return`${n.field.canonicalString()} ${n.op} ${ha(n.value)}`}(t):t instanceof Ee?function(n){return n.op.toString()+" {"+n.getFilters().map(db).join(" ,")+"}"}(t):"Filter"}class b5 extends fe{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class C5 extends fe{constructor(e,n){super(e,"in",n),this.keys=fb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class k5 extends fe{constructor(e,n){super(e,"not-in",n),this.keys=fb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fb(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class N5 extends fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Du(n)&&Nu(n.arrayValue,this.value)}}class pb extends fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nu(this.value.arrayValue,n)}}class V5 extends fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Nu(this.value.arrayValue,n)}}class D5 extends fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Du(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Nu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function hy(t,e=null,n=[],r=[],i=null,s=null,o=null){return new O5(t,e,n,r,i,s,o)}function Ls(t){const e=te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Rf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ha(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ha(r)).join(",")),e.Te=n}return e.Te}function sc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!x5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cI(t.startAt,e.startAt)&&cI(t.endAt,e.endAt)}function bd(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Cd(t,e){return t.filters.filter(n=>n instanceof fe&&n.field.isEqual(e))}function hI(t,e,n){let r=kh,i=!0;for(const s of Cd(t,e)){let o=kh,a=!0;switch(s.op){case"<":case"<=":o=P5(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=kh}aI({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];aI({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function dI(t,e,n){let r=ui,i=!0;for(const s of Cd(t,e)){let o=ui,a=!0;switch(s.op){case">=":case">":o=R5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ui}lI({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];lI({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mb(t,e,n,r,i,s,o,a){return new oc(t,e,n,r,i,s,o,a)}function Vf(t){return new oc(t)}function fI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gb(t){return t.collectionGroup!==null}function Kl(t){const e=te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ie(Le.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new xd(s,r))}),n.has(Le.keyField().canonicalString())||e.Ie.push(new xd(Le.keyField(),r))}return e.Ie}function an(t){const e=te(t);return e.Ee||(e.Ee=M5(e,Kl(t))),e.Ee}function M5(t,e){if(t.limitType==="F")return hy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new xd(i.field,s)});const n=t.endAt?new da(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new da(t.startAt.position,t.startAt.inclusive):null;return hy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dy(t,e){const n=t.filters.concat([e]);return new oc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fy(t,e,n){return new oc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Df(t,e){return sc(an(t),an(e))&&t.limitType===e.limitType}function yb(t){return`${Ls(an(t))}|lt:${t.limitType}`}function mo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>db(i)).join(", ")}]`),Rf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ha(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ha(i)).join(",")),`Target(${r})`}(an(t))}; limitType=${t.limitType})`}function ac(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Kl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=uI(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Kl(r),i)||r.endAt&&!function(o,a,l){const u=uI(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Kl(r),i))}(t,e)}function vb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _b(t){return(e,n)=>{let r=!1;for(const i of Kl(t)){const s=L5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function L5(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?ki(l,u):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Jx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=new be(H.comparator);function rn(){return F5}const wb=new be(H.comparator);function Pl(...t){let e=wb;for(const n of t)e=e.insert(n.key,n);return e}function Eb(t){let e=wb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xn(){return Hl()}function Tb(){return Hl()}function Hl(){return new Or(t=>t.toString(),(t,e)=>t.isEqual(e))}const U5=new be(H.comparator),j5=new Ie(H.comparator);function ce(...t){let e=j5;for(const n of t)e=e.add(n);return e}const B5=new Ie(ae);function I0(){return B5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(e)?"-0":e}}function Ib(t){return{integerValue:""+t}}function $5(t,e){return Bx(e)?Ib(e):S0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function z5(t,e,n){return t instanceof pa?function(i,s){const o={fields:{[tb]:{stringValue:eb},[rb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_0(s)&&(s=kf(s)),s&&(o.fields[nb]=s),{mapValue:o}}(n,e):t instanceof ma?Ab(t,e):t instanceof ga?Pb(t,e):function(i,s){const o=Sb(i,s),a=pI(o)+pI(i.Ae);return ly(o)&&ly(i.Ae)?Ib(a):S0(i.serializer,a)}(t,e)}function q5(t,e,n){return t instanceof ma?Ab(t,e):t instanceof ga?Pb(t,e):n}function Sb(t,e){return t instanceof Ou?function(r){return ly(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class pa extends Of{}class ma extends Of{constructor(e){super(),this.elements=e}}function Ab(t,e){const n=Rb(e);for(const r of t.elements)n.some(i=>or(i,r))||n.push(r);return{arrayValue:{values:n}}}class ga extends Of{constructor(e){super(),this.elements=e}}function Pb(t,e){let n=Rb(e);for(const r of t.elements)n=n.filter(i=>!or(i,r));return{arrayValue:{values:n}}}class Ou extends Of{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function pI(t){return De(t.integerValue||t.doubleValue)}function Rb(t){return Du(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.field=e,this.transform=n}}function W5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ma&&i instanceof ma||r instanceof ga&&i instanceof ga?ia(r.elements,i.elements,or):r instanceof Ou&&i instanceof Ou?or(r.Ae,i.Ae):r instanceof pa&&i instanceof pa}(t.transform,e.transform)}class G5{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mf{}function bb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new A0(t.key,Gt.none()):new Ca(t.key,t.data,Gt.none());{const n=t.data,r=Pt.empty();let i=new Ie(Le.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Mr(t.key,r,new Wt(i.toArray()),Gt.none())}}function K5(t,e,n){t instanceof Ca?function(i,s,o){const a=i.value.clone(),l=gI(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Mr?function(i,s,o){if(!Dh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=gI(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Cb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ql(t,e,n,r){return t instanceof Ca?function(s,o,a,l){if(!Dh(s.precondition,o))return a;const u=s.value.clone(),h=yI(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mr?function(s,o,a,l){if(!Dh(s.precondition,o))return a;const u=yI(s.fieldTransforms,l,o),h=o.data;return h.setAll(Cb(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Dh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function H5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Sb(r.transform,i||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,s))}return n||null}function mI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ia(r,i,(s,o)=>W5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ca extends Mf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mr extends Mf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Cb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function gI(t,e,n){const r=new Map;ne(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,q5(o,a,n[i]))}return r}function yI(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,z5(s,o,e))}return r}class A0 extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kb extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&K5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ql(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ql(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Tb();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=bb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&ia(this.mutations,e.mutations,(n,r)=>mI(n,r))&&ia(this.baseMutations,e.baseMutations,(n,r)=>mI(n,r))}}class R0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ne(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return U5}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new R0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,me;function Y5(t){switch(t){case U.OK:return Y(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function Nb(t){if(t===void 0)return Ke("GRPC error has no .code"),U.UNKNOWN;switch(t){case Ye.OK:return U.OK;case Ye.CANCELLED:return U.CANCELLED;case Ye.UNKNOWN:return U.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return U.INTERNAL;case Ye.UNAVAILABLE:return U.UNAVAILABLE;case Ye.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ye.NOT_FOUND:return U.NOT_FOUND;case Ye.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ye.ABORTED:return U.ABORTED;case Ye.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ye.DATA_LOSS:return U.DATA_LOSS;default:return Y(39323,{code:t})}}(me=Ye||(Ye={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=new Ei([4294967295,4294967295],0);function vI(t){const e=X5().encode(t),n=new Ax;return n.update(e),new Uint8Array(n.digest())}function _I(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ei([n,r],0),new Ei([i,s],0)]}class b0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rl(`Invalid padding: ${n}`);if(r<0)throw new Rl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ei.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Ei.fromNumber(r)));return i.compare(J5)===1&&(i=new Ei([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=vI(e),[r,i]=_I(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new b0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=vI(e),[r,i]=_I(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,uc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lc(ie.min(),i,new be(ae),rn(),ce())}}class uc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new uc(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Vb{constructor(e,n){this.targetId=e,this.Ce=n}}class Db{constructor(e,n,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class wI{constructor(){this.ve=0,this.Fe=EI(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),r=ce();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y(38017,{changeType:s})}}),new uc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=EI()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Z5{constructor(e){this.Ge=e,this.ze=new Map,this.je=rn(),this.Je=Xc(),this.He=Xc(),this.Ye=new be(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(bd(s))if(r===0){const o=new H(s.path);this.et(n,o,ze.newNoDocument(o,ie.min()))}else ne(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=br(r).toUint8Array()}catch(l){if(l instanceof Zx)return Os("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new b0(o,i,s)}catch(l){return Os(l instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&bd(a.target)){const l=new H(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ze.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ce();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new lc(e,n,this.Ye,this.je,r);return this.je=rn(),this.Je=Xc(),this.He=Xc(),this.Ye=new be(ae),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new wI,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ie(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ie(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wI),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xc(){return new be(H.comparator)}function EI(){return new be(H.comparator)}const e3=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),t3=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),n3=(()=>({and:"AND",or:"OR"}))();class r3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function py(t,e){return t.useProto3Json||Rf(e)?e:{value:e}}function ya(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ob(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function i3(t,e){return ya(t,e.toTimestamp())}function Lt(t){return ne(!!t,49232),ie.fromTimestamp(function(n){const r=xr(n);return new we(r.seconds,r.nanos)}(t))}function C0(t,e){return my(t,e).canonicalString()}function my(t,e){const n=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Mb(t){const e=ve.fromString(t);return ne(Wb(e),10190,{key:e.toString()}),e}function kd(t,e){return C0(t.databaseId,e.path)}function Ss(t,e){const n=Mb(e);if(n.get(1)!==t.databaseId.projectId)throw new W(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(Ub(n))}function Lb(t,e){return C0(t.databaseId,e)}function Fb(t){const e=Mb(t);return e.length===4?ve.emptyPath():Ub(e)}function gy(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ub(t){return ne(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function TI(t,e,n){return{name:kd(t,e),fields:n.value.mapValue.fields}}function s3(t,e,n){const r=Ss(t,e.name),i=Lt(e.updateTime),s=e.createTime?Lt(e.createTime):ie.min(),o=new Pt({mapValue:{fields:e.fields}}),a=ze.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function o3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Y(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(ne(h===void 0||typeof h=="string",58123),Qe.fromBase64String(h||"")):(ne(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Qe.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?U.UNKNOWN:Nb(u.code);return new W(h,u.message||"")}(o);n=new Db(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ss(t,r.document.name),s=Lt(r.document.updateTime),o=r.document.createTime?Lt(r.document.createTime):ie.min(),a=new Pt({mapValue:{fields:r.document.fields}}),l=ze.newFoundDocument(i,s,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Oh(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ss(t,r.document),s=r.readTime?Lt(r.readTime):ie.min(),o=ze.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Oh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ss(t,r.document),s=r.removedTargetIds||[];n=new Oh([],s,i,null)}else{if(!("filter"in e))return Y(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Q5(i,s),a=r.targetId;n=new Vb(a,o)}}return n}function Nd(t,e){let n;if(e instanceof Ca)n={update:TI(t,e.key,e.value)};else if(e instanceof A0)n={delete:kd(t,e.key)};else if(e instanceof Mr)n={update:TI(t,e.key,e.data),updateMask:d3(e.fieldMask)};else{if(!(e instanceof kb))return Y(16599,{Vt:e.type});n={verify:kd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof pa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ma)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ga)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ou)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Y(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:i3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y(27497)}(t,e.precondition)),n}function yy(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Gt.updateTime(Lt(s.updateTime)):s.exists!==void 0?Gt.exists(s.exists):Gt.none()}(e.currentDocument):Gt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ne(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new pa;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new ma(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new ga(h)}else"increment"in a?l=new Ou(o,a.increment):Y(16584,{proto:a});const u=Le.fromServerFormat(a.fieldPath);return new xb(u,l)}(t,i)):[];if(e.update){e.update.name;const i=Ss(t,e.update.name),s=new Pt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new Wt(u.map(h=>Le.fromServerFormat(h)))}(e.updateMask);return new Mr(i,s,o,n,r)}return new Ca(i,s,n,r)}if(e.delete){const i=Ss(t,e.delete);return new A0(i,n)}if(e.verify){const i=Ss(t,e.verify);return new kb(i,n)}return Y(1463,{proto:e})}function a3(t,e){return t&&t.length>0?(ne(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Lt(i.updateTime):Lt(s);return o.isEqual(ie.min())&&(o=Lt(s)),new G5(o,i.transformResults||[])}(n,e))):[]}function jb(t,e){return{documents:[Lb(t,e.path)]}}function Bb(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Lb(t,i);const s=function(u){if(u.length!==0)return qb(Ee.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:go(f.field),direction:u3(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=py(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function $b(t){let e=Fb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ne(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=zb(d);return f instanceof Ee&&T0(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(T){return new xd(yo(T.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Rf(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new da(g,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,g=d.values||[];return new da(g,f)}(n.endAt)),mb(e,i,o,s,a,"F",l,u)}function l3(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yo(n.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=yo(n.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=yo(n.unaryFilter.field);return fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yo(n.unaryFilter.field);return fe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return fe.create(yo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ee.create(n.compositeFilter.filters.map(r=>zb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function u3(t){return e3[t]}function c3(t){return t3[t]}function h3(t){return n3[t]}function go(t){return{fieldPath:t.canonicalString()}}function yo(t){return Le.fromServerFormat(t.fieldPath)}function qb(t){return t instanceof fe?function(n){if(n.op==="=="){if(oI(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NAN"}};if(sI(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(oI(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NAN"}};if(sI(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(n.field),op:c3(n.op),value:n.value}}}(t):t instanceof Ee?function(n){const r=n.getFilters().map(i=>qb(i));return r.length===1?r[0]:{compositeFilter:{op:h3(n.op),filters:r}}}(t):Y(54877,{filter:t})}function d3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Wb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r,i,s=ie.min(),o=ie.min(),a=Qe.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.yt=e}}function f3(t,e){let n;if(e.document)n=s3(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=H.fromSegments(e.noDocument.path),i=Us(e.noDocument.readTime);n=ze.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y(56709);{const r=H.fromSegments(e.unknownDocument.path),i=Us(e.unknownDocument.version);n=ze.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new we(i[0],i[1]);return ie.fromTimestamp(s)}(e.readTime)),n}function II(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Vd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:kd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:ya(s,o.version.toTimestamp()),createTime:ya(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fs(e.version)};else{if(!e.isUnknownDocument())return Y(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Fs(e.version)}}return r}function Vd(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fs(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Us(t){const e=new we(t.seconds,t.nanoseconds);return ie.fromTimestamp(e)}function cs(t,e){const n=(e.baseMutations||[]).map(s=>yy(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>yy(t.yt,s)),i=we.fromMillis(e.localWriteTimeMs);return new P0(e.batchId,i,n,r)}function xl(t){const e=Us(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Us(t.lastLimboFreeSnapshotVersion):ie.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return ne(o===1,1966,{count:o}),an(Vf(Fb(s.documents[0])))}(t.query):function(s){return an($b(s))}(t.query),new yr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Qe.fromBase64String(t.resumeToken))}function Kb(t,e){const n=Fs(e.snapshotVersion),r=Fs(e.lastLimboFreeSnapshotVersion);let i;i=bd(e.target)?jb(t.yt,e.target):Bb(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ls(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Hb(t){const e=$b({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fy(e,e.limit,"L"):e}function dm(t,e){return new x0(e.largestBatchId,yy(t.yt,e.overlayMutation))}function SI(t,e){const n=e.path.lastSegment();return[t,xt(e.path.popLast()),n]}function AI(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Fs(r.readTime),documentKey:xt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{getBundleMetadata(e,n){return PI(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Us(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return PI(e).put(function(i){return{bundleId:i.id,createTime:Fs(Lt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return RI(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Hb(s.bundledQuery),readTime:Us(s.readTime)}}(r)})}saveNamedQuery(e,n){return RI(e).put(function(i){return{name:i.name,readTime:Fs(Lt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function PI(t){return at(t,xf)}function RI(t){return at(t,bf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Lf(e,r)}getOverlay(e,n){return ul(e).get(SI(this.userId,n)).next(r=>r?dm(this.serializer,r):null)}getOverlays(e,n){const r=Xn();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new x0(n,o);i.push(this.St(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(xt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ul(e).Z(sy,a))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Xn(),s=xt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ul(e).J(sy,o).next(a=>{for(const l of a){const u=dm(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Xn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ul(e).ee({index:Kx,range:a},(l,u,h)=>{const d=dm(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):h.done()}).next(()=>s)}St(e,n){return ul(e).put(function(i,s,o){const[a,l,u]=SI(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Nd(i.yt,o.mutation)}}(this.serializer,this.userId,n))}}function ul(t){return at(t,Cf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{bt(e){return at(e,y0)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Qe.fromUint8Array(r):Qe.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(De(e.integerValue));else if("doubleValue"in e){const r=De(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Ru(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=xr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(br(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?sb(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Nf(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Y(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var o,a;const r=e.fields||{};this.Ft(n,53);const i=ca,s=((a=(o=r[i].arrayValue)==null?void 0:o.values)==null?void 0:a.length)||0;this.Ft(n,15),n.Mt(De(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),H.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}hs.Kt=new hs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=255;function g3(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function xI(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=g3(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class y3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=xI(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=xI(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(so),this.sn(255)}_n(){this.an(so),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===so?(this.sn(so),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===so?(this.an(so),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class v3{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class _3{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class cl{constructor(){this.cn=new y3,this.ln=new v3(this.cn),this.hn=new _3(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new ds(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Mh(this.En),directionalValue:Mh(this.dn),orderedDocumentKey:Mh(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Wr(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=bI(t.En,e.En),n!==0?n:(n=bI(t.dn,e.dn),n!==0?n:H.comparator(t.In,e.In)))}function bI(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Mh(t){return OR()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function CI(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class kI{constructor(e){this.mn=new Ie((n,r)=>Le.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ne(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=ny(e);if(n!==void 0&&!this.wn(n))return!1;const r=is(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ie(Le.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new xh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new xh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new xh(r.field,r.dir==="asc"?0:1)));return new Id(Id.UNKNOWN_ID,this.collectionId,n,Pu.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){var n,r;if(ne(t instanceof fe||t instanceof Ee,20012),t instanceof fe){if(t instanceof pb){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(s=>fe.create(t.field,"==",s)))||[];return Ee.create(i,"or")}return t}const e=t.filters.map(i=>Qb(i));return Ee.create(e,t.op)}function w3(t){if(t.getFilters().length===0)return[];const e=wy(Qb(t));return ne(Yb(e),7391),vy(e)||_y(e)?[e]:e.getFilters()}function vy(t){return t instanceof fe}function _y(t){return t instanceof Ee&&T0(t)}function Yb(t){return vy(t)||_y(t)||function(n){if(n instanceof Ee&&uy(n)){for(const r of n.getFilters())if(!vy(r)&&!_y(r))return!1;return!0}return!1}(t)}function wy(t){if(ne(t instanceof fe||t instanceof Ee,34018),t instanceof fe)return t;if(t.filters.length===1)return wy(t.filters[0]);const e=t.filters.map(r=>wy(r));let n=Ee.create(e,t.op);return n=Dd(n),Yb(n)?n:(ne(n instanceof Ee,64498),ne(fa(n),40251),ne(n.filters.length>1,57927),n.filters.reduce((r,i)=>k0(r,i)))}function k0(t,e){let n;return ne(t instanceof fe||t instanceof Ee,38388),ne(e instanceof fe||e instanceof Ee,25473),n=t instanceof fe?e instanceof fe?function(i,s){return Ee.create([i,s],"and")}(t,e):NI(t,e):e instanceof fe?NI(e,t):function(i,s){if(ne(i.filters.length>0&&s.filters.length>0,48005),fa(i)&&fa(s))return hb(i,s.getFilters());const o=uy(i)?i:s,a=uy(i)?s:i,l=o.filters.map(u=>k0(u,a));return Ee.create(l,"or")}(t,e),Dd(n)}function NI(t,e){if(fa(e))return hb(e,t.getFilters());{const n=e.filters.map(r=>k0(t,r));return Ee.create(n,"or")}}function Dd(t){if(ne(t instanceof fe||t instanceof Ee,11850),t instanceof fe)return t;const e=t.getFilters();if(e.length===1)return Dd(e[0]);if(ub(t))return t;const n=e.map(i=>Dd(i)),r=[];return n.forEach(i=>{i instanceof fe?r.push(i):i instanceof Ee&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ee.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.Cn=new N0}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(hn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(hn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class N0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ie(ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ie(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="IndexedDbIndexManager",Jc=new Uint8Array(0);class T3{constructor(e,n){this.databaseId=n,this.vn=new N0,this.Fn=new Or(r=>Ls(r),(r,i)=>sc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:xt(i)};return DI(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Vx(n),""],!1,!0);return DI(e).J(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Yn(o.parent))}return r})}addFieldIndex(e,n){const r=hl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=ao(e);return s.next(a=>{o.put(AI(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=hl(e),i=ao(e),s=oo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=hl(e),r=oo(e),i=ao(e);return n.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,n){return M.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new kI(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=oo(e);let i=!0;const s=new Map;return M.forEach(this.Mn(n),o=>this.xn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ce();const a=[];return M.forEach(s,(l,u)=>{j(VI,`Using index ${function(v){return`id=${v.indexId}|cg=${v.collectionGroup}|f=${v.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(l)} to execute ${Ls(n)}`);const h=function(v,C){const N=ny(C);if(N===void 0)return null;for(const V of Cd(v,N.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null}(u,l),d=function(v,C){const N=new Map;for(const V of is(C))for(const S of Cd(v,V.fieldPath))switch(S.op){case"==":case"in":N.set(V.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return N.set(V.fieldPath.canonicalString(),S.value),Array.from(N.values())}return null}(u,l),f=function(v,C){const N=[];let V=!0;for(const S of is(C)){const _=S.kind===0?hI(v,S.fieldPath,v.startAt):dI(v,S.fieldPath,v.startAt);N.push(_.value),V&&(V=_.inclusive)}return new da(N,V)}(u,l),g=function(v,C){const N=[];let V=!0;for(const S of is(C)){const _=S.kind===0?dI(v,S.fieldPath,v.endAt):hI(v,S.fieldPath,v.endAt);N.push(_.value),V&&(V=_.inclusive)}return new da(N,V)}(u,l),T=this.On(l,u,f),w=this.On(l,u,g),P=this.Nn(l,u,d),E=this.Bn(l.indexId,h,T,f.inclusive,w,g.inclusive,P);return M.forEach(E,y=>r.Y(y,n.limit).next(v=>{v.forEach(C=>{const N=H.fromSegments(C.documentKey);o.has(N)||(o=o.add(N),a.push(N))})}))}).next(()=>a)}return M.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=w3(Ee.create(e.filters,"and")).map(r=>hy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),h=[];for(let d=0;d<l;++d){const f=n?this.Ln(n[d/u]):Jc,g=this.kn(e,f,r[d%u],i),T=this.qn(e,f,s[d%u],o),w=a.map(P=>this.kn(e,f,P,!0));h.push(...this.createRange(g,T,w))}return h}kn(e,n,r,i){const s=new ds(e,H.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new ds(e,H.empty(),n,r);return i?s.An():s}xn(e,n){const r=new kI(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Mn(n);return M.forEach(i,s=>this.xn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Ie(Le.comparator),h=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?h=!0:u=u.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}Qn(e,n){const r=new cl;for(const i of is(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);hs.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new cl;return hs.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new cl;return hs.Kt.Dt(Vu(this.databaseId,n),r.Pn(function(s){const o=is(s);return o.length===0?0:o[o.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new cl);let s=0;for(const o of is(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&Du(a))i=this.Kn(i,o,a);else{const u=l.Pn(o.kind);hs.Kt.Dt(a,u)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new cl;l.seed(a.un()),hs.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=hl(e),i=ao(e);return(n?r.J(iy,IDBKeyRange.bound(n,n)):r.J()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,d){const f=d?new Pu(d.sequenceNumber,new hn(Us(d.readTime),new H(Yn(d.documentKey)),d.largestBatchId)):Pu.empty(),g=h.fields.map(([T,w])=>new xh(Le.fromServerFormat(T),w));return new Id(h.indexId,h.collectionGroup,g,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ae(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=hl(e),s=ao(e);return this.Gn(e).next(o=>i.J(iy,IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>s.put(AI(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.zn(e,i,l).next(u=>{const h=this.jn(s,l);return u.isEqual(h)?M.resolve():this.Jn(e,s,l,u,h)}))))})}Hn(e,n,r,i){return oo(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return oo(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=oo(e);let s=new Ie(Wr);return i.ee({index:Gx,range:IDBKeyRange.only([r.indexId,this.uid,Mh(this.$n(r,n))])},(o,a)=>{s=s.add(new ds(r.indexId,n,CI(a.arrayValue),CI(a.directionalValue)))}).next(()=>s)}jn(e,n){let r=new Ie(Wr);const i=this.Qn(n,e);if(i==null)return r;const s=ny(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Du(o))for(const a of o.arrayValue.values||[])r=r.add(new ds(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new ds(n.indexId,e.key,Jc,i));return r}Jn(e,n,r,i,s){j(VI,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,h,d,f){const g=l.getIterator(),T=u.getIterator();let w=io(g),P=io(T);for(;w||P;){let E=!1,y=!1;if(w&&P){const v=h(w,P);v<0?y=!0:v>0&&(E=!0)}else w!=null?y=!0:E=!0;E?(d(P),P=io(T)):y?(f(w),w=io(g)):(w=io(g),P=io(T))}}(i,s,Wr,a=>{o.push(this.Hn(e,n,r,a))},a=>{o.push(this.Yn(e,n,r,a))}),M.waitFor(o)}Gn(e){let n=1;return ao(e).ee({index:Wx,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Wr(o,a)).filter((o,a,l)=>!a||Wr(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Wr(o,e),l=Wr(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,Jc,H.empty()),l=i[o+1].Vn(this.uid,Jc,H.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return Wr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(OI)}getMinOffset(e,n){return M.mapArray(this.Mn(n),r=>this.xn(e,r).next(i=>i||Y(44426))).next(OI)}}function DI(t){return at(t,Cu)}function oo(t){return at(t,Wl)}function hl(t){return at(t,g0)}function ao(t){return at(t,ql)}function OI(t){ne(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;f0(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new hn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xb=41943040;class It{static withCacheSize(e){return new It(e,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t,e,n){const r=t.store(Nn),i=t.store(oa),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},(h,d,f)=>(a++,f.delete()));s.push(l.next(()=>{ne(a===1,47070,{batchId:n.batchId})}));const u=[];for(const h of n.mutations){const d=$x(e,h.key.path,n.batchId);s.push(i.delete(d)),u.push(h.key)}return M.waitFor(s).next(()=>u)}function Od(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Y(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */It.DEFAULT_COLLECTION_PERCENTILE=10,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,It.DEFAULT=new It(Xb,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),It.DISABLED=new It(-1,0,0);class Ff{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ne(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Ff(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gr(e).ee({index:gs,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=vo(e),o=Gr(e);return o.add({}).next(a=>{ne(typeof a=="number",49019);const l=new P0(a,n,r,i),u=function(g,T,w){const P=w.baseMutations.map(y=>Nd(g.yt,y)),E=w.mutations.map(y=>Nd(g.yt,y));return{userId:T,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:P,mutations:E}}(this.serializer,this.userId,l),h=[];let d=new Ie((f,g)=>ae(f.canonicalString(),g.canonicalString()));for(const f of i){const g=$x(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),h.push(o.put(u)),h.push(s.put(g,e5))}return d.forEach(f=>{h.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Xn[a]=l.keys()}),M.waitFor(h).next(()=>l)})}lookupMutationBatch(e,n){return Gr(e).get(n).next(r=>r?(ne(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),cs(this.serializer,r)):null)}er(e,n){return this.Xn[n]?M.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Gr(e).ee({index:gs,range:i},(o,a,l)=>{a.userId===this.userId&&(ne(a.batchId>=r,47524,{tr:r}),s=cs(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ts;return Gr(e).ee({index:gs,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ts],[this.userId,Number.POSITIVE_INFINITY]);return Gr(e).J(gs,n).next(r=>r.map(i=>cs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=bh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return vo(e).ee({range:i},(o,a,l)=>{const[u,h,d]=o,f=Yn(h);if(u===this.userId&&n.path.isEqual(f))return Gr(e).get(d).next(g=>{if(!g)throw Y(61480,{nr:o,batchId:d});ne(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:d}),s.push(cs(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ie(ae);const i=[];return n.forEach(s=>{const o=bh(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=vo(e).ee({range:a},(u,h,d)=>{const[f,g,T]=u,w=Yn(g);f===this.userId&&s.path.isEqual(w)?r=r.add(T):d.done()});i.push(l)}),M.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=bh(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ie(ae);return vo(e).ee({range:o},(l,u,h)=>{const[d,f,g]=l,T=Yn(f);d===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(g)):h.done()}).next(()=>this.rr(e,a))}rr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Gr(e).get(s).next(o=>{if(o===null)throw Y(35274,{batchId:s});ne(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(cs(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Jb(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return vo(e).ee({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Yn(s[1]);i.push(l)}else a.done()}).next(()=>{ne(i.length===0,56720,{sr:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return Zb(e,this.userId,n)}_r(e){return eC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ts,lastStreamToken:""})}}function Zb(t,e,n){const r=bh(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return vo(t).ee({range:s,X:!0},(a,l,u)=>{const[h,d,f]=a;h===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function Gr(t){return at(t,Nn)}function vo(t){return at(t,oa)}function eC(t){return at(t,xu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new js(0)}static cr(){return new js(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new js(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>ie.fromTimestamp(new we(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>lo(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(ne(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return lo(e).ee((o,a)=>{const l=xl(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return lo(e).ee((r,i)=>{const s=xl(i);n(s)})}lr(e){return LI(e).get(Pd).next(n=>(ne(n!==null,2888),n))}hr(e,n){return LI(e).put(Pd,n)}Pr(e,n){return lo(e).put(Kb(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ls(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return lo(e).ee({range:i,index:qx},(o,a,l)=>{const u=xl(a);sc(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=ii(e);return n.forEach(o=>{const a=xt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=ii(e);return M.forEach(n,s=>{const o=xt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=ii(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ii(e);let s=ce();return i.ee({range:r,X:!0},(o,a,l)=>{const u=Yn(o[1]),h=new H(u);s=s.add(h)}).next(()=>s)}containsKey(e,n){const r=xt(n.path),i=IDBKeyRange.bound([r],[Vx(r)],!1,!0);let s=0;return ii(e).ee({index:m0,X:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,n){return lo(e).get(n).next(r=>r?xl(r):null)}}function lo(t){return at(t,aa)}function LI(t){return at(t,Is)}function ii(t){return at(t,la)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="LruGarbageCollector",S3=1048576;function UI([t,e],[n,r]){const i=ae(t,n);return i===0?ae(e,r):i}class A3{constructor(e){this.Ir=e,this.buffer=new Ie(UI),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();UI(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){j(FI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zi(n)?j(FI,"Ignoring IndexedDB error during garbage collection: ",n):await $i(n)}await this.Vr(3e5)})}}class P3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(qt.ce);const r=new A3(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(MI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MI):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),po()<=he.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function nC(t,e){return new P3(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n){this.db=e,this.garbageCollector=nC(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,i)=>n(i))}addReference(e,n,r){return Zc(e,r)}removeReference(e,n,r){return Zc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Zc(e,n)}br(e,n){return function(i,s){let o=!1;return eC(i).te(a=>Zb(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,(o,a)=>{if(a<=n){const l=this.br(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ie.min()),ii(e).delete(function(d){return[0,xt(d.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Zc(e,n)}Sr(e,n){const r=ii(e);let i,s=qt.ce;return r.ee({index:m0},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==qt.ce&&n(new H(Yn(i)),s),s=u,i=l):s=qt.ce}).next(()=>{s!==qt.ce&&n(new H(Yn(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zc(t,e){return ii(t).put(function(r,i){return{targetId:0,path:xt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.changes=new Or(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ze.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ji(e).put(r)}removeEntry(e,n,r){return Ji(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Vd(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=ze.newInvalidDocument(n);return Ji(e).ee({index:Ch,range:IDBKeyRange.only(dl(n))},(i,s)=>{r=this.Cr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:ze.newInvalidDocument(n)};return Ji(e).ee({index:Ch,range:IDBKeyRange.only(dl(n))},(i,s)=>{r={document:this.Cr(n,s),size:Od(s)}}).next(()=>r)}getEntries(e,n){let r=rn();return this.Fr(e,n,(i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)}).next(()=>r)}Mr(e,n){let r=rn(),i=new be(H.comparator);return this.Fr(e,n,(s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,Od(o))}).next(()=>({documents:r,Or:i}))}Fr(e,n,r){if(n.isEmpty())return M.resolve();let i=new Ie($I);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(dl(i.first()),dl(i.last())),o=i.getIterator();let a=o.getNext();return Ji(e).ee({index:Ch,range:s},(l,u,h)=>{const d=H.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&$I(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.j(dl(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Vd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ji(e).J(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let h=rn();for(const d of u){const f=this.Cr(H.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(ac(n,f)||i.has(f.key))&&(h=h.insert(f.key,f))}return h})}getAllFromCollectionGroup(e,n,r,i){let s=rn();const o=BI(n,r),a=BI(n,hn.max());return Ji(e).ee({index:zx,range:IDBKeyRange.bound(o,a,!0)},(l,u,h)=>{const d=this.Cr(H.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new b3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return jI(e).get(ry).next(n=>(ne(!!n,20021),n))}Dr(e,n){return jI(e).put(ry,n)}Cr(e,n){if(n){const r=f3(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ie.min())))return r}return ze.newInvalidDocument(e)}}function iC(t){return new x3(t)}class b3 extends rC{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Or(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ie((s,o)=>ae(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=II(this.Nr.serializer,o);i=i.add(s.path.popLast());const u=Od(l);r+=u-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=II(this.Nr.serializer,o.convertToNoDocument(ie.min()));n.push(this.Nr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Nr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:i})=>(i.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function jI(t){return at(t,bu)}function Ji(t){return at(t,Ad)}function dl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function BI(t,e){const n=e.documentKey.path.toArray();return[t,Vd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $I(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ae(n[s],r[s]),i)return i;return i=ae(n.length,r.length),i||(i=ae(n[n.length-2],r[r.length-2]),i||ae(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ql(r.mutation,i,Wt.empty(),we.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=Xn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Pl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=rn();const o=Hl(),a=function(){return Hl()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Mr)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Ql(h.mutation,u,h.mutation.getFieldMask(),we.now())):o.set(u.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new C3(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Hl();let i=new be((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Wt.empty();h=a.applyToLocalView(u,h),r.set(l,h);const d=(i.get(a.batchId)||ce()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=Tb();h.forEach(f=>{if(!s.has(f)){const g=bb(n.get(f),r.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(Xn());let a=sa,l=s;return o.next(u=>M.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,ce())).next(h=>({batchId:a,changes:Eb(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=Pl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Pl();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{const u=function(d,f){return new oc(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,ze.newInvalidDocument(h)))});let a=Pl();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Ql(h.mutation,u,Wt.empty(),we.now()),ac(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Lt(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:Hb(i.bundledQuery),readTime:Lt(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.overlays=new be(H.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xn();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=Xn(),s=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new be((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Xn(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Xn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return M.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new x0(n,r));let s=this.qr.get(n);s===void 0&&(s=ce(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.Qr=new Ie(ct.$r),this.Ur=new Ie(ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ct(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ct(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new H(new ve([])),r=new ct(n,e),i=new ct(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new H(new ve([])),r=new ct(n,e),i=new ct(n,e+1);let s=ce();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ct(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ct{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return H.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ie(ct.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new P0(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new ct(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Ts:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ct(n,0),i=new ct(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ie(ae);return n.forEach(i=>{const s=new ct(i,0),o=new ct(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;H.isDocumentKey(s)||(s=s.child(""));const o=new ct(new H(s),0);let a=new Ie(ae);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),M.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ne(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,i=>{const s=new ct(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ct(n,0),i=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(e){this.ri=e,this.docs=function(){return new be(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():ze.newInvalidDocument(n))}getEntries(e,n){let r=rn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ze.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=rn();const o=n.path,a=new H(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||f0(Lx(h),r)<=0||(i.has(h.key)||ac(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new M3(this)}getSize(e){return M.resolve(this.size)}}class M3 extends rC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.persistence=e,this.si=new Or(n=>Ls(n),sc),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.oi=0,this._i=new V0,this.targetCount=0,this.ai=js.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new js(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n){this.ui={},this.overlays={},this.ci=new qt(0),this.li=!1,this.li=!0,this.hi=new V3,this.referenceDelegate=e(this),this.Pi=new L3(this),this.indexManager=new E3,this.remoteDocumentCache=function(i){return new O3(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Gb(n),this.Ii=new k3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new N3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new D3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new F3(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class F3 extends Ux{constructor(e){super(),this.currentSequenceNumber=e}}class Uf{constructor(e){this.persistence=e,this.Ri=new V0,this.Vi=null}static mi(e){return new Uf(e)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const i=H.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ie.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Md{constructor(e,n){this.persistence=e,this.pi=new Or(r=>xt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=nC(this,n)}static mi(e,n){return new Md(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ie.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nh(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.serializer=e}k(e,n,r,i){const s=new Pf("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(ic)}(e),function(l){l.createObjectStore(xu,{keyPath:ZU}),l.createObjectStore(Nn,{keyPath:ZT,autoIncrement:!0}).createIndex(gs,eI,{unique:!0}),l.createObjectStore(oa)}(e),zI(e),function(l){l.createObjectStore(ss)}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(la),l.deleteObjectStore(aa),l.deleteObjectStore(Is)}(e),zI(e)),o=o.next(()=>function(l){const u=l.store(Is),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ie.min().toTimestamp(),targetCount:0};return u.put(Pd,h)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(Nn).J().next(d=>{l.deleteObjectStore(Nn),l.createObjectStore(Nn,{keyPath:ZT,autoIncrement:!0}).createIndex(gs,eI,{unique:!0});const f=u.store(Nn),g=d.map(T=>f.put(T));return M.waitFor(g)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(ua,{keyPath:l5})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.yi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(bu)}(e),this.wi(s)))),r<7&&i>=7&&(o=o.next(()=>this.Si(s))),r<8&&i>=8&&(o=o.next(()=>this.bi(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.Di(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(xf,{keyPath:u5})})(e),function(l){l.createObjectStore(bf,{keyPath:c5})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(Cf,{keyPath:y5});u.createIndex(sy,v5,{unique:!1}),u.createIndex(Kx,_5,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(Ad,{keyPath:t5});u.createIndex(Ch,n5),u.createIndex(zx,r5)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(ss))),r<14&&i>=14&&(o=o.next(()=>this.Fi(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(g0,{keyPath:h5,autoIncrement:!0}).createIndex(iy,d5,{unique:!1}),l.createObjectStore(ql,{keyPath:f5}).createIndex(Wx,p5,{unique:!1}),l.createObjectStore(Wl,{keyPath:m5}).createIndex(Gx,g5,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(ql).clear()}).next(()=>{n.objectStore(Wl).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(y0,{keyPath:w5})})(e)})),r<18&&i>=18&&OR()&&(o=o.next(()=>{n.objectStore(ql).clear()}).next(()=>{n.objectStore(Wl).clear()})),o}wi(e){let n=0;return e.store(ss).ee((r,i)=>{n+=Od(i)}).next(()=>{const r={byteSize:n};return e.store(bu).put(ry,r)})}yi(e){const n=e.store(xu),r=e.store(Nn);return n.J().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,Ts],[s.userId,s.lastAcknowledgedBatchId]);return r.J(gs,o).next(a=>M.forEach(a,l=>{ne(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=cs(this.serializer,l);return Jb(e,s.userId,u).next(()=>{})}))}))}Si(e){const n=e.store(la),r=e.store(ss);return e.store(Is).get(Pd).next(i=>{const s=[];return r.ee((o,a)=>{const l=new ve(o),u=function(d){return[0,xt(d)]}(l);s.push(n.get(u).next(h=>h?M.resolve():(d=>n.put({targetId:0,path:xt(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}bi(e,n){e.createObjectStore(Cu,{keyPath:a5});const r=n.store(Cu),i=new N0,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:xt(l)})}};return n.store(ss).ee({X:!0},(o,a)=>{const l=new ve(o);return s(l.popLast())}).next(()=>n.store(oa).ee({X:!0},([o,a,l],u)=>{const h=Yn(a);return s(h.popLast())}))}Di(e){const n=e.store(aa);return n.ee((r,i)=>{const s=xl(i),o=Kb(this.serializer,s);return n.put(o)})}Ci(e,n){const r=n.store(ss),i=[];return r.ee((s,o)=>{const a=n.store(Ad),l=function(d){return d.document?new H(ve.fromString(d.document.name).popFirst(5)):d.noDocument?H.fromSegments(d.noDocument.path):d.unknownDocument?H.fromSegments(d.unknownDocument.path):Y(36783)}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>M.waitFor(i))}Fi(e,n){const r=n.store(Nn),i=iC(this.serializer),s=new D0(Uf.mi,this.serializer.yt);return r.J().next(o=>{const a=new Map;return o.forEach(l=>{let u=a.get(l.userId)??ce();cs(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),M.forEach(a,(l,u)=>{const h=new dt(u),d=Lf.wt(this.serializer,h),f=s.getIndexManager(h),g=Ff.wt(h,this.serializer,f,s.referenceDelegate);return new sC(i,g,d,f).recalculateAndSaveOverlaysForDocumentKeys(new oy(n,qt.ce),l).next()})})}}function zI(t){t.createObjectStore(la,{keyPath:s5}).createIndex(m0,o5,{unique:!0}),t.createObjectStore(aa,{keyPath:"targetId"}).createIndex(qx,i5,{unique:!0}),t.createObjectStore(Is)}const Kr="IndexedDbPersistence",fm=18e5,pm=5e3,mm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",j3="main";class O0{constructor(e,n,r,i,s,o,a,l,u,h,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=u,this.Oi=h,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!O0.v())throw new W(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new R3(this,i),this.$i=n+j3,this.serializer=new Gb(l),this.Ui=new Ti(this.$i,this.Ni,new U3(this.serializer)),this.hi=new m3,this.Pi=new I3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iC(this.serializer),this.Ii=new p3,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&Ke(Kr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new W(U.FAILED_PRECONDITION,mm);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new qt(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>eh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(zi(e))return j(Kr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j(Kr,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return fl(e).get(ro).next(n=>M.resolve(this.es(n)))}ts(e){return eh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,fm)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=at(n,ua);return r.J().next(i=>{const s=this.ss(i,fm),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?M.resolve(!0):fl(e).get(ro).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,pm)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new W(U.FAILED_PRECONDITION,mm);return!1}}return!(!this.networkEnabled||!this.inForeground)||eh(e).J().next(r=>this.ss(r,pm).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&j(Kr,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ic,ua],e=>{const n=new oy(e,qt.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>eh(e).J().next(n=>this.ss(n,fm).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Ff.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new T3(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Lf.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){j(Kr,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?I5:l===17?Xx:l===16?T5:l===15?v0:l===14?Yx:l===13?Qx:l===12?E5:l===11?Hx:void Y(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,i,s,a=>(o=new oy(a,this.ci?this.ci.next():qt.ce),n==="readwrite-primary"?this.Hi(o).next(l=>!!l||this.Yi(o)).next(l=>{if(!l)throw Ke(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new W(U.FAILED_PRECONDITION,Fx);return r(o)}).next(l=>this.Xi(o).next(()=>l)):this.Is(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Is(e){return fl(e).get(ro).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,pm)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new W(U.FAILED_PRECONDITION,mm)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fl(e).put(ro,n)}static v(){return Ti.v()}Zi(e){const n=fl(e);return n.get(ro).next(r=>this.es(r)?(j(Kr,"Releasing primary lease."),n.delete(ro)):M.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ke(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;DR()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return j(Kr,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ke(Kr,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ke("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fl(t){return at(t,ic)}function eh(t){return at(t,ua)}function oC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ce(),i=ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new M0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return DR()?8:jx(ot())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new B3;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(po()<=he.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(po()<=he.DEBUG&&j("QueryEngine","Query:",mo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(po()<=he.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(n))):M.resolve())}ys(e,n){if(fI(n))return M.resolve(null);let r=an(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=fy(n,null,"F"),r=an(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ce(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,fy(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return fI(n)||i.isEqual(ie.min())?M.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?M.resolve(null):(po()<=he.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mo(n)),this.vs(e,o,n,Mx(i,sa)).next(a=>a))})}Ds(e,n){let r=new Ie(_b(e));return n.forEach((i,s)=>{ac(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return po()<=he.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",mo(n)),this.ps.getDocumentsMatchingQuery(e,n,hn.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="LocalStore",$3=3e8;class z3{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new be(ae),this.xs=new Or(s=>Ls(s),sc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function lC(t,e,n,r){return new z3(t,e,n,r)}async function uC(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ce();for(const u of i){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function q3(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,f=d.keys();let g=M.resolve();return f.forEach(T=>{g=g.next(()=>h.getEntry(l,T)).next(w=>{const P=u.docVersions.get(T);ne(P!==null,48541),w.version.compareTo(P)<0&&(d.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function cC(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function W3(t,e){const n=te(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((h,d)=>{const f=i.get(d);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Qe.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(d,g),function(w,P,E){return w.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=$3?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,g,h)&&a.push(n.Pi.updateTargetData(s,g))});let l=rn(),u=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(G3(s,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!r.isEqual(ie.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function G3(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=rn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ie.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):j(L0,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function K3(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ts),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ld(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new yr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function va(t,e,n){const r=te(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!zi(o))throw o;j(L0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Ey(t,e,n){const r=te(t);let i=ie.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=te(l),f=d.xs.get(h);return f!==void 0?M.resolve(d.Ms.get(f)):d.Pi.getTargetData(u,h)}(r,o,an(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ie.min(),n?s:ce())).next(a=>(fC(r,vb(e),a),{documents:a,Qs:s})))}function hC(t,e){const n=te(t),r=te(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.At(s,e).next(o=>o?o.target:null))}function dC(t,e){const n=te(t),r=n.Os.get(e)||ie.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ns.getAllFromCollectionGroup(i,e,Mx(r,sa),Number.MAX_SAFE_INTEGER)).then(i=>(fC(n,e,i),i))}function fC(t,e,n){let r=t.Os.get(e)||ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="firestore_clients";function qI(t,e){return`${pC}_${t}_${e}`}const mC="firestore_mutations";function WI(t,e,n){let r=`${mC}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const gC="firestore_targets";function gm(t,e){return`${gC}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn="SharedClientState";class Fd{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new W(i.error.code,i.error.message))),o?new Fd(e,n,i.state,s):(Ke(Hn,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yl{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new W(r.error.code,r.error.message))),s?new Yl(e,r.state,i):(Ke(Hn,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ud{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=I0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Bx(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Ud(e,s):(Ke(Hn,`Failed to parse client data for instance '${e}': ${n}`),null)}}class F0{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new F0(n.clientId,n.onlineState):(Ke(Hn,`Failed to parse online state: ${e}`),null)}}class Ty{constructor(){this.activeTargetIds=I0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ym{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new be(ae),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=qI(this.persistenceKey,this.Js),this.no=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Ty),this.ro=new RegExp(`^${pC}_${o}_([^_]*)$`),this.io=new RegExp(`^${mC}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${gC}_${o}_(\\d+)$`),this.oo=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this._o=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(qI(this.persistenceKey,r));if(i){const s=Ud.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(gm(this.persistenceKey,e));if(i){const s=Yl.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gm(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Po(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return j(Hn,"READ",e,n),n}setItem(e,n){j(Hn,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){j(Hn,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(j(Hn,"EVENT",n.key,n.newValue),n.key===this.eo)return void Ke("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=function(s){let o=qt.ce;if(s!=null)try{const a=JSON.parse(s);ne(typeof a=="number",30636,{So:s}),o=a}catch(a){Ke(Hn,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==qt.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Do(i)))}}}else this.Xs.push(n)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new Fd(this.currentUser,e,n,r),s=WI(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=WI(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=gm(this.persistenceKey,e),s=new Yl(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return Ud.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Fd.Ws(new dt(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Yl.Ws(i,n)}uo(e){return F0.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);j(Hn,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Fo(o,a).then(()=>{this.Zs=r})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=I0();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class yC{constructor(){this.Mo=new Ty,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ty,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="ConnectivityMonitor";class KI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){j(GI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){j(GI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th=null;function Iy(){return th===null?th=function(){return 268435456+Math.round(2147483648*Math.random())}():th++,"0x"+th.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="RestConnection",Q3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Y3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Rd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Iy(),a=this.zo(e,n.toUriEncodedString());j(vm,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),h=Hs(u);return this.Jo(e,a,l,r,h).then(d=>(j(vm,`Received RPC '${e}' ${o}: `,d),d),d=>{throw Os(vm,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=Q3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class J3 extends Y3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Iy();return new Promise((a,l)=>{const u=new Px;u.setWithCredentials(!0),u.listenOnce(Rx.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rh.NO_ERROR:const d=u.getResponseJson();j(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Rh.TIMEOUT:j(Tt,`RPC '${e}' ${o} timed out`),l(new W(U.DEADLINE_EXCEEDED,"Request time out"));break;case Rh.HTTP_ERROR:const f=u.getStatus();if(j(Tt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const T=g==null?void 0:g.error;if(T&&T.status&&T.message){const w=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(y)>=0?y:U.UNKNOWN}(T.status);l(new W(w,T.message))}else l(new W(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(U.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{j(Tt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);j(Tt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}T_(e,n,r){const i=Iy(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Cx(),a=bx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");j(Tt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let f=!1,g=!1;const T=new X3({Yo:P=>{g?j(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(f||(j(Tt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),j(Tt,`RPC '${e}' stream ${i} sending:`,P),d.send(P))},Zo:()=>d.close()}),w=(P,E,y)=>{P.listen(E,v=>{try{y(v)}catch(C){setTimeout(()=>{throw C},0)}})};return w(d,Al.EventType.OPEN,()=>{g||(j(Tt,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),w(d,Al.EventType.CLOSE,()=>{g||(g=!0,j(Tt,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(d))}),w(d,Al.EventType.ERROR,P=>{g||(g=!0,Os(Tt,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),T.a_(new W(U.UNAVAILABLE,"The operation could not be completed")))}),w(d,Al.EventType.MESSAGE,P=>{var E;if(!g){const y=P.data[0];ne(!!y,16349);const v=y,C=(v==null?void 0:v.error)||((E=v[0])==null?void 0:E.error);if(C){j(Tt,`RPC '${e}' stream ${i} received error:`,C);const N=C.status;let V=function(A){const b=Ye[A];if(b!==void 0)return Nb(b)}(N),S=C.message;V===void 0&&(V=U.INTERNAL,S="Unknown error status: "+N+" with message "+C.message),g=!0,T.a_(new W(V,S)),d.close()}else j(Tt,`RPC '${e}' stream ${i} received:`,y),T.u_(y)}}),w(a,xx.STAT_EVENT,P=>{P.stat===ey.PROXY?j(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===ey.NOPROXY&&j(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){return typeof window<"u"?window:null}function Lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t){return new r3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="PersistentStream";class wC{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _C(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Ke(n.toString()),Ke("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new W(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return j(HI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(j(HI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z3 extends wC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=o3(this.serializer,e),r=function(s){if(!("targetChange"in s))return ie.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ie.min():o.readTime?Lt(o.readTime):ie.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=gy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=bd(l)?{documents:jb(s,l)}:{query:Bb(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Ob(s,o.resumeToken);const u=py(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ie.min())>0){a.readTime=ya(s,o.snapshotVersion.toTimestamp());const u=py(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=l3(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=gy(this.serializer),n.removeTarget=e,this.q_(n)}}class e6 extends wC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=a3(e.writeResults,e.commitTime),r=Lt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=gy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Nd(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{}class n6 extends t6{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new W(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,my(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(U.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,my(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class r6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ke(n),this.aa=!1):j("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="RemoteStore";class i6{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ys(this)&&(j(Bs,"Restarting streams for network reachability change."),await async function(l){const u=te(l);u.Ea.add(4),await cc(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Bf(u)}(this))})}),this.Ra=new r6(r,i)}}async function Bf(t){if(Ys(t))for(const e of t.da)await e(!0)}async function cc(t){for(const e of t.da)await e(!1)}function $f(t,e){const n=te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),B0(n)?j0(n):Na(n).O_()&&U0(n,e))}function _a(t,e){const n=te(t),r=Na(n);n.Ia.delete(e),r.O_()&&EC(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ys(n)&&n.Ra.set("Unknown"))}function U0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Na(t).Y_(e)}function EC(t,e){t.Va.Ue(e),Na(t).Z_(e)}function j0(t){t.Va=new Z5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Na(t).start(),t.Ra.ua()}function B0(t){return Ys(t)&&!Na(t).x_()&&t.Ia.size>0}function Ys(t){return te(t).Ea.size===0}function TC(t){t.Va=void 0}async function s6(t){t.Ra.set("Online")}async function o6(t){t.Ia.forEach((e,n)=>{U0(t,e)})}async function a6(t,e){TC(t),B0(t)?(t.Ra.ha(e),j0(t)):t.Ra.set("Unknown")}async function l6(t,e,n){if(t.Ra.set("Online"),e instanceof Db&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){j(Bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jd(t,r)}else if(e instanceof Oh?t.Va.Ze(e):e instanceof Vb?t.Va.st(e):t.Va.tt(e),!n.isEqual(ie.min()))try{const r=await cC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(Qe.EMPTY_BYTE_STRING,h.snapshotVersion)),EC(s,l);const d=new yr(h.target,l,u,h.sequenceNumber);U0(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){j(Bs,"Failed to raise snapshot:",r),await jd(t,r)}}async function jd(t,e,n){if(!zi(e))throw e;t.Ea.add(1),await cc(t),t.Ra.set("Offline"),n||(n=()=>cC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j(Bs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Bf(t)})}function IC(t,e){return e().catch(n=>jd(t,n,e))}async function ka(t){const e=te(t),n=Ni(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ts;for(;u6(e);)try{const i=await K3(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,c6(e,i)}catch(i){await jd(e,i)}SC(e)&&AC(e)}function u6(t){return Ys(t)&&t.Ta.length<10}function c6(t,e){t.Ta.push(e);const n=Ni(t);n.O_()&&n.X_&&n.ea(e.mutations)}function SC(t){return Ys(t)&&!Ni(t).x_()&&t.Ta.length>0}function AC(t){Ni(t).start()}async function h6(t){Ni(t).ra()}async function d6(t){const e=Ni(t);for(const n of t.Ta)e.ea(n.mutations)}async function f6(t,e,n){const r=t.Ta.shift(),i=R0.from(r,e,n);await IC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ka(t)}async function p6(t,e){e&&Ni(t).X_&&await async function(r,i){if(function(o){return Y5(o)&&o!==U.ABORTED}(i.code)){const s=r.Ta.shift();Ni(r).B_(),await IC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ka(r)}}(t,e),SC(t)&&AC(t)}async function QI(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),j(Bs,"RemoteStore received new credentials");const r=Ys(n);n.Ea.add(3),await cc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bf(n)}async function Sy(t,e){const n=te(t);e?(n.Ea.delete(2),await Bf(n)):e||(n.Ea.add(2),await cc(n),n.Ra.set("Unknown"))}function Na(t){return t.ma||(t.ma=function(n,r,i){const s=te(n);return s.sa(),new Z3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:s6.bind(null,t),t_:o6.bind(null,t),r_:a6.bind(null,t),H_:l6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),B0(t)?j0(t):t.Ra.set("Unknown")):(await t.ma.stop(),TC(t))})),t.ma}function Ni(t){return t.fa||(t.fa=function(n,r,i){const s=te(n);return s.sa(),new e6(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:h6.bind(null,t),r_:p6.bind(null,t),ta:d6.bind(null,t),na:f6.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ka(t)):(await t.fa.stop(),t.Ta.length>0&&(j(Bs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new $0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z0(t,e){if(Ke("AsyncQueue",`${e}: ${t}`),zi(t))return new W(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{static emptySet(e){return new Go(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Pl(),this.sortedSet=new be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Go;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.ga=new be(H.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Y(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class wa{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new wa(e,n,Go.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class g6{constructor(){this.queries=XI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=te(n),s=i.queries;i.queries=XI(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new W(U.ABORTED,"Firestore shutting down"))}}function XI(){return new Or(t=>yb(t),Df)}async function PC(t,e){const n=te(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new m6,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=z0(o,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&q0(n)}async function RC(t,e){const n=te(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function y6(t,e){const n=te(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&q0(n)}function v6(t,e,n){const r=te(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function q0(t){t.Ca.forEach(e=>{e.next()})}var Ay,JI;(JI=Ay||(Ay={})).Ma="default",JI.Cache="cache";class xC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ay.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.key=e}}class CC{constructor(e){this.key=e}}class _6{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=_b(e),this.tu=new Go(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new YI,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const f=i.get(h),g=ac(this.query,d)?d:null,T=!!f&&this.mutatedKeys.has(f.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;f&&g?f.data.isEqual(g.data)?T!==w&&(r.track({type:3,doc:g}),P=!0):this.su(f,g)||(r.track({type:2,doc:g}),P=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),P=!0):f&&!g&&(r.track({type:1,doc:f}),P=!0,(l||u)&&(a=!0)),P&&(g?(o=o.add(g),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,d)=>function(g,T){const w=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:P})}};return w(g)-w(T)}(h.type,d.type)||this.eu(h.doc,d.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new wa(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new YI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ce(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new CC(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new bC(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Va="SyncEngine";class w6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class E6{constructor(e){this.key=e,this.hu=!1}}class T6{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Or(a=>yb(a),Df),this.Iu=new Map,this.Eu=new Set,this.du=new be(H.comparator),this.Au=new Map,this.Ru=new V0,this.Vu={},this.mu=new Map,this.fu=js.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I6(t,e,n=!0){const r=zf(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await kC(r,e,n,!0),i}async function S6(t,e){const n=zf(t);await kC(n,e,!0,!1)}async function kC(t,e,n,r){const i=await Ld(t.localStore,an(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await W0(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&$f(t.remoteStore,i),a}async function W0(t,e,n,r,i){t.pu=(d,f,g)=>async function(w,P,E,y){let v=P.view.ru(E);v.Cs&&(v=await Ey(w.localStore,P.query,!1).then(({documents:S})=>P.view.ru(S,v)));const C=y&&y.targetChanges.get(P.targetId),N=y&&y.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(v,w.isPrimaryClient,C,N);return Py(w,P.targetId,V.au),V.snapshot}(t,d,f,g);const s=await Ey(t.localStore,e,!0),o=new _6(e,s.Qs),a=o.ru(s.documents),l=uc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);Py(t,n,u.au);const h=new w6(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function A6(t,e,n){const r=te(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Df(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await va(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_a(r.remoteStore,i.targetId),Ea(r,i.targetId)}).catch($i)):(Ea(r,i.targetId),await va(r.localStore,i.targetId,!0))}async function P6(t,e){const n=te(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_a(n.remoteStore,r.targetId))}async function R6(t,e,n){const r=Q0(t);try{const i=await function(o,a){const l=te(o),u=we.now(),h=a.reduce((g,T)=>g.add(T.key),ce());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let T=rn(),w=ce();return l.Ns.getEntries(g,h).next(P=>{T=P,T.forEach((E,y)=>{y.isValidDocument()||(w=w.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,T)).next(P=>{d=P;const E=[];for(const y of a){const v=H5(y,d.get(y.key).overlayedDocument);v!=null&&E.push(new Mr(y.key,v,ab(v.value.mapValue),Gt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,E,a)}).next(P=>{f=P;const E=P.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(g,P.batchId,E)})}).then(()=>({batchId:f.batchId,changes:Eb(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new be(ae)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await Wi(r,i.changes),await ka(r.remoteStore)}catch(i){const s=z0(i,"Failed to persist write");n.reject(s)}}async function NC(t,e){const n=te(t);try{const r=await W3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ne(o.hu,14607):i.removedDocuments.size>0&&(ne(o.hu,42227),o.hu=!1))}),await Wi(n,r,e)}catch(r){await $i(r)}}function ZI(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=te(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const f of d.Sa)f.va(a)&&(u=!0)}),u&&q0(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function x6(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new be(H.comparator);o=o.insert(s,ze.newNoDocument(s,ie.min()));const a=ce().add(s),l=new lc(ie.min(),new Map,new be(ae),o,a);await NC(r,l),r.du=r.du.remove(s),r.Au.delete(e),H0(r)}else await va(r.localStore,e,!1).then(()=>Ea(r,e,n)).catch($i)}async function b6(t,e){const n=te(t),r=e.batch.batchId;try{const i=await q3(n.localStore,e);K0(n,r,null),G0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wi(n,i)}catch(i){await $i(i)}}async function C6(t,e,n){const r=te(t);try{const i=await function(o,a){const l=te(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(ne(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);K0(r,e,n),G0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wi(r,i)}catch(i){await $i(i)}}function G0(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function K0(t,e,n){const r=te(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ea(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||VC(t,r)})}function VC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(_a(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),H0(t))}function Py(t,e,n){for(const r of n)r instanceof bC?(t.Ru.addReference(r.key,e),k6(t,r)):r instanceof CC?(j(Va,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||VC(t,r.key)):Y(19791,{wu:r})}function k6(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(j(Va,"New document in limbo: "+n),t.Eu.add(r),H0(t))}function H0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new H(ve.fromString(e)),r=t.fu.next();t.Au.set(r,new E6(n)),t.du=t.du.insert(n,r),$f(t.remoteStore,new yr(an(Vf(n.path)),r,"TargetPurposeLimboResolution",qt.ce))}}async function Wi(t,e,n){const r=te(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=M0.As(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const h=te(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>M.forEach(u,f=>M.forEach(f.Es,g=>h.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>M.forEach(f.ds,g=>h.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!zi(d))throw d;j(L0,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const g=h.Ms.get(f),T=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(f,w)}}}(r.localStore,s))}async function N6(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){j(Va,"User change. New user:",e.toKey());const r=await uC(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new W(U.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wi(n,r.Ls)}}function V6(t,e){const n=te(t),r=n.Au.get(e);if(r&&r.hu)return ce().add(r.key);{let i=ce();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function D6(t,e){const n=te(t),r=await Ey(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&Py(n,e.targetId,i.au),i}async function O6(t,e){const n=te(t);return dC(n.localStore,e).then(r=>Wi(n,r))}async function M6(t,e,n,r){const i=te(t),s=await function(a,l){const u=te(a),h=te(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>h.er(d,l).next(f=>f?u.localDocuments.getDocuments(d,f):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await ka(i.remoteStore):n==="acknowledged"||n==="rejected"?(K0(i,e,r||null),G0(i,e),function(a,l){te(te(a).mutationQueue).ir(l)}(i.localStore,e)):Y(6720,"Unknown batchState",{Su:n}),await Wi(i,s)):j(Va,"Cannot apply mutation batch with id: "+e)}async function L6(t,e){const n=te(t);if(zf(n),Q0(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await e1(n,r.toArray());n.gu=!0,await Sy(n.remoteStore,!0);for(const s of i)$f(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ea(n,o),va(n.localStore,o,!0))),_a(n.remoteStore,o)}),await i,await e1(n,r),function(o){const a=te(o);a.Au.forEach((l,u)=>{_a(a.remoteStore,u)}),a.Ru.Jr(),a.Au=new Map,a.du=new be(H.comparator)}(n),n.gu=!1,await Sy(n.remoteStore,!1)}}async function e1(t,e,n){const r=te(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Ld(r.localStore,an(l[0]));for(const u of l){const h=r.Tu.get(u),d=await D6(r,h);d.snapshot&&s.push(d.snapshot)}}else{const u=await hC(r.localStore,o);a=await Ld(r.localStore,u),await W0(r,DC(u),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function DC(t){return mb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function F6(t){return function(n){return te(te(n).persistence).Ts()}(te(t).localStore)}async function U6(t,e,n,r){const i=te(t);if(i.gu)return void j(Va,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await dC(i.localStore,vb(s[0])),a=lc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Qe.EMPTY_BYTE_STRING);await Wi(i,o,a);break}case"rejected":await va(i.localStore,e,!0),Ea(i,e,r);break;default:Y(64155,n)}}async function j6(t,e,n){const r=zf(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){j(Va,"Adding an already active target "+i);continue}const s=await hC(r.localStore,i),o=await Ld(r.localStore,s);await W0(r,DC(s),o.targetId,!1,o.resumeToken),$f(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await va(r.localStore,i,!1).then(()=>{_a(r.remoteStore,i),Ea(r,i)}).catch($i)}}function zf(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x6.bind(null,e),e.Pu.H_=y6.bind(null,e.eventManager),e.Pu.yu=v6.bind(null,e.eventManager),e}function Q0(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C6.bind(null,e),e}class Mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return lC(this.persistence,new aC,e.initialUser,this.serializer)}Cu(e){return new D0(Uf.mi,this.serializer)}Du(e){return new yC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mu.provider={build:()=>new Mu};class B6 extends Mu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ne(this.persistence.referenceDelegate instanceof Md,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new tC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?It.withCacheSize(this.cacheSizeBytes):It.DEFAULT;return new D0(r=>Md.mi(r,n),this.serializer)}}class $6 extends Mu{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Q0(this.xu.syncEngine),await ka(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return lC(this.persistence,new aC,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new tC(r,e.asyncQueue,n)}Mu(e,n){const r=new XU(n,this.persistence);return new YU(e.asyncQueue,r)}Cu(e){const n=oC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?It.withCacheSize(this.cacheSizeBytes):It.DEFAULT;return new O0(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,vC(),Lh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new yC}}class z6 extends $6{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof ym&&(this.sharedClientState.syncEngine={Co:M6.bind(null,n),vo:U6.bind(null,n),Fo:j6.bind(null,n),Ts:F6.bind(null,n),Do:O6.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji(async r=>{await L6(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Du(e){const n=vC();if(!ym.v(n))throw new W(U.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=oC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ym(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Bd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ZI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=N6.bind(null,this.syncEngine),await Sy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g6}()}createDatastore(e){const n=jf(e.databaseInfo.databaseId),r=function(s){return new J3(s)}(e.databaseInfo);return function(s,o,a,l){return new n6(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new i6(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>ZI(this.syncEngine,n,0),function(){return KI.v()?new KI:new H3}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,h){const d=new T6(i,s,o,a,l,u);return h&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=te(i);j(Bs,"RemoteStore shutting down."),s.Ea.add(5),await cc(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Bd.provider={build:()=>new Bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ke("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class q6{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=d0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{j(Vi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(j(Vi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=z0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _m(t,e){t.asyncQueue.verifyOperationInProgress(),j(Vi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await uC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await W6(t);j(Vi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>QI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>QI(e.remoteStore,i)),t._onlineComponents=e}async function W6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j(Vi,"Using user provided OfflineComponentProvider");try{await _m(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Os("Error using user provided cache. Falling back to memory cache: "+n),await _m(t,new Mu)}}else j(Vi,"Using default OfflineComponentProvider"),await _m(t,new B6(void 0));return t._offlineComponents}async function MC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j(Vi,"Using user provided OnlineComponentProvider"),await t1(t,t._uninitializedComponentsProvider._online)):(j(Vi,"Using default OnlineComponentProvider"),await t1(t,new Bd))),t._onlineComponents}function G6(t){return MC(t).then(e=>e.syncEngine)}async function LC(t){const e=await MC(t),n=e.eventManager;return n.onListen=I6.bind(null,e.syncEngine),n.onUnlisten=A6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=P6.bind(null,e.syncEngine),n}function K6(t,e,n={}){const r=new er;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new OC({next:f=>{h.Nu(),o.enqueueAndForget(()=>RC(s,d));const g=f.docs.has(a);!g&&f.fromCache?u.reject(new W(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?u.reject(new W(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new xC(Vf(a.path),h,{includeMetadataChanges:!0,qa:!0});return PC(s,d)}(await LC(t),t.asyncQueue,e,n,r)),r.promise}function H6(t,e,n={}){const r=new er;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const h=new OC({next:f=>{h.Nu(),o.enqueueAndForget(()=>RC(s,d)),f.fromCache&&l.source==="server"?u.reject(new W(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new xC(a,h,{includeMetadataChanges:!0,qa:!0});return PC(s,d)}(await LC(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="firestore.googleapis.com",r1=!0;class i1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UC,this.ssl=r1}else this.host=e.host,this.ssl=e.ssl??r1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Xb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S3)throw new W(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LU;switch(r.type){case"firstParty":return new BU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=n1.get(n);r&&(j("ComponentProvider","Removing Datastore"),n1.delete(n),r.terminate())}(this),Promise.resolve()}}function jC(t,e,n,r={}){var u;t=sr(t,qf);const i=Hs(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(Yv(`https://${a}`),Xv("Firestore",!0)),s.host!==UC&&s.host!==a&&Os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!xi(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=dt.MOCK_USER;else{h=NR(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new W(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new dt(f)}t._authCredentials=new FU(new Nx(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Da(this.firestore,e,this._query)}}class He{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new He(this.firestore,e,this._key)}toJSON(){return{type:He._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(rc(n,He._jsonSchema))return new He(e,r||null,new H(ve.fromString(n.referencePath)))}}He._jsonSchemaVersion="firestore/documentReference/1.0",He._jsonSchema={type:et("string",He._jsonSchemaVersion),referencePath:et("string")};class Ii extends Da{constructor(e,n,r){super(e,n,Vf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new He(this.firestore,null,new H(e))}withConverter(e){return new Ii(this.firestore,e,this._path)}}function wm(t,e,...n){if(t=Re(t),Dx("collection","path",e),t instanceof qf){const r=ve.fromString(e,...n);return HT(r),new Ii(t,null,r)}{if(!(t instanceof He||t instanceof Ii))throw new W(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return HT(r),new Ii(t.firestore,null,r)}}function Em(t,e,...n){if(t=Re(t),arguments.length===1&&(e=d0.newId()),Dx("doc","path",e),t instanceof qf){const r=ve.fromString(e,...n);return KT(r),new He(t,null,new H(r))}{if(!(t instanceof He||t instanceof Ii))throw new W(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return KT(r),new He(t.firestore,t instanceof Ii?t.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="AsyncQueue";class o1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _C(this,"async_queue_retry"),this._c=()=>{const r=Lh();r&&j(s1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Lh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Lh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new er;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zi(e))throw e;j(s1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ke("INTERNAL UNHANDLED ERROR: ",a1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=$0.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Y(47125,{Pc:a1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function a1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=-1;class Oa extends qf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new o1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o1(e),this._firestoreClient=void 0,await e}}}function Y6(t,e){const n=typeof t=="object"?t:Xu(),r=typeof t=="string"?t:e||Rd,i=Nr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=bR("firestore");s&&jC(i,...s)}return i}function Y0(t){if(t._terminated)throw new W(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BC(t),t._firestoreClient}function BC(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,h){return new A5(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,FC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new q6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}async function X6(t){Os("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();J6(t,Bd.provider,{build:n=>new z6(n,e.cacheSizeBytes)})}function J6(t,e,n){if((t=sr(t,Oa))._firestoreClient||t._terminated)throw new W(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new W(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},BC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._byteString=e}static fromBase64String(e){try{return new En(Qe.fromBase64String(e))}catch(n){throw new W(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new En(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:En._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rc(e,En._jsonSchema))return En.fromBase64String(e.bytes)}}En._jsonSchemaVersion="firestore/bytes/1.0",En._jsonSchema={type:et("string",En._jsonSchemaVersion),bytes:et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Le(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:tr._jsonSchemaVersion}}static fromJSON(e){if(rc(e,tr._jsonSchema))return new tr(e.latitude,e.longitude)}}tr._jsonSchemaVersion="firestore/geoPoint/1.0",tr._jsonSchema={type:et("string",tr._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:nr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rc(e,nr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new nr(e.vectorValues);throw new W(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}nr._jsonSchemaVersion="firestore/vectorValue/1.0",nr._jsonSchema={type:et("string",nr._jsonSchemaVersion),vectorValues:et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=/^__.*__$/;class ej{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ca(e,this.data,n,this.fieldTransforms)}}class $C{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:t})}}class X0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new X0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $d(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(zC(this.Ac)&&Z6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jf(e)}Cc(e,n,r,i=!1){return new X0({Ac:e,methodName:n,Dc:r,path:Le.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J0(t){const e=t._freezeSettings(),n=jf(t._databaseId);return new tj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nj(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);e_("Data must be an object, but it was:",o,r);const a=qC(r,o);let l,u;if(s.merge)l=new Wt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Ry(e,d,n);if(!o.contains(f))throw new W(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);GC(h,f)||h.push(f)}l=new Wt(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new ej(new Pt(a),l,u)}class Kf extends Gf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kf}}class Z0 extends Gf{_toFieldTransform(e){return new xb(e.path,new pa)}isEqual(e){return e instanceof Z0}}function rj(t,e,n,r){const i=t.Cc(1,e,n);e_("Data must be an object, but it was:",i,r);const s=[],o=Pt.empty();qi(r,(l,u)=>{const h=t_(e,l,n);u=Re(u);const d=i.yc(h);if(u instanceof Kf)s.push(h);else{const f=hc(u,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new Wt(s);return new $C(o,a,i.fieldTransforms)}function ij(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[Ry(e,r,n)],l=[i];if(s.length%2!=0)throw new W(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Ry(e,s[f])),l.push(s[f+1]);const u=[],h=Pt.empty();for(let f=a.length-1;f>=0;--f)if(!GC(u,a[f])){const g=a[f];let T=l[f];T=Re(T);const w=o.yc(g);if(T instanceof Kf)u.push(g);else{const P=hc(T,w);P!=null&&(u.push(g),h.set(g,P))}}const d=new Wt(u);return new $C(h,d,o.fieldTransforms)}function sj(t,e,n,r=!1){return hc(n,t.Cc(r?4:3,e))}function hc(t,e){if(WC(t=Re(t)))return e_("Unsupported field value:",e,t),qC(t,e);if(t instanceof Gf)return function(r,i){if(!zC(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=hc(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Re(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=we.fromDate(r);return{timestampValue:ya(i.serializer,s)}}if(r instanceof we){const s=new we(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ya(i.serializer,s)}}if(r instanceof tr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof En)return{bytesValue:Ob(i.serializer,r._byteString)};if(r instanceof He){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:C0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof nr)return function(o,a){return{mapValue:{fields:{[w0]:{stringValue:E0},[ca]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return S0(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Af(r)}`)}(t,e)}function qC(t,e){const n={};return Jx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(t,(r,i)=>{const s=hc(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function WC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof we||t instanceof tr||t instanceof En||t instanceof He||t instanceof Gf||t instanceof nr)}function e_(t,e,n){if(!WC(n)||!Ox(n)){const r=Af(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ry(t,e,n){if((e=Re(e))instanceof Wf)return e._internalPath;if(typeof e=="string")return t_(t,e);throw $d("Field path arguments must be of type string or ",t,!1,void 0,n)}const oj=new RegExp("[~\\*/\\[\\]]");function t_(t,e,n){if(e.search(oj)>=0)throw $d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wf(...e.split("."))._internalPath}catch{throw $d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $d(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new W(U.INVALID_ARGUMENT,a+t+l)}function GC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(n_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aj extends KC{data(){return super.data()}}function n_(t,e){return typeof e=="string"?t_(t,e):e instanceof Wf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r_{}class uj extends r_{}function Tm(t,e,...n){let r=[];e instanceof r_&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof i_).length,a=s.filter(l=>l instanceof Hf).length;if(o>1||o>0&&a>0)throw new W(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Hf extends uj{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hf(e,n,r)}_apply(e){const n=this._parse(e);return HC(e._query,n),new Da(e.firestore,e.converter,dy(e._query,n))}_parse(e){const n=J0(e.firestore);return function(s,o,a,l,u,h,d){let f;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){u1(d,h);const T=[];for(const w of d)T.push(l1(l,s,w));f={arrayValue:{values:T}}}else f=l1(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||u1(d,h),f=sj(a,o,d,h==="in"||h==="not-in");return fe.create(u,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Im(t,e,n){const r=e,i=n_("where",t);return Hf._create(i,r,n)}class i_ extends r_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new i_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ee.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)HC(o,l),o=dy(o,l)}(e._query,n),new Da(e.firestore,e.converter,dy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function l1(t,e,n){if(typeof(n=Re(n))=="string"){if(n==="")throw new W(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gb(e)&&n.indexOf("/")!==-1)throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!H.isDocumentKey(r))throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vu(t,new H(r))}if(n instanceof He)return Vu(t,n._key);throw new W(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Af(n)}.`)}function u1(t,e){if(!Array.isArray(t)||t.length===0)throw new W(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HC(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cj{convertValue(e,n="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ca].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>De(o.doubleValue));return new nr(n)}convertGeoPoint(e){return new tr(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){const n=xr(e);return new we(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);ne(Wb(r),9688,{name:e});const i=new Ms(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||Ke(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class bl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class As extends KC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(n_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=As._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}As._jsonSchemaVersion="firestore/documentSnapshot/1.0",As._jsonSchema={type:et("string",As._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};class Fh extends As{data(e={}){return super.data(e)}}class Ko{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fh(this._firestore,this._userDataWriter,r.key,r,new bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Fh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Fh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:dj(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=d0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t){t=sr(t,He);const e=sr(t.firestore,Oa);return K6(Y0(e),t._key).then(n=>gj(e,t,n))}Ko._jsonSchemaVersion="firestore/querySnapshot/1.0",Ko._jsonSchema={type:et("string",Ko._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};class QC extends cj{constructor(e){super(),this.firestore=e}convertBytes(e){return new En(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,n)}}function Sm(t){t=sr(t,Da);const e=sr(t.firestore,Oa),n=Y0(e),r=new QC(e);return lj(t._query),H6(n,t._query).then(i=>new Ko(e,r,t,i))}function pj(t,e,n){t=sr(t,He);const r=sr(t.firestore,Oa),i=hj(t.converter,e,n);return YC(r,[nj(J0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Gt.none())])}function mj(t,e,n,...r){t=sr(t,He);const i=sr(t.firestore,Oa),s=J0(i);let o;return o=typeof(e=Re(e))=="string"||e instanceof Wf?ij(s,"updateDoc",t._key,e,n,r):rj(s,"updateDoc",t._key,e),YC(i,[o.toMutation(t._key,Gt.exists(!0))])}function YC(t,e){return function(r,i){const s=new er;return r.asyncQueue.enqueueAndForget(async()=>R6(await G6(r),i,s)),s.promise}(Y0(t),e)}function gj(t,e,n){const r=n.docs.get(e._key),i=new QC(t);return new As(t,i,e._key,r,new bl(n.hasPendingWrites,n.fromCache),e.converter)}function pl(){return new Z0("serverTimestamp")}(function(e,n=!0){(function(i){ba=i})(Qs),Pn(new cn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Oa(new UU(r.getProvider("auth-internal")),new $U(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new W(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ms(u.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Rt(zT,qT,e),Rt(zT,qT,"esm2020")})();var yj="firebase",vj="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt(yj,vj,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="firebasestorage.googleapis.com",_j="storageBucket",wj=2*60*1e3,Ej=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Rn{constructor(e,n,r=0){super(Am(e),`Firebase Storage: ${n} (${Am(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ur.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Am(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ar;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ar||(ar={}));function Am(t){return"storage/"+t}function Tj(){const t="An unknown error occurred, please check the error payload for server response.";return new ur(ar.UNKNOWN,t)}function Ij(){return new ur(ar.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Sj(){return new ur(ar.CANCELED,"User canceled the upload/download.")}function Aj(t){return new ur(ar.INVALID_URL,"Invalid URL '"+t+"'.")}function Pj(t){return new ur(ar.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function c1(t){return new ur(ar.INVALID_ARGUMENT,t)}function JC(){return new ur(ar.APP_DELETED,"The Firebase app was deleted.")}function Rj(t){return new ur(ar.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ln.makeFromUrl(e,n)}catch{return new Ln(e,"")}if(r.path==="")return r;throw Pj(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${i}/o${f}`,"i"),T={bucket:1,path:3},w=n===XC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",E=new RegExp(`^https?://${w}/${i}/${P}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:g,indices:T,postModify:u},{regex:E,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<v.length;C++){const N=v[C],V=N.regex.exec(e);if(V){const S=V[N.indices.bucket];let _=V[N.indices.path];_||(_=""),r=new Ln(S,_),N.postModify(r);break}}if(r==null)throw Aj(e);return r}}class xj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...P){u||(u=!0,e.apply(null,P))}function d(P){i=setTimeout(()=>{i=null,t(g,l())},P)}function f(){s&&clearTimeout(s)}function g(P,...E){if(u){f();return}if(P){f(),h.call(null,P,...E);return}if(l()||o){f(),h.call(null,P,...E);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,d(v)}let T=!1;function w(P){T||(T=!0,f(),!u&&(i!==null?(P||(a=2),clearTimeout(i),d(0)):P||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,w(!0)},n),w}function Cj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t){return t!==void 0}function h1(t,e,n,r){if(r<e)throw c1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw c1(`Invalid value for '${t}'. Expected ${n} or less.`)}function Nj(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var zd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(zd||(zd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n,r,i,s,o,a,l,u,h,d,f=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,w)=>{this.resolve_=T,this.reject_=w,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new nh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===zd.NO_ERROR,l=s.getStatus();if(!a||Vj(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===zd.ABORT;r(!1,new nh(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new nh(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());kj(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Tj();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?JC():Sj();o(l)}else{const l=Ij();o(l)}};this.canceled_?n(!1,new nh(!1,null,!0)):this.backoffId_=bj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Cj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Oj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Mj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Lj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Fj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Uj(t,e,n,r,i,s,o=!0,a=!1){const l=Nj(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return Lj(h,e),Oj(h,n),Mj(h,s),Fj(h,r),new Dj(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Bj(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n){this._service=e,n instanceof Ln?this._location=n:this._location=Ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new qd(e,n)}get root(){const e=new Ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bj(this._location.path)}get storage(){return this._service}get parent(){const e=jj(this._location.path);if(e===null)return null;const n=new Ln(this._location.bucket,e);return new qd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Rj(e)}}function d1(t,e){const n=e==null?void 0:e[_j];return n==null?null:Ln.makeFromBucketSpec(n,t)}function $j(t,e,n,r={}){t.host=`${e}:${n}`;const i=Hs(e);i&&(Yv(`https://${t.host}/b`),Xv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:NR(s,t.app.options.projectId))}class zj{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=XC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wj,this._maxUploadRetryTime=Ej,this._requests=new Set,i!=null?this._bucket=Ln.makeFromBucketSpec(i,this._host):this._bucket=d1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ln.makeFromBucketSpec(this._url,e):this._bucket=d1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){h1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){h1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qd(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new xj(JC());{const o=Uj(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const f1="@firebase/storage",p1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="storage";function qj(t=Xu(),e){t=Re(t);const r=Nr(t,ZC).getImmediate({identifier:e}),i=bR("storage");return i&&ek(r,...i),r}function ek(t,e,n,r={}){$j(t,e,n,r)}function Wj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new zj(n,r,i,e,Qs)}function Gj(){Pn(new cn(ZC,Wj,"PUBLIC").setMultipleInstances(!0)),Rt(f1,p1,""),Rt(f1,p1,"esm2020")}Gj();const tk="@firebase/installations",s_="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=1e4,rk=`w:${s_}`,ik="FIS_v2",Kj="https://firebaseinstallations.googleapis.com/v1",Hj=60*60*1e3,Qj="installations",Yj="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$s=new Bi(Qj,Yj,Xj);function sk(t){return t instanceof Rn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok({projectId:t}){return`${Kj}/projects/${t}/installations`}function ak(t){return{token:t.token,requestStatus:2,expiresIn:Zj(t.expiresIn),creationTime:Date.now()}}async function lk(t,e){const r=(await e.json()).error;return $s.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function uk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Jj(t,{refreshToken:e}){const n=uk(t);return n.append("Authorization",eB(e)),n}async function ck(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Zj(t){return Number(t.replace("s","000"))}function eB(t){return`${ik} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tB({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=ok(t),i=uk(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:ik,appId:t.appId,sdkVersion:rk},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await ck(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:ak(u.authToken)}}else throw await lk("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rB=/^[cdef][\w-]{21}$/,xy="";function iB(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=sB(t);return rB.test(n)?n:xy}catch{return xy}}function sB(t){return nB(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=new Map;function fk(t,e){const n=Qf(t);pk(n,e),oB(n,e)}function pk(t,e){const n=dk.get(t);if(n)for(const r of n)r(e)}function oB(t,e){const n=aB();n&&n.postMessage({key:t,fid:e}),lB()}let ys=null;function aB(){return!ys&&"BroadcastChannel"in self&&(ys=new BroadcastChannel("[Firebase] FID Change"),ys.onmessage=t=>{pk(t.data.key,t.data.fid)}),ys}function lB(){dk.size===0&&ys&&(ys.close(),ys=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB="firebase-installations-database",cB=1,zs="firebase-installations-store";let Pm=null;function o_(){return Pm||(Pm=FR(uB,cB,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(zs)}}})),Pm}async function Wd(t,e){const n=Qf(t),i=(await o_()).transaction(zs,"readwrite"),s=i.objectStore(zs),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&fk(t,e.fid),e}async function mk(t){const e=Qf(t),r=(await o_()).transaction(zs,"readwrite");await r.objectStore(zs).delete(e),await r.done}async function Yf(t,e){const n=Qf(t),i=(await o_()).transaction(zs,"readwrite"),s=i.objectStore(zs),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&fk(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a_(t){let e;const n=await Yf(t.appConfig,r=>{const i=hB(r),s=dB(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===xy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function hB(t){const e=t||{fid:iB(),registrationStatus:0};return gk(e)}function dB(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject($s.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=fB(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:pB(t)}:{installationEntry:e}}async function fB(t,e){try{const n=await tB(t,e);return Wd(t.appConfig,n)}catch(n){throw sk(n)&&n.customData.serverCode===409?await mk(t.appConfig):await Wd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function pB(t){let e=await m1(t.appConfig);for(;e.registrationStatus===1;)await hk(100),e=await m1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await a_(t);return r||n}return e}function m1(t){return Yf(t,e=>{if(!e)throw $s.create("installation-not-found");return gk(e)})}function gk(t){return mB(t)?{fid:t.fid,registrationStatus:0}:t}function mB(t){return t.registrationStatus===1&&t.registrationTime+nk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gB({appConfig:t,heartbeatServiceProvider:e},n){const r=yB(t,n),i=Jj(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:rk,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await ck(()=>fetch(r,a));if(l.ok){const u=await l.json();return ak(u)}else throw await lk("Generate Auth Token",l)}function yB(t,{fid:e}){return`${ok(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l_(t,e=!1){let n;const r=await Yf(t.appConfig,s=>{if(!yk(s))throw $s.create("not-registered");const o=s.authToken;if(!e&&wB(o))return s;if(o.requestStatus===1)return n=vB(t,e),s;{if(!navigator.onLine)throw $s.create("app-offline");const a=TB(s);return n=_B(t,a),a}});return n?await n:r.authToken}async function vB(t,e){let n=await g1(t.appConfig);for(;n.authToken.requestStatus===1;)await hk(100),n=await g1(t.appConfig);const r=n.authToken;return r.requestStatus===0?l_(t,e):r}function g1(t){return Yf(t,e=>{if(!yk(e))throw $s.create("not-registered");const n=e.authToken;return IB(n)?{...e,authToken:{requestStatus:0}}:e})}async function _B(t,e){try{const n=await gB(t,e),r={...e,authToken:n};return await Wd(t.appConfig,r),n}catch(n){if(sk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await mk(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Wd(t.appConfig,r)}throw n}}function yk(t){return t!==void 0&&t.registrationStatus===2}function wB(t){return t.requestStatus===2&&!EB(t)}function EB(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Hj}function TB(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function IB(t){return t.requestStatus===1&&t.requestTime+nk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SB(t){const e=t,{installationEntry:n,registrationPromise:r}=await a_(e);return r?r.catch(console.error):l_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AB(t,e=!1){const n=t;return await PB(n),(await l_(n,e)).token}async function PB(t){const{registrationPromise:e}=await a_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(t){if(!t||!t.options)throw Rm("App Configuration");if(!t.name)throw Rm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Rm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Rm(t){return $s.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="installations",xB="installations-internal",bB=t=>{const e=t.getProvider("app").getImmediate(),n=RB(e),r=Nr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},CB=t=>{const e=t.getProvider("app").getImmediate(),n=Nr(e,vk).getImmediate();return{getId:()=>SB(n),getToken:i=>AB(n,i)}};function kB(){Pn(new cn(vk,bB,"PUBLIC")),Pn(new cn(xB,CB,"PRIVATE"))}kB();Rt(tk,s_);Rt(tk,s_,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="analytics",NB="firebase_id",VB="origin",DB=60*1e3,OB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",u_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft=new Yu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ln=new Bi("analytics","Analytics",MB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LB(t){if(!t.startsWith(u_)){const e=ln.create("invalid-gtag-resource",{gtagURL:t});return Ft.warn(e.message),""}return t}function _k(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function FB(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function UB(t,e){const n=FB("firebase-js-sdk-policy",{createScriptURL:LB}),r=document.createElement("script"),i=`${u_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function jB(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function BB(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await _k(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){Ft.error(a)}t("config",i,s)}async function $B(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await _k(n);for(const l of o){const u=a.find(d=>d.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Ft.error(s)}}function zB(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await $B(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await BB(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Ft.error(a)}}return i}function qB(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=zB(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function WB(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(u_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB=30,KB=1e3;class HB{constructor(e={},n=KB){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const wk=new HB;function QB(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function YB(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:QB(n)},i=OB.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let a="";try{const l=await s.json();(o=l.error)!=null&&o.message&&(a=l.error.message)}catch{}throw ln.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function XB(t,e=wk,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw ln.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ln.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new e9;return setTimeout(async()=>{a.abort()},n!==void 0?n:DB),Ek({appId:r,apiKey:i,measurementId:s},o,a,e)}async function Ek(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=wk){var a;const{appId:s,measurementId:o}=t;try{await JB(r,e)}catch(l){if(o)return Ft.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:o};throw l}try{const l=await YB(t);return i.deleteThrottleMetadata(s),l}catch(l){const u=l;if(!ZB(u)){if(i.deleteThrottleMetadata(s),o)return Ft.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw l}const h=Number((a=u==null?void 0:u.customData)==null?void 0:a.httpStatus)===503?dT(n,i.intervalMillis,GB):dT(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(s,d),Ft.debug(`Calling attemptFetch again in ${h} millis`),Ek(t,d,r,i)}}function JB(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(ln.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ZB(t){if(!(t instanceof Rn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class e9{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function t9(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}async function n9(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r9(){if(Qu())try{await Tf()}catch(t){return Ft.warn(ln.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ft.warn(ln.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function i9(t,e,n,r,i,s,o){const a=XB(t);a.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Ft.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Ft.error(f)),e.push(a);const l=r9().then(f=>{if(f)return r.getId()}),[u,h]=await Promise.all([a,l]);WB(s)||UB(s,u.measurementId),i("js",new Date);const d=(o==null?void 0:o.config)??{};return d[VB]="firebase",d.update=!0,h!=null&&(d[NB]=h),i("config",u.measurementId,d),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e){this.app=e}_delete(){return delete Ho[this.app.options.appId],Promise.resolve()}}let Ho={},y1=[];const v1={};let xm="dataLayer",o9="gtag",_1,c_,w1=!1;function a9(){const t=[];if(Jv()&&t.push("This is a browser extension environment."),Zv()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=ln.create("invalid-analytics-context",{errorInfo:e});Ft.warn(n.message)}}function l9(t,e,n){a9();const r=t.options.appId;if(!r)throw ln.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ft.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ln.create("no-api-key");if(Ho[r]!=null)throw ln.create("already-exists",{id:r});if(!w1){jB(xm);const{wrappedGtag:s,gtagCore:o}=qB(Ho,y1,v1,xm,o9);c_=s,_1=o,w1=!0}return Ho[r]=i9(t,y1,v1,e,_1,xm,n),new s9(t)}function u9(t=Xu()){t=Re(t);const e=Nr(t,Gd);return e.isInitialized()?e.getImmediate():c9(t)}function c9(t,e={}){const n=Nr(t,Gd);if(n.isInitialized()){const i=n.getImmediate();if(xi(e,n.getOptions()))return i;throw ln.create("already-initialized")}return n.initialize({options:e})}async function Tk(){if(Jv()||!Zv()||!Qu())return!1;try{return await Tf()}catch{return!1}}function h9(t,e,n){t=Re(t),n9(c_,Ho[t.app.options.appId],e,n).catch(r=>Ft.error(r))}function d9(t,e,n,r){t=Re(t),t9(c_,Ho[t.app.options.appId],e,n,r).catch(i=>Ft.error(i))}const E1="@firebase/analytics",T1="0.10.19";function f9(){Pn(new cn(Gd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return l9(r,i,n)},"PUBLIC")),Pn(new cn("analytics-internal",t,"PRIVATE")),Rt(E1,T1),Rt(E1,T1,"esm2020");function t(e){try{const n=e.getProvider(Gd).getImmediate();return{logEvent:(r,i,s)=>d9(n,r,i,s),setUserProperties:(r,i)=>h9(n,r,i)}}catch(n){throw ln.create("interop-component-reg-failed",{reason:n})}}}f9();var by,I1,Xf=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Ik=function(t){if(document.readyState==="loading")return"loading";var e=Xf();if(e){if(t<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||t<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||t<e.domComplete)return"dom-content-loaded"}return"complete"},p9=function(t){var e=t.nodeName;return t.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},h_=function(t,e){var n="";try{for(;t&&t.nodeType!==9;){var r=t,i=r.id?"#"+r.id:p9(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(e||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;t=r.parentNode}}catch{}return n},Sk=-1,m9=function(){return Sk},dc=function(t){addEventListener("pageshow",function(e){e.persisted&&(Sk=e.timeStamp,t(e))},!0)},d_=function(){var t=Xf();return t&&t.activationStart||0},Di=function(t,e){var n=Xf(),r="navigate";return m9()>=0?r="back-forward-cache":n&&(document.prerendering||d_()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Ma=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){e(i.getEntries())})});return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch{}},Oi=function(t,e,n,r){var i,s;return function(o){e.value>=0&&(o||r)&&((s=e.value-(i||0))||i===void 0)&&(i=e.value,e.delta=s,e.rating=function(a,l){return a>l[1]?"poor":a>l[0]?"needs-improvement":"good"}(e.value,n),t(e))}},f_=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},Jf=function(t){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&t()})},p_=function(t){var e=!1;return function(){e||(t(),e=!0)}},No=-1,S1=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Kd=function(t){document.visibilityState==="hidden"&&No>-1&&(No=t.type==="visibilitychange"?t.timeStamp:0,g9())},A1=function(){addEventListener("visibilitychange",Kd,!0),addEventListener("prerenderingchange",Kd,!0)},g9=function(){removeEventListener("visibilitychange",Kd,!0),removeEventListener("prerenderingchange",Kd,!0)},Ak=function(){return No<0&&(No=S1(),A1(),dc(function(){setTimeout(function(){No=S1(),A1()},0)})),{get firstHiddenTime(){return No}}},m_=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()},P1=[1800,3e3],y9=function(t,e){e=e||{},m_(function(){var n,r=Ak(),i=Di("FCP"),s=Ma("paint",function(o){o.forEach(function(a){a.name==="first-contentful-paint"&&(s.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-d_(),0),i.entries.push(a),n(!0)))})});s&&(n=Oi(t,i,P1,e.reportAllChanges),dc(function(o){i=Di("FCP"),n=Oi(t,i,P1,e.reportAllChanges),f_(function(){i.value=performance.now()-o.timeStamp,n(!0)})}))})},R1=[.1,.25],v9=function(t,e){(function(n,r){r=r||{},y9(p_(function(){var i,s=Di("CLS",0),o=0,a=[],l=function(h){h.forEach(function(d){if(!d.hadRecentInput){var f=a[0],g=a[a.length-1];o&&d.startTime-g.startTime<1e3&&d.startTime-f.startTime<5e3?(o+=d.value,a.push(d)):(o=d.value,a=[d])}}),o>s.value&&(s.value=o,s.entries=a,i())},u=Ma("layout-shift",l);u&&(i=Oi(n,s,R1,r.reportAllChanges),Jf(function(){l(u.takeRecords()),i(!0)}),dc(function(){o=0,s=Di("CLS",0),i=Oi(n,s,R1,r.reportAllChanges),f_(function(){return i()})}),setTimeout(i,0))}))})(function(n){var r=function(i){var s,o={};if(i.entries.length){var a=i.entries.reduce(function(u,h){return u&&u.value>h.value?u:h});if(a&&a.sources&&a.sources.length){var l=(s=a.sources).find(function(u){return u.node&&u.node.nodeType===1})||s[0];l&&(o={largestShiftTarget:h_(l.node),largestShiftTime:a.startTime,largestShiftValue:a.value,largestShiftSource:l,largestShiftEntry:a,loadState:Ik(a.startTime)})}}return Object.assign(i,{attribution:o})}(n);t(r)},e)},Pk=0,bm=1/0,rh=0,_9=function(t){t.forEach(function(e){e.interactionId&&(bm=Math.min(bm,e.interactionId),rh=Math.max(rh,e.interactionId),Pk=rh?(rh-bm)/7+1:0)})},Rk=function(){return by?Pk:performance.interactionCount||0},w9=function(){"interactionCount"in performance||by||(by=Ma("event",_9,{type:"event",buffered:!0,durationThreshold:0}))},Vn=[],Xl=new Map,xk=0,E9=function(){var t=Math.min(Vn.length-1,Math.floor((Rk()-xk)/50));return Vn[t]},bk=[],T9=function(t){if(bk.forEach(function(i){return i(t)}),t.interactionId||t.entryType==="first-input"){var e=Vn[Vn.length-1],n=Xl.get(t.interactionId);if(n||Vn.length<10||t.duration>e.latency){if(n)t.duration>n.latency?(n.entries=[t],n.latency=t.duration):t.duration===n.latency&&t.startTime===n.entries[0].startTime&&n.entries.push(t);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};Xl.set(r.id,r),Vn.push(r)}Vn.sort(function(i,s){return s.latency-i.latency}),Vn.length>10&&Vn.splice(10).forEach(function(i){return Xl.delete(i.id)})}}},g_=function(t){var e=self.requestIdleCallback||self.setTimeout,n=-1;return t=p_(t),document.visibilityState==="hidden"?t():(n=e(t),Jf(t)),n},x1=[200,500],I9=function(t,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},m_(function(){var n;w9();var r,i=Di("INP"),s=function(a){g_(function(){a.forEach(T9);var l=E9();l&&l.latency!==i.value&&(i.value=l.latency,i.entries=l.entries,r())})},o=Ma("event",s,{durationThreshold:(n=e.durationThreshold)!==null&&n!==void 0?n:40});r=Oi(t,i,x1,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Jf(function(){s(o.takeRecords()),r(!0)}),dc(function(){xk=Rk(),Vn.length=0,Xl.clear(),i=Di("INP"),r=Oi(t,i,x1,e.reportAllChanges)}))}))},Qo=[],si=[],Cy=0,y_=new WeakMap,Yo=new Map,ky=-1,S9=function(t){Qo=Qo.concat(t),Ck()},Ck=function(){ky<0&&(ky=g_(A9))},A9=function(){Yo.size>10&&Yo.forEach(function(o,a){Xl.has(a)||Yo.delete(a)});var t=Vn.map(function(o){return y_.get(o.entries[0])}),e=si.length-50;si=si.filter(function(o,a){return a>=e||t.includes(o)});for(var n=new Set,r=0;r<si.length;r++){var i=si[r];kk(i.startTime,i.processingEnd).forEach(function(o){n.add(o)})}var s=Qo.length-1-50;Qo=Qo.filter(function(o,a){return o.startTime>Cy&&a>s||n.has(o)}),ky=-1};bk.push(function(t){t.interactionId&&t.target&&!Yo.has(t.interactionId)&&Yo.set(t.interactionId,t.target)},function(t){var e,n=t.startTime+t.duration;Cy=Math.max(Cy,t.processingEnd);for(var r=si.length-1;r>=0;r--){var i=si[r];if(Math.abs(n-i.renderTime)<=8){(e=i).startTime=Math.min(t.startTime,e.startTime),e.processingStart=Math.min(t.processingStart,e.processingStart),e.processingEnd=Math.max(t.processingEnd,e.processingEnd),e.entries.push(t);break}}e||(e={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:n,entries:[t]},si.push(e)),(t.interactionId||t.entryType==="first-input")&&y_.set(t,e),Ck()});var kk=function(t,e){for(var n,r=[],i=0;n=Qo[i];i++)if(!(n.startTime+n.duration<t)){if(n.startTime>e)break;r.push(n)}return r},P9=function(t,e){I1||(I1=Ma("long-animation-frame",S9)),I9(function(n){var r=function(i){var s=i.entries[0],o=y_.get(s),a=s.processingStart,l=o.processingEnd,u=o.entries.sort(function(P,E){return P.processingStart-E.processingStart}),h=kk(s.startTime,l),d=i.entries.find(function(P){return P.target}),f=d&&d.target||Yo.get(s.interactionId),g=[s.startTime+s.duration,l].concat(h.map(function(P){return P.startTime+P.duration})),T=Math.max.apply(Math,g),w={interactionTarget:h_(f),interactionTargetElement:f,interactionType:s.name.startsWith("key")?"keyboard":"pointer",interactionTime:s.startTime,nextPaintTime:T,processedEventEntries:u,longAnimationFrameEntries:h,inputDelay:a-s.startTime,processingDuration:l-a,presentationDelay:Math.max(T-l,0),loadState:Ik(s.startTime)};return Object.assign(i,{attribution:w})}(n);t(r)},e)},b1=[2500,4e3],Cm={},R9=function(t,e){(function(n,r){r=r||{},m_(function(){var i,s=Ak(),o=Di("LCP"),a=function(h){r.reportAllChanges||(h=h.slice(-1)),h.forEach(function(d){d.startTime<s.firstHiddenTime&&(o.value=Math.max(d.startTime-d_(),0),o.entries=[d],i())})},l=Ma("largest-contentful-paint",a);if(l){i=Oi(n,o,b1,r.reportAllChanges);var u=p_(function(){Cm[o.id]||(a(l.takeRecords()),l.disconnect(),Cm[o.id]=!0,i(!0))});["keydown","click"].forEach(function(h){addEventListener(h,function(){return g_(u)},{once:!0,capture:!0})}),Jf(u),dc(function(h){o=Di("LCP"),i=Oi(n,o,b1,r.reportAllChanges),f_(function(){o.value=performance.now()-h.timeStamp,Cm[o.id]=!0,i(!0)})})}})})(function(n){var r=function(i){var s={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:i.value};if(i.entries.length){var o=Xf();if(o){var a=o.activationStart||0,l=i.entries[i.entries.length-1],u=l.url&&performance.getEntriesByType("resource").filter(function(T){return T.name===l.url})[0],h=Math.max(0,o.responseStart-a),d=Math.max(h,u?(u.requestStart||u.startTime)-a:0),f=Math.max(d,u?u.responseEnd-a:0),g=Math.max(f,l.startTime-a);s={element:h_(l.element),timeToFirstByte:h,resourceLoadDelay:d-h,resourceLoadDuration:f-d,elementRenderDelay:g-f,navigationEntry:o,lcpEntry:l},l.url&&(s.url=l.url),u&&(s.lcpResourceEntry=u)}}return Object.assign(i,{attribution:s})}(n);t(r)},e)};const C1="@firebase/performance",Ny="0.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=Ny,x9="FB-PERF-TRACE-START",b9="FB-PERF-TRACE-STOP",Vy="FB-PERF-TRACE-MEASURE",Vk="_wt_",Dk="_fp",Ok="_fcp",Mk="_fid",Lk="_lcp",C9="lcp_element",Fk="_inp",k9="inp_interactionTarget",Uk="_cls",N9="cls_largestShiftTarget",jk="@firebase/performance/config",Bk="@firebase/performance/configexpire",V9="performance",$k="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},St=new Bi(V9,$k,D9);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new Yu($k);Cr.logLevel=he.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let km,zk;class st{constructor(e){if(this.window=e,!e)throw St.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=R9,this.onINP=P9,this.onCLS=v9}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Zv()?(Cr.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Qu()?!0:(Cr.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,n){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(const s of i.getEntries())n(s)}).observe({entryTypes:[e]})}static getInstance(){return km===void 0&&(km=new st(zk)),km}}function O9(t){zk=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qk;function M9(t){const e=t.getId();return e.then(n=>{qk=n}),e}function v_(){return qk}function L9(t){const e=t.getToken();return e.then(n=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t,e){const n=t.length-e.length;if(n<0||n>1)throw St.create("invalid String merger input");const r=[];for(let i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nm;class Ot{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=k1("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=k1("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12,this.logMaxFlushSize=40}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Nm===void 0&&(Nm=new Ot),Nm}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jl;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"})(Jl||(Jl={}));const F9=["firebase_","google_","ga_"],U9=new RegExp("^[a-zA-Z]\\w*$"),j9=40,Dy=100;function B9(){const t=st.getInstance().navigator;return t!=null&&t.serviceWorker?t.serviceWorker.controller?2:3:1}function $9(){switch(st.getInstance().document.visibilityState){case"visible":return Jl.VISIBLE;case"hidden":return Jl.HIDDEN;default:return Jl.UNKNOWN}}function z9(){const e=st.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function q9(t){return t.length===0||t.length>j9?!1:!F9.some(n=>t.startsWith(n))&&!!t.match(U9)}function W9(t){return t.length!==0&&t.length<=Dy}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){var n;const e=(n=t.options)==null?void 0:n.appId;if(!e)throw St.create("no app id");return e}function G9(t){var n;const e=(n=t.options)==null?void 0:n.projectId;if(!e)throw St.create("no project id");return e}function K9(t){var n;const e=(n=t.options)==null?void 0:n.apiKey;if(!e)throw St.create("no api key");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9="0.0.1",Jt={loggingEnabled:!0},Q9="FIREBASE_INSTALLATIONS_AUTH";function Y9(t,e){const n=X9();return n?(N1(n),Promise.resolve()):e$(t,e).then(N1).then(r=>J9(r),()=>{})}function X9(){const t=st.getInstance().localStorage;if(!t)return;const e=t.getItem(Bk);if(!e||!t$(e))return;const n=t.getItem(jk);if(n)try{return JSON.parse(n)}catch{return}}function J9(t){const e=st.getInstance().localStorage;!t||!e||(e.setItem(jk,JSON.stringify(t)),e.setItem(Bk,String(Date.now()+Ot.getInstance().configTimeToLive*60*60*1e3)))}const Z9="Could not fetch config, will use default configs";function e$(t,e){return L9(t.installations).then(n=>{const r=G9(t.app),i=K9(t.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,o=new Request(s,{method:"POST",headers:{Authorization:`${Q9} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:Wk(t.app),app_version:Nk,sdk_version:H9})});return fetch(o).then(a=>{if(a.ok)return a.json();throw St.create("RC response not ok")})}).catch(()=>{Cr.info(Z9)})}function N1(t){if(!t)return t;const e=Ot.getInstance(),n=t.entries||{};return n.fpr_enabled!==void 0?e.loggingEnabled=String(n.fpr_enabled)==="true":e.loggingEnabled=Jt.loggingEnabled,n.fpr_log_source?e.logSource=Number(n.fpr_log_source):Jt.logSource&&(e.logSource=Jt.logSource),n.fpr_log_endpoint_url?e.logEndPointUrl=n.fpr_log_endpoint_url:Jt.logEndPointUrl&&(e.logEndPointUrl=Jt.logEndPointUrl),n.fpr_log_transport_key?e.transportKey=n.fpr_log_transport_key:Jt.transportKey&&(e.transportKey=Jt.transportKey),n.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):Jt.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=Jt.networkRequestsSamplingRate),n.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):Jt.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=Jt.tracesSamplingRate),n.fpr_log_max_flush_size?e.logMaxFlushSize=Number(n.fpr_log_max_flush_size):Jt.logMaxFlushSize&&(e.logMaxFlushSize=Jt.logMaxFlushSize),e.logTraceAfterSampling=V1(e.tracesSamplingRate),e.logNetworkAfterSampling=V1(e.networkRequestsSamplingRate),t}function t$(t){return Number(t)>Date.now()}function V1(t){return Math.random()<=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __=1,Vm;function Gk(t){return __=2,Vm=Vm||r$(t),Vm}function n$(){return __===3}function r$(t){return i$().then(()=>M9(t.installations)).then(e=>Y9(t,e)).then(()=>D1(),()=>D1())}function i$(){const t=st.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){const n=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function D1(){__=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=10*1e3,s$=5.5*1e3,o$=1e3,Hk=3,a$=65536,l$=new TextEncoder;let Uh=Hk,wn=[],O1=!1;function u$(){O1||(w_(s$),O1=!0)}function w_(t){setTimeout(()=>{Uh<=0||(wn.length>0&&c$(),w_(Kk))},t)}function c$(){const t=wn.splice(0,o$),e=Oy(t);h$(e).then(()=>{Uh=Hk}).catch(()=>{wn=[...t,...wn],Uh--,Cr.info(`Tries left: ${Uh}.`),w_(Kk)})}function Oy(t){const e=t.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ot.getInstance().logSource,log_event:e};return JSON.stringify(n)}function h$(t){const e=Ot.getInstance().getFlTransportFullUrl();return l$.encode(t).length<=a$&&navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t})}function d$(t){if(!t.eventTime||!t.message)throw St.create("invalid cc log");wn=[...wn,t]}function f$(t){return(...e)=>{const n=t(...e);d$({message:n,eventTime:Date.now()})}}function p$(){const t=Ot.getInstance().getFlTransportFullUrl();for(;wn.length>0;){const e=wn.splice(-Ot.getInstance().logMaxFlushSize),n=Oy(e);if(!(navigator.sendBeacon&&navigator.sendBeacon(t,n))){wn=[...wn,...e];break}}if(wn.length>0){const e=Oy(wn);fetch(t,{method:"POST",body:e}).catch(()=>{Cr.info("Failed flushing queued events.")})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl;function Qk(t,e){Zl||(Zl={send:f$(y$),flush:p$}),Zl.send(t,e)}function ih(t){const e=Ot.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||st.getInstance().requiredApisAvailable()&&(n$()?Dm(t):Gk(t.performanceController).then(()=>Dm(t),()=>Dm(t)))}function m$(){Zl&&Zl.flush()}function Dm(t){if(!v_())return;const e=Ot.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||Qk(t,1)}function g$(t){const e=Ot.getInstance();if(!e.instrumentationEnabled)return;const n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||Qk(t,0)}function y$(t,e){return e===0?v$(t):_$(t)}function v$(t){const e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:Yk(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function _$(t){const e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);const n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);const r={application_info:Yk(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}function Yk(t){return{google_app_id:Wk(t),app_instance_id:v_(),web_app_info:{sdk_version:Nk,page_url:st.getInstance().getUrl(),service_worker_status:B9(),visibility_state:$9(),effective_connection_type:z9()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(t,e){const n=e;if(!n||n.responseStart===void 0)return;const r=st.getInstance().getTimeOrigin(),i=Math.floor((n.startTime+r)*1e3),s=n.responseStart?Math.floor((n.responseStart-n.startTime)*1e3):void 0,o=Math.floor((n.responseEnd-n.startTime)*1e3),a=n.name&&n.name.split("?")[0],l={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};g$(l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$=100,E$="_",T$=[Dk,Ok,Mk,Lk,Uk,Fk];function I$(t,e){return t.length===0||t.length>w$?!1:e&&e.startsWith(Vk)&&T$.indexOf(t)>-1||!t.startsWith(E$)}function S$(t){const e=Math.floor(t);return e<t&&Cr.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,r=!1,i){this.performanceController=e,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=st.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${x9}-${this.randomId}-${this.name}`,this.traceStopMark=`${b9}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${Vy}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw St.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw St.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ih(this)}record(e,n,r){if(e<=0)throw St.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw St.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes={...r.attributes}),r&&r.metrics)for(const i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));ih(this)}incrementMetric(e,n=1){this.counters[e]===void 0?this.putMetric(e,n):this.putMetric(e,this.counters[e]+n)}putMetric(e,n){if(I$(e,this.name))this.counters[e]=S$(n??0);else throw St.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,n){const r=q9(e),i=W9(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw St.create("invalid attribute name",{attributeName:e});if(!i)throw St.create("invalid attribute value",{attributeValue:n})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return{...this.customAttributes}}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,n,r,i,s){const o=st.getInstance().getUrl();if(!o)return;const a=new Lu(e,Vk+o,!0),l=Math.floor(st.getInstance().getTimeOrigin()*1e3);a.setStartTime(l),n&&n[0]&&(a.setDuration(Math.floor(n[0].duration*1e3)),a.putMetric("domInteractive",Math.floor(n[0].domInteractive*1e3)),a.putMetric("domContentLoadedEventEnd",Math.floor(n[0].domContentLoadedEventEnd*1e3)),a.putMetric("loadEventEnd",Math.floor(n[0].loadEventEnd*1e3)));const u="first-paint",h="first-contentful-paint";if(r){const d=r.find(g=>g.name===u);d&&d.startTime&&a.putMetric(Dk,Math.floor(d.startTime*1e3));const f=r.find(g=>g.name===h);f&&f.startTime&&a.putMetric(Ok,Math.floor(f.startTime*1e3)),s&&a.putMetric(Mk,Math.floor(s*1e3))}this.addWebVitalMetric(a,Lk,C9,i.lcp),this.addWebVitalMetric(a,Uk,N9,i.cls),this.addWebVitalMetric(a,Fk,k9,i.inp),ih(a),m$()}static addWebVitalMetric(e,n,r,i){i&&(e.putMetric(n,Math.floor(i.value*1e3)),i.elementAttribution&&(i.elementAttribution.length>Dy?e.putAttribute(r,i.elementAttribution.substring(0,Dy)):e.putAttribute(r,i.elementAttribution)))}static createUserTimingTrace(e,n){const r=new Lu(e,n,!1,n);ih(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh={},L1=!1,Xk;function F1(t){v_()&&(setTimeout(()=>P$(t),0),setTimeout(()=>A$(t),0),setTimeout(()=>R$(t),0))}function A$(t){const e=st.getInstance(),n=e.getEntriesByType("resource");for(const r of n)M1(t,r);e.setupObserver("resource",r=>M1(t,r))}function P$(t){const e=st.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>Om(t)):e.document.addEventListener("unload",()=>Om(t)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&Om(t)}),e.onFirstInputDelay&&e.onFirstInputDelay(n=>{Xk=n}),e.onLCP(n=>{var r;jh.lcp={value:n.value,elementAttribution:(r=n.attribution)==null?void 0:r.element}}),e.onCLS(n=>{var r;jh.cls={value:n.value,elementAttribution:(r=n.attribution)==null?void 0:r.largestShiftTarget}}),e.onINP(n=>{var r;jh.inp={value:n.value,elementAttribution:(r=n.attribution)==null?void 0:r.interactionTarget}})}function R$(t){const e=st.getInstance(),n=e.getEntriesByType("measure");for(const r of n)U1(t,r);e.setupObserver("measure",r=>U1(t,r))}function U1(t,e){const n=e.name;n.substring(0,Vy.length)!==Vy&&Lu.createUserTimingTrace(t,n)}function Om(t){if(!L1){L1=!0;const e=st.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");setTimeout(()=>{Lu.createOobTrace(t,n,r,jh,Xk)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e,n){this.app=e,this.installations=n,this.initialized=!1}_init(e){this.initialized||((e==null?void 0:e.dataCollectionEnabled)!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),(e==null?void 0:e.instrumentationEnabled)!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),st.getInstance().requiredApisAvailable()?Tf().then(n=>{n&&(u$(),Gk(this).then(()=>F1(this),()=>F1(this)),this.initialized=!0)}).catch(n=>{Cr.info(`Environment doesn't support IndexedDB: ${n}`)}):Cr.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Ot.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Ot.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Ot.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Ot.getInstance().dataCollectionEnabled}}const b$="[DEFAULT]";function C$(t=Xu()){return t=Re(t),Nr(t,"performance").getImmediate()}const k$=(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(n.name!==b$)throw St.create("FB not default");if(typeof window>"u")throw St.create("no window");O9(window);const i=new x$(n,r);return i._init(e),i};function N$(){Pn(new cn("performance",k$,"PUBLIC")),Rt(C1,Ny),Rt(C1,Ny,"esm2020")}N$();const V$=()=>{const e=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"].filter(r=>!{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[r]);if(e.length>0)throw new Error(`Missing required environment variables: ${e.join(", ")}`);const n={}.VITE_FIREBASE_API_KEY;if(!n||n.length<10)throw new Error("Invalid Firebase API key configuration");console.info(" Environment validation passed")},D$=()=>(V$(),{apiKey:{}.VITE_FIREBASE_API_KEY,authDomain:{}.VITE_FIREBASE_AUTH_DOMAIN,projectId:{}.VITE_FIREBASE_PROJECT_ID,storageBucket:{}.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:{}.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:{}.VITE_FIREBASE_APP_ID,measurementId:{}.VITE_FIREBASE_MEASUREMENT_ID||null,auth:{persistence:"local"},firestore:{cacheSizeBytes:Q6,experimentalForceLongPolling:!0},storage:{maxUploadRetryTime:3e4,maxOperationRetryTime:3e4}});class sh extends Error{constructor(e,n){super(`Firebase ${n} initialization failed: ${e}`),this.name="FirebaseInitializationError",this.component=n}}const O$=async t=>{try{if(await Tk()){const n=C$(t);return console.info(" Performance monitoring enabled"),n}return console.warn(" Performance monitoring not supported in this environment"),null}catch(e){return console.warn(" Performance monitoring initialization failed:",e),null}},M$=async t=>{try{if(await Tk()){const n=u9(t);return n.setAnalyticsCollectionEnabled(!0),console.info(" Analytics enabled (production only)"),n}return console.warn(" Analytics disabled (development mode or not supported)"),null}catch(e){return console.warn(" Analytics initialization failed:",e),null}};class L${constructor(){this.app=null,this.auth=null,this.db=null,this.storage=null,this.analytics=null,this.performance=null,this.isInitialized=!1,this.initializationPromise=null}async initialize(){return this.initializationPromise?this.initializationPromise:(this.initializationPromise=this._initializeServices(),this.initializationPromise)}async _initializeServices(){try{console.group(" Initializing Firebase Services");const e=D$();this.app=UR(e),console.info(" Firebase App initialized"),this.auth=OU(this.app);const n=yx;await f4(this.auth,n),console.info(" Authentication configured (local persistence)"),this.db=Y6(this.app);try{await X6(this.db),console.info(" Firestore offline persistence enabled")}catch(r){r.code==="failed-precondition"?console.warn(" Firestore persistence failed: Multiple tabs open"):r.code==="unimplemented"?console.warn(" Firestore persistence not supported in this browser"):console.warn(" Firestore persistence error:",r)}return this.storage=qj(this.app),console.info(" Cloud Storage initialized"),this.performance=await O$(this.app),this.analytics=await M$(this.app),this.isInitialized=!0,console.groupEnd(),console.info(" All Firebase services initialized successfully"),this}catch(e){throw console.groupEnd(),console.error(" Firebase initialization failed:",e),new sh(e.message,"core")}}async _configureEmulators(){try{const e="localhost";({}).VITE_USE_AUTH_EMULATOR==="true"&&(lx(this.auth,`http://${e}:9099`,{disableWarnings:!1}),console.info(" Auth emulator connected")),{}.VITE_USE_FIRESTORE_EMULATOR==="true"&&(jC(this.db,e,8080),console.info(" Firestore emulator connected")),{}.VITE_USE_STORAGE_EMULATOR==="true"&&(ek(this.storage,e,9199),console.info(" Storage emulator connected"))}catch(e){console.warn(" Emulator configuration failed:",e)}}async healthCheck(){const e={app:!!this.app,auth:!!this.auth,db:!!this.db,storage:!!this.storage,analytics:!!this.analytics,performance:!!this.performance};return{healthy:Object.values(e).every(Boolean),services:e,timestamp:new Date().toISOString(),environment:"production"}}getAuth(){if(!this.auth)throw new sh("Auth service not initialized","auth");return this.auth}getFirestore(){if(!this.db)throw new sh("Firestore service not initialized","firestore");return this.db}getStorage(){if(!this.storage)throw new sh("Storage service not initialized","storage");return this.storage}getAnalytics(){return this.analytics}getPerformance(){return this.performance}async cleanup(){this.app&&(this.isInitialized=!1,this.initializationPromise=null,console.info(" Firebase services cleanup completed"))}}const E_=new L$,F$=()=>E_.getAuth(),U$=()=>E_.getFirestore(),j$=()=>E_.getStorage(),Zi=F$(),uo=U$();j$();function B$(t){if(!t||typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Array(12).fill(0);let My=1;class $${constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:My++,o=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...i,dismissible:a,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let s=r!==void 0,o;const a=i.then(async u=>{if(o=["resolve",u],On.isValidElement(u))s=!1,this.create({id:r,type:"default",message:u});else if(q$(u)&&!u.ok){s=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,T=typeof d=="object"&&!On.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:f,...T})}else if(u instanceof Error){s=!1;const d=typeof n.error=="function"?await n.error(u):n.error,f=typeof n.description=="function"?await n.description(u):n.description,T=typeof d=="object"&&!On.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:f,...T})}else if(n.success!==void 0){s=!1;const d=typeof n.success=="function"?await n.success(u):n.success,f=typeof n.description=="function"?await n.description(u):n.description,T=typeof d=="object"&&!On.isValidElement(d)?d:{message:d};this.create({id:r,type:"success",description:f,...T})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){s=!1;const h=typeof n.error=="function"?await n.error(u):n.error,d=typeof n.description=="function"?await n.description(u):n.description,g=typeof h=="object"&&!On.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:d,...g})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,h)=>a.then(()=>o[0]==="reject"?h(o[1]):u(o[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{const r=(n==null?void 0:n.id)||My++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const yn=new $$,z$=(t,e)=>{const n=(e==null?void 0:e.id)||My++;return yn.addToast({title:t,...e,id:n}),n},q$=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",W$=z$,G$=()=>yn.toasts,K$=()=>yn.getActiveToasts(),We=Object.assign(W$,{success:yn.success,info:yn.info,warning:yn.warning,error:yn.error,custom:yn.custom,message:yn.message,promise:yn.promise,dismiss:yn.dismiss,loading:yn.loading},{getHistory:G$,getToasts:K$});B$("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const co={MAX_LOGIN_ATTEMPTS:5,LOCKOUT_DURATION:15*60*1e3,PASSWORD_MIN_LENGTH:8,SESSION_TIMEOUT:30*60*1e3,TOKEN_REFRESH_INTERVAL:10*60*1e3},pt={LOGIN_SUCCESS:"login_success",LOGIN_FAILED:"login_failed",LOGOUT:"logout",PASSWORD_RESET:"password_reset",PROFILE_UPDATE:"profile_update",ACCOUNT_LOCKED:"account_locked",ACCOUNT_UNLOCKED:"account_unlocked",SESSION_EXPIRED:"session_expired",SUSPICIOUS_ACTIVITY:"suspicious_activity"},Jk=x.createContext(null),Mm=()=>{const t=x.useContext(Jk);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},H$=t=>({logEvent:(n,r={})=>{const i={userId:t,eventType:n,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,ip:"127.0.0.1",details:r};console.log("[SECURITY LOG]:",i);const s=JSON.parse(localStorage.getItem("security_logs")||"[]");s.push(i),s.length>100&&s.shift(),localStorage.setItem("security_logs",JSON.stringify(s))}}),Q$=(t,e)=>{const n=new Map;return{check:o=>{const a=Date.now(),u=(n.get(o)||[]).filter(h=>a-h<e);return u.length>=t?{allowed:!1,remaining:0}:{allowed:!0,remaining:t-u.length}},recordAttempt:o=>{const a=n.get(o)||[];a.push(Date.now()),n.set(o,a)},reset:o=>{n.delete(o)}}},Y$=({children:t})=>{const[e,n]=x.useState(null),[r,i]=x.useState(!0),[s,o]=x.useState(!1),[a,l]=x.useState(null);x.useState({});const[u,h]=x.useState(null),[d,f]=x.useState([]),g=x.useMemo(()=>Q$(co.MAX_LOGIN_ATTEMPTS,co.LOCKOUT_DURATION),[]);x.useMemo(()=>H$((e==null?void 0:e.uid)||"anonymous"),[e==null?void 0:e.uid]);const T=x.useCallback(B=>{window.recaptchaVerifier||(window.recaptchaVerifier=new F4(Zi,B,{size:"invisible",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired")}})),h(window.recaptchaVerifier)},[]),w=x.useCallback((B,G={})=>{const z={type:B,timestamp:new Date().toISOString(),userId:(e==null?void 0:e.uid)||"anonymous",userEmail:(e==null?void 0:e.email)||null,details:G};f(re=>[...re.slice(-49),z])},[e]),P=x.useCallback(B=>g.check(B).allowed?!0:(w(pt.ACCOUNT_LOCKED,{identifier:B}),We.error("Too many failed attempts. Account temporarily locked."),!1),[g,w]),E=x.useCallback(B=>{g.recordAttempt(B),w(pt.LOGIN_FAILED,{identifier:B})},[g,w]),y=x.useCallback(B=>{g.reset(B),w(pt.ACCOUNT_UNLOCKED,{identifier:B})},[g,w]),v=x.useCallback(()=>{const B=Date.now()+co.SESSION_TIMEOUT;l(B),localStorage.setItem("session_expiry",B.toString())},[]),C=x.useCallback(()=>a&&Date.now()>a?(w(pt.SESSION_EXPIRED),ee(),!1):!0,[a]);x.useEffect(()=>{if(e){v();const B=setInterval(()=>{C()&&v()},co.TOKEN_REFRESH_INTERVAL),G=setInterval(()=>{C()},6e4);return()=>{clearInterval(B),clearInterval(G)}}},[e,v,C]);const N=x.useCallback(B=>{const G=[];return B.length<co.PASSWORD_MIN_LENGTH&&G.push(`Password must be at least ${co.PASSWORD_MIN_LENGTH} characters`),/[A-Z]/.test(B)||G.push("Password must contain at least one uppercase letter"),/[a-z]/.test(B)||G.push("Password must contain at least one lowercase letter"),/[0-9]/.test(B)||G.push("Password must contain at least one number"),/[^A-Za-z0-9]/.test(B)||G.push("Password must contain at least one special character"),["password","123456","qwerty","admin","letmein","welcome","monkey","dragon","baseball","football"].includes(B.toLowerCase())&&G.push("This password is too common and insecure"),{isValid:G.length===0,errors:G,strength:G.length===0?"strong":"weak"}},[]),V=x.useCallback(async B=>{try{const G=Em(uo,"users",B.uid),z={uid:B.uid,email:B.email||null,phone:B.phoneNumber||null,emailVerified:B.emailVerified||!1,displayName:B.displayName||"",photoURL:B.photoURL||"",createdAt:pl(),updatedAt:pl(),lastLoginAt:pl(),security:{twoFactorEnabled:!1,loginAttempts:0,lastFailedAttempt:null,accountLockedUntil:null},preferences:{theme:"system",notifications:!0,language:"en"}};return await pj(G,z),z}catch(G){throw console.error("Error creating user document:",G),G}},[]),S=x.useCallback(async(B,G)=>{try{const z=Em(uo,"users",B);await mj(z,{...G,updatedAt:pl()})}catch(z){throw console.error("Error updating user document:",z),z}},[]),_=x.useCallback(async B=>{try{const G=Em(uo,"users",B),z=await fj(G);return z.exists()?z.data():null}catch(G){return console.error("Error getting user document:",G),null}},[]),A=x.useCallback(async B=>{try{const G=wm(uo,"users"),z=Tm(G,Im("email","==",B.toLowerCase()));return!(await Sm(z)).empty}catch(G){return console.error("Error checking email:",G),!1}},[]),b=x.useCallback(async B=>{try{const G=wm(uo,"users"),z=Tm(G,Im("phone","==",B));return!(await Sm(z)).empty}catch(G){return console.error("Error checking phone:",G),!1}},[]),k=x.useCallback(async B=>{try{const G=wm(uo,"users"),z=Tm(G,Im("displayName","==",B));return!(await Sm(z)).empty}catch(G){return console.error("Error checking username:",G),!1}},[]),D=x.useCallback(async(B,G,z={})=>{o(!0);try{if(await A(B))throw new Error("Email already registered");const Se=N(G);if(!Se.isValid)throw new Error(Se.errors[0]);const $n=await l4(Zi,B,G),{user:Yt}=$n;return z.displayName&&await NT(Yt,{displayName:z.displayName,...z.photoURL&&{photoURL:z.photoURL}}),await V({...Yt,displayName:z.displayName||"",...z}),n({...Yt,metadata:await _(Yt.uid)}),v(),w(pt.LOGIN_SUCCESS,{method:"email_signup"}),We.success("Account created successfully!"),{success:!0,user:Yt}}catch(re){console.error("Sign up error:",re);let Se="Failed to create account";return re.code==="auth/email-already-in-use"?Se="Email already registered":re.code==="auth/weak-password"?Se="Password is too weak":re.code==="auth/invalid-email"&&(Se="Invalid email address"),We.error(Se),w(pt.LOGIN_FAILED,{method:"email_signup",error:re.message}),{success:!1,error:Se}}finally{o(!1)}},[A,N,V,v,w]),R=x.useCallback(async(B,G={})=>{o(!0);try{if(await b(B))throw new Error("Phone number already registered");return await new Promise(re=>setTimeout(re,1500)),We.success("Phone verification initiated!"),{success:!0,requiresVerification:!0}}catch(z){return console.error("Phone sign up error:",z),We.error(z.message||"Failed to initiate phone signup"),w(pt.LOGIN_FAILED,{method:"phone_signup",error:z.message}),{success:!1,error:z.message}}finally{o(!1)}},[b,w]),oe=x.useCallback(async(B,G,z=!1)=>{o(!0);try{if(!P(B))return{success:!1,error:"Account temporarily locked"};const re=await u4(Zi,B,G),{user:Se}=re,$n=await _(Se.uid);return await S(Se.uid,{lastLoginAt:pl(),"security.loginAttempts":0}),n({...Se,metadata:$n}),v(),y(B),z&&(localStorage.setItem("remember_me","true"),localStorage.setItem("remembered_email",B)),w(pt.LOGIN_SUCCESS,{method:"email",userId:Se.uid}),We.success("Login successful!"),{success:!0,user:Se}}catch(re){console.error("Login error:",re),E(B);let Se="Login failed";return re.code==="auth/user-not-found"||re.code==="auth/wrong-password"?Se="Invalid email or password":re.code==="auth/too-many-requests"?Se="Too many failed attempts. Account temporarily locked.":re.code==="auth/user-disabled"?Se="Account has been disabled":re.code==="auth/invalid-email"&&(Se="Invalid email address"),We.error(Se),w(pt.LOGIN_FAILED,{method:"email",email:B,error:re.message}),{success:!1,error:Se}}finally{o(!1)}},[P,_,S,v,y,E,w]),_e=x.useCallback(async(B,G)=>{o(!0);try{if(!P(B))return{success:!1,error:"Account temporarily locked"};await new Promise(re=>setTimeout(re,1500));const z={uid:`phone_${Date.now()}`,phoneNumber:B,emailVerified:!1,displayName:"Phone User"};return n(z),v(),y(B),w(pt.LOGIN_SUCCESS,{method:"phone",userId:z.uid}),We.success("Login successful!"),{success:!0,user:z}}catch(z){return console.error("Phone login error:",z),E(B),We.error("Phone login failed"),w(pt.LOGIN_FAILED,{method:"phone",phoneNumber:B,error:z.message}),{success:!1,error:z.message}}finally{o(!1)}},[P,v,y,E,w]),ue=x.useCallback(async(B,G)=>{o(!0);try{return await new Promise(z=>setTimeout(z,1500)),We.success("Phone verified successfully!"),{success:!0}}catch(z){console.error("OTP verification error:",z);let re="Verification failed";return z.code==="auth/invalid-verification-code"?re="Invalid verification code":z.code==="auth/code-expired"&&(re="Verification code has expired"),We.error(re),{success:!1,error:re}}finally{o(!1)}},[]),ge=x.useCallback(async B=>{o(!0);try{if(!await A(B))throw new Error("No account found with this email");return await a4(Zi,B),w(pt.PASSWORD_RESET,{email:B}),We.success("Password reset email sent!"),{success:!0}}catch(G){console.error("Password reset error:",G);let z="Failed to send reset email";return G.code==="auth/user-not-found"?z="No account found with this email":G.code==="auth/too-many-requests"&&(z="Too many requests. Please try again later."),We.error(z),{success:!1,error:z}}finally{o(!1)}},[A,w]),q=x.useCallback(async(B,G)=>{o(!0);try{const z=N(G);if(!z.isValid)throw new Error(z.errors[0]);return await q(Zi,B,G),w(pt.PASSWORD_RESET,{action:"confirmed"}),We.success("Password reset successfully!"),{success:!0}}catch(z){console.error("Confirm password reset error:",z);let re="Failed to reset password";return z.code==="auth/expired-action-code"?re="Reset code has expired":z.code==="auth/invalid-action-code"?re="Invalid reset code":z.code==="auth/weak-password"&&(re="Password is too weak"),We.error(re),{success:!1,error:re}}finally{o(!1)}},[N,w]),X=x.useCallback(async(B,G)=>{if(!e)throw new Error("No user logged in");o(!0);try{const z=bi.credential(e.email,B);await kT(e,z);const re=N(G);if(!re.isValid)throw new Error(re.errors[0]);return await h4(e,G),w(pt.PASSWORD_RESET,{action:"updated",userId:e.uid}),We.success("Password updated successfully!"),{success:!0}}catch(z){console.error("Update password error:",z);let re="Failed to update password";return z.code==="auth/wrong-password"?re="Current password is incorrect":z.code==="auth/weak-password"?re="New password is too weak":z.code==="auth/requires-recent-login"&&(re="Please reauthenticate to change password"),We.error(re),{success:!1,error:re}}finally{o(!1)}},[e,N,w]),J=x.useCallback(async B=>{if(!e)throw new Error("No user logged in");o(!0);try{return await NT(e,B),await S(e.uid,B),n(G=>({...G,...B,metadata:{...G.metadata,...B}})),w(pt.PROFILE_UPDATE,{userId:e.uid,updates:B}),We.success("Profile updated successfully!"),{success:!0}}catch(G){return console.error("Update profile error:",G),We.error("Failed to update profile"),{success:!1,error:G.message}}finally{o(!1)}},[e,S,w]),ee=x.useCallback(async()=>{o(!0);try{await y4(Zi),n(null),l(null),localStorage.removeItem("session_expiry"),localStorage.removeItem("remembered_email"),w(pt.LOGOUT,{userId:e==null?void 0:e.uid}),We.success("Logged out successfully")}catch(B){console.error("Logout error:",B),We.error("Failed to logout")}finally{o(!1)}},[e,w]),pe=x.useCallback(async B=>{if(!e||!e.email)throw new Error("No user logged in");try{const G=bi.credential(e.email,B);return await kT(e,G),{success:!0}}catch(G){return console.error("Reauthentication error:",G),{success:!1,error:G.message}}},[e]);x.useEffect(()=>g4(Zi,async G=>{if(G){const z=await _(G.uid);n({...G,metadata:z}),v(),w(pt.LOGIN_SUCCESS,{method:"session_restore",userId:G.uid})}else n(null);i(!1)}),[_,v,w]);const Bt=x.useMemo(()=>({user:e,loading:r,authLoading:s,sessionExpiry:a,securityEvents:d,recaptchaVerifier:u,signUpWithEmail:D,signUpWithPhone:R,loginWithEmail:oe,loginWithPhone:_e,verifyPhoneOtp:ue,handleLogout:ee,sendPasswordReset:ge,confirmPasswordReset:q,updateUserPassword:X,updateUserProfile:J,reauthenticateUser:pe,validatePassword:N,checkEmailExists:A,checkPhoneExists:b,checkUsernameExists:k,checkRateLimit:P,resetAttempts:y,checkSessionExpiry:C,initializeRecaptcha:T,logSecurityEvent:w,getUserDocument:_,updateUserDocument:S}),[e,r,s,a,d,u,D,R,oe,_e,ue,ee,ge,q,X,J,pe,N,A,b,k,P,y,C,T,w,_,S]);return O.jsx(Jk.Provider,{value:Bt,children:t})};const Zf=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),ep=x.createContext({}),tp=x.createContext(null),np=typeof document<"u",La=np?x.useLayoutEffect:x.useEffect,Zk=x.createContext({strict:!1}),T_=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),X$="framerAppearId",eN="data-"+T_(X$);function J$(t,e,n,r){const{visualElement:i}=x.useContext(ep),s=x.useContext(Zk),o=x.useContext(tp),a=x.useContext(Zf).reducedMotion,l=x.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;x.useInsertionEffect(()=>{u&&u.update(n,o)});const h=x.useRef(!!(n[eN]&&!window.HandoffComplete));return La(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function Vo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Z$(t,e,n){return x.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Vo(n)&&(n.current=r))},[e])}function Fu(t){return typeof t=="string"||Array.isArray(t)}function rp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const I_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],S_=["initial",...I_];function ip(t){return rp(t.animate)||S_.some(e=>Fu(t[e]))}function tN(t){return!!(ip(t)||t.variants)}function ez(t,e){if(ip(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Fu(n)?n:void 0,animate:Fu(r)?r:void 0}}return t.inherit!==!1?e:{}}function tz(t){const{initial:e,animate:n}=ez(t,x.useContext(ep));return x.useMemo(()=>({initial:e,animate:n}),[j1(e),j1(n)])}function j1(t){return Array.isArray(t)?t.join(" "):t}const B1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Uu={};for(const t in B1)Uu[t]={isEnabled:e=>B1[t].some(n=>!!e[n])};function nz(t){for(const e in t)Uu[e]={...Uu[e],...t[e]}}const A_=x.createContext({}),nN=x.createContext({}),rz=Symbol.for("motionComponentSymbol");function iz({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&nz(t);function s(a,l){let u;const h={...x.useContext(Zf),...a,layoutId:sz(a)},{isStatic:d}=h,f=tz(a),g=r(a,d);if(!d&&np){f.visualElement=J$(i,g,h,e);const T=x.useContext(nN),w=x.useContext(Zk).strict;f.visualElement&&(u=f.visualElement.loadFeatures(h,w,t,T))}return x.createElement(ep.Provider,{value:f},u&&f.visualElement?x.createElement(u,{visualElement:f.visualElement,...h}):null,n(i,a,Z$(g,f.visualElement,l),g,d,f.visualElement))}const o=x.forwardRef(s);return o[rz]=i,o}function sz({layoutId:t}){const e=x.useContext(A_).id;return e&&t!==void 0?e+"-"+t:t}function oz(t){function e(r,i={}){return iz(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const az=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function P_(t){return typeof t!="string"||t.includes("-")?!1:!!(az.indexOf(t)>-1||/[A-Z]/.test(t))}const Hd={};function lz(t){Object.assign(Hd,t)}const fc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xs=new Set(fc);function rN(t,{layout:e,layoutId:n}){return Xs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Hd[t]||t==="opacity")}const Ct=t=>!!(t&&t.getVelocity),uz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cz=fc.length;function hz(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<cz;o++){const a=fc[o];if(t[a]!==void 0){const l=uz[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const iN=t=>e=>typeof e=="string"&&e.startsWith(t),sN=iN("--"),Ly=iN("var(--"),dz=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,fz=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Mi=(t,e,n)=>Math.min(Math.max(n,t),e),Js={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},eu={...Js,transform:t=>Mi(0,1,t)},oh={...Js,default:1},tu=t=>Math.round(t*1e5)/1e5,sp=/(-)?([\d]*\.?[\d])+/g,oN=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,pz=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function pc(t){return typeof t=="string"}const mc=t=>({test:e=>pc(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Hr=mc("deg"),rr=mc("%"),se=mc("px"),mz=mc("vh"),gz=mc("vw"),$1={...rr,parse:t=>rr.parse(t)/100,transform:t=>rr.transform(t*100)},z1={...Js,transform:Math.round},aN={borderWidth:se,borderTopWidth:se,borderRightWidth:se,borderBottomWidth:se,borderLeftWidth:se,borderRadius:se,radius:se,borderTopLeftRadius:se,borderTopRightRadius:se,borderBottomRightRadius:se,borderBottomLeftRadius:se,width:se,maxWidth:se,height:se,maxHeight:se,size:se,top:se,right:se,bottom:se,left:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,rotate:Hr,rotateX:Hr,rotateY:Hr,rotateZ:Hr,scale:oh,scaleX:oh,scaleY:oh,scaleZ:oh,skew:Hr,skewX:Hr,skewY:Hr,distance:se,translateX:se,translateY:se,translateZ:se,x:se,y:se,z:se,perspective:se,transformPerspective:se,opacity:eu,originX:$1,originY:$1,originZ:se,zIndex:z1,fillOpacity:eu,strokeOpacity:eu,numOctaves:z1};function R_(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,u=!1,h=!0;for(const d in e){const f=e[d];if(sN(d)){s[d]=f;continue}const g=aN[d],T=fz(f,g);if(Xs.has(d)){if(l=!0,o[d]=T,!h)continue;f!==(g.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=T):i[d]=T}if(e.transform||(l||r?i.transform=hz(t.transform,n,h,r):i.transform&&(i.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:g=0}=a;i.transformOrigin=`${d} ${f} ${g}`}}const x_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lN(t,e,n){for(const r in e)!Ct(e[r])&&!rN(r,n)&&(t[r]=e[r])}function yz({transformTemplate:t},e,n){return x.useMemo(()=>{const r=x_();return R_(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function vz(t,e,n){const r=t.style||{},i={};return lN(i,r,t),Object.assign(i,yz(t,e,n)),t.transformValues?t.transformValues(i):i}function _z(t,e,n){const r={},i=vz(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const wz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||wz.has(t)}let uN=t=>!Qd(t);function Ez(t){t&&(uN=e=>e.startsWith("on")?!Qd(e):t(e))}try{Ez(require("@emotion/is-prop-valid").default)}catch{}function Tz(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(uN(i)||n===!0&&Qd(i)||!e&&!Qd(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function q1(t,e,n){return typeof t=="string"?t:se.transform(e+n*t)}function Iz(t,e,n){const r=q1(e,t.x,t.width),i=q1(n,t.y,t.height);return`${r} ${i}`}const Sz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Az={offset:"strokeDashoffset",array:"strokeDasharray"};function Pz(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Sz:Az;t[s.offset]=se.transform(-r);const o=se.transform(e),a=se.transform(n);t[s.array]=`${o} ${a}`}function b_(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,d,f){if(R_(t,u,h,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:T,dimensions:w}=t;g.transform&&(w&&(T.transform=g.transform),delete g.transform),w&&(i!==void 0||s!==void 0||T.transform)&&(T.transformOrigin=Iz(w,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&Pz(g,o,a,l,!1)}const cN=()=>({...x_(),attrs:{}}),C_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Rz(t,e,n,r){const i=x.useMemo(()=>{const s=cN();return b_(s,e,{enableHardwareAcceleration:!1},C_(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};lN(s,t.style,t),i.style={...s,...i.style}}return i}function xz(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(P_(n)?Rz:_z)(r,s,o,n),h={...Tz(r,typeof n=="string",t),...l,ref:i},{children:d}=r,f=x.useMemo(()=>Ct(d)?d.get():d,[d]);return x.createElement(n,{...h,children:f})}}function hN(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const dN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fN(t,e,n,r){hN(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(dN.has(i)?i:T_(i),e.attrs[i])}function k_(t,e){const{style:n}=t,r={};for(const i in n)(Ct(n[i])||e.style&&Ct(e.style[i])||rN(i,t))&&(r[i]=n[i]);return r}function pN(t,e){const n=k_(t,e);for(const r in t)if(Ct(t[r])||Ct(e[r])){const i=fc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function N_(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function gc(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const Yd=t=>Array.isArray(t),bz=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Cz=t=>Yd(t)?t[t.length-1]||0:t;function Bh(t){const e=Ct(t)?t.get():t;return bz(e)?e.toValue():e}function kz({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:Nz(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const mN=t=>(e,n)=>{const r=x.useContext(ep),i=x.useContext(tp),s=()=>kz(t,e,r,i);return n?s():gc(s)};function Nz(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=Bh(s[f]);let{initial:o,animate:a}=t;const l=ip(t),u=tN(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!rp(d)&&(Array.isArray(d)?d:[d]).forEach(g=>{const T=N_(t,g);if(!T)return;const{transitionEnd:w,transition:P,...E}=T;for(const y in E){let v=E[y];if(Array.isArray(v)){const C=h?v.length-1:0;v=v[C]}v!==null&&(i[y]=v)}for(const y in w)i[y]=w[y]}),i}const qe=t=>t;class W1{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Vz(t){let e=new W1,n=new W1,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,h=!1)=>{const d=h&&i,f=d?e:n;return u&&o.add(l),f.add(l)&&d&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const h=e.order[u];h(l),o.has(h)&&(a.schedule(h),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const ah=["prepare","read","update","preRender","render","postRender"],Dz=40;function Oz(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=ah.reduce((d,f)=>(d[f]=Vz(()=>n=!0),d),{}),o=d=>s[d].process(i),a=()=>{const d=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(d-i.timestamp,Dz),1),i.timestamp=d,i.isProcessing=!0,ah.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:ah.reduce((d,f)=>{const g=s[f];return d[f]=(T,w=!1,P=!1)=>(n||l(),g.schedule(T,w,P)),d},{}),cancel:d=>ah.forEach(f=>s[f].cancel(d)),state:i,steps:s}}const{schedule:Pe,cancel:lr,state:ut,steps:Lm}=Oz(typeof requestAnimationFrame<"u"?requestAnimationFrame:qe,!0),Mz={useVisualState:mN({scrapeMotionValuesFromProps:pN,createRenderState:cN,onMount:(t,e,{renderState:n,latestValues:r})=>{Pe.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Pe.render(()=>{b_(n,r,{enableHardwareAcceleration:!1},C_(e.tagName),t.transformTemplate),fN(e,n)})}})},Lz={useVisualState:mN({scrapeMotionValuesFromProps:k_,createRenderState:x_})};function Fz(t,{forwardMotionProps:e=!1},n,r){return{...P_(t)?Mz:Lz,preloadedFeatures:n,useRender:xz(e),createVisualElement:r,Component:t}}function vr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const gN=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function op(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Uz=t=>e=>gN(e)&&t(e,op(e));function Er(t,e,n,r){return vr(t,e,Uz(n),r)}const jz=(t,e)=>n=>e(t(n)),Si=(...t)=>t.reduce(jz);function yN(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const G1=yN("dragHorizontal"),K1=yN("dragVertical");function vN(t){let e=!1;if(t==="y")e=K1();else if(t==="x")e=G1();else{const n=G1(),r=K1();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function _N(){const t=vN(!0);return t?(t(),!1):!0}class Gi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function H1(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||_N())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Pe.update(()=>a[r](s,o))};return Er(t.current,n,i,{passive:!t.getProps()[r]})}class Bz extends Gi{mount(){this.unmount=Si(H1(this.node,!0),H1(this.node,!1))}unmount(){}}class $z extends Gi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Si(vr(this.node.current,"focus",()=>this.onFocus()),vr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const wN=(t,e)=>e?t===e?!0:wN(t,e.parentElement):!1;function Fm(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,op(n))}class zz extends Gi{constructor(){super(...arguments),this.removeStartListeners=qe,this.removeEndListeners=qe,this.removeAccessibleListeners=qe,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Er(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();Pe.update(()=>{!d&&!wN(this.node.current,a.target)?h&&h(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Er(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Si(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Fm("up",(l,u)=>{const{onTap:h}=this.node.getProps();h&&Pe.update(()=>h(l,u))})};this.removeEndListeners(),this.removeEndListeners=vr(this.node.current,"keyup",o),Fm("down",(a,l)=>{this.startPress(a,l)})},n=vr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Fm("cancel",(s,o)=>this.cancelPress(s,o))},i=vr(this.node.current,"blur",r);this.removeAccessibleListeners=Si(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Pe.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!_N()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Pe.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Er(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=vr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Si(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Fy=new WeakMap,Um=new WeakMap,qz=t=>{const e=Fy.get(t.target);e&&e(t)},Wz=t=>{t.forEach(qz)};function Gz({root:t,...e}){const n=t||document;Um.has(n)||Um.set(n,{});const r=Um.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Wz,{root:t,...e})),r[i]}function Kz(t,e,n){const r=Gz(e);return Fy.set(t,n),r.observe(t),()=>{Fy.delete(t),r.unobserve(t)}}const Hz={some:0,all:1};class Qz extends Gi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Hz[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(l)};return Kz(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Yz(e,n))&&this.startObserver()}unmount(){}}function Yz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Xz={inView:{Feature:Qz},tap:{Feature:zz},focus:{Feature:$z},hover:{Feature:Bz}};function EN(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Jz(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function Zz(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function ap(t,e,n){const r=t.getProps();return N_(r,e,n!==void 0?n:r.custom,Jz(t),Zz(t))}let e8=qe,V_=qe;const Ai=t=>t*1e3,ir=t=>t/1e3,t8={current:!1},TN=t=>Array.isArray(t)&&typeof t[0]=="number";function IN(t){return!!(!t||typeof t=="string"&&SN[t]||TN(t)||Array.isArray(t)&&t.every(IN))}const Cl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,SN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cl([0,.65,.55,1]),circOut:Cl([.55,0,1,.45]),backIn:Cl([.31,.01,.66,-.59]),backOut:Cl([.33,1.53,.69,.99])};function AN(t){if(t)return TN(t)?Cl(t):Array.isArray(t)?t.map(AN):SN[t]}function n8(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const h=AN(a);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function r8(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const PN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,i8=1e-7,s8=12;function o8(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=PN(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>i8&&++a<s8);return o}function yc(t,e,n,r){if(t===e&&n===r)return qe;const i=s=>o8(s,0,1,t,n);return s=>s===0||s===1?s:PN(i(s),e,r)}const a8=yc(.42,0,1,1),l8=yc(0,0,.58,1),RN=yc(.42,0,.58,1),u8=t=>Array.isArray(t)&&typeof t[0]!="number",xN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,bN=t=>e=>1-t(1-e),D_=t=>1-Math.sin(Math.acos(t)),CN=bN(D_),c8=xN(D_),kN=yc(.33,1.53,.69,.99),O_=bN(kN),h8=xN(O_),d8=t=>(t*=2)<1?.5*O_(t):.5*(2-Math.pow(2,-10*(t-1))),f8={linear:qe,easeIn:a8,easeInOut:RN,easeOut:l8,circIn:D_,circInOut:c8,circOut:CN,backIn:O_,backInOut:h8,backOut:kN,anticipate:d8},Q1=t=>{if(Array.isArray(t)){V_(t.length===4);const[e,n,r,i]=t;return yc(e,n,r,i)}else if(typeof t=="string")return f8[t];return t},M_=(t,e)=>n=>!!(pc(n)&&pz.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),NN=(t,e,n)=>r=>{if(!pc(r))return r;const[i,s,o,a]=r.match(sp);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},p8=t=>Mi(0,255,t),jm={...Js,transform:t=>Math.round(p8(t))},vs={test:M_("rgb","red"),parse:NN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+jm.transform(t)+", "+jm.transform(e)+", "+jm.transform(n)+", "+tu(eu.transform(r))+")"};function m8(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Uy={test:M_("#"),parse:m8,transform:vs.transform},Do={test:M_("hsl","hue"),parse:NN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+rr.transform(tu(e))+", "+rr.transform(tu(n))+", "+tu(eu.transform(r))+")"},Vt={test:t=>vs.test(t)||Uy.test(t)||Do.test(t),parse:t=>vs.test(t)?vs.parse(t):Do.test(t)?Do.parse(t):Uy.parse(t),transform:t=>pc(t)?t:t.hasOwnProperty("red")?vs.transform(t):Do.transform(t)},Fe=(t,e,n)=>-n*t+n*e+t;function Bm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function g8({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Bm(l,a,t+1/3),s=Bm(l,a,t),o=Bm(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const $m=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},y8=[Uy,vs,Do],v8=t=>y8.find(e=>e.test(t));function Y1(t){const e=v8(t);let n=e.parse(t);return e===Do&&(n=g8(n)),n}const VN=(t,e)=>{const n=Y1(t),r=Y1(e),i={...n};return s=>(i.red=$m(n.red,r.red,s),i.green=$m(n.green,r.green,s),i.blue=$m(n.blue,r.blue,s),i.alpha=Fe(n.alpha,r.alpha,s),vs.transform(i))};function _8(t){var e,n;return isNaN(t)&&pc(t)&&(((e=t.match(sp))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(oN))===null||n===void 0?void 0:n.length)||0)>0}const DN={regex:dz,countKey:"Vars",token:"${v}",parse:qe},ON={regex:oN,countKey:"Colors",token:"${c}",parse:Vt.parse},MN={regex:sp,countKey:"Numbers",token:"${n}",parse:Js.parse};function zm(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function Xd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&zm(n,DN),zm(n,ON),zm(n,MN),n}function LN(t){return Xd(t).values}function FN(t){const{values:e,numColors:n,numVars:r,tokenised:i}=Xd(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(DN.token,o[l]):l<r+n?a=a.replace(ON.token,Vt.transform(o[l])):a=a.replace(MN.token,tu(o[l]));return a}}const w8=t=>typeof t=="number"?0:t;function E8(t){const e=LN(t);return FN(t)(e.map(w8))}const Li={test:_8,parse:LN,createTransformer:FN,getAnimatableNone:E8},UN=(t,e)=>n=>`${n>0?e:t}`;function jN(t,e){return typeof t=="number"?n=>Fe(t,e,n):Vt.test(t)?VN(t,e):t.startsWith("var(")?UN(t,e):$N(t,e)}const BN=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>jN(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},T8=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=jN(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},$N=(t,e)=>{const n=Li.createTransformer(e),r=Xd(t),i=Xd(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Si(BN(r.values,i.values),n):UN(t,e)},ju=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},X1=(t,e)=>n=>Fe(t,e,n);function I8(t){return typeof t=="number"?X1:typeof t=="string"?Vt.test(t)?VN:$N:Array.isArray(t)?BN:typeof t=="object"?T8:X1}function S8(t,e,n){const r=[],i=n||I8(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||qe:e;a=Si(l,a)}r.push(a)}return r}function L_(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(V_(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=S8(e,r,i),a=o.length,l=u=>{let h=0;if(a>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const d=ju(t[h],t[h+1],u);return o[h](d)};return n?u=>l(Mi(t[0],t[s-1],u)):l}function A8(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ju(0,e,r);t.push(Fe(n,1,i))}}function P8(t){const e=[0];return A8(e,t.length-1),e}function R8(t,e){return t.map(n=>n*e)}function x8(t,e){return t.map(()=>e||RN).splice(0,t.length-1)}function Jd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=u8(r)?r.map(Q1):Q1(r),s={done:!1,value:e[0]},o=R8(n&&n.length===e.length?n:P8(e),t),a=L_(o,e,{ease:Array.isArray(i)?i:x8(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function zN(t,e){return e?t*(1e3/e):0}const b8=5;function qN(t,e,n){const r=Math.max(e-b8,0);return zN(n-t(r),e-r)}const qm=.001,C8=.01,J1=10,k8=.05,N8=1;function V8({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s;e8(t<=Ai(J1));let o=1-e;o=Mi(k8,N8,o),t=Mi(C8,J1,ir(t)),o<1?(i=u=>{const h=u*o,d=h*t,f=h-n,g=jy(u,o),T=Math.exp(-d);return qm-f/g*T},s=u=>{const d=u*o*t,f=d*n+n,g=Math.pow(o,2)*Math.pow(u,2)*t,T=Math.exp(-d),w=jy(Math.pow(u,2),o);return(-i(u)+qm>0?-1:1)*((f-g)*T)/w}):(i=u=>{const h=Math.exp(-u*t),d=(u-n)*t+1;return-qm+h*d},s=u=>{const h=Math.exp(-u*t),d=(n-u)*(t*t);return h*d});const a=5/t,l=O8(i,s,a);if(t=Ai(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const D8=12;function O8(t,e,n){let r=n;for(let i=1;i<D8;i++)r=r-t(r)/e(r);return r}function jy(t,e){return t*Math.sqrt(1-e*e)}const M8=["duration","bounce"],L8=["stiffness","damping","mass"];function Z1(t,e){return e.some(n=>t[n]!==void 0)}function F8(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Z1(t,L8)&&Z1(t,M8)){const n=V8(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function WN({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=F8({...r,velocity:-ir(r.velocity||0)}),g=d||0,T=l/(2*Math.sqrt(a*u)),w=s-i,P=ir(Math.sqrt(a/u)),E=Math.abs(w)<5;n||(n=E?.01:2),e||(e=E?.005:.5);let y;if(T<1){const v=jy(P,T);y=C=>{const N=Math.exp(-T*P*C);return s-N*((g+T*P*w)/v*Math.sin(v*C)+w*Math.cos(v*C))}}else if(T===1)y=v=>s-Math.exp(-P*v)*(w+(g+P*w)*v);else{const v=P*Math.sqrt(T*T-1);y=C=>{const N=Math.exp(-T*P*C),V=Math.min(v*C,300);return s-N*((g+T*P*w)*Math.sinh(V)+v*w*Math.cosh(V))/v}}return{calculatedDuration:f&&h||null,next:v=>{const C=y(v);if(f)o.done=v>=h;else{let N=g;v!==0&&(T<1?N=qN(y,v,C):N=0);const V=Math.abs(N)<=n,S=Math.abs(s-C)<=e;o.done=V&&S}return o.value=o.done?s:C,o}}}function eS({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},g=_=>a!==void 0&&_<a||l!==void 0&&_>l,T=_=>a===void 0?l:l===void 0||Math.abs(a-_)<Math.abs(l-_)?a:l;let w=n*e;const P=d+w,E=o===void 0?P:o(P);E!==P&&(w=E-d);const y=_=>-w*Math.exp(-_/r),v=_=>E+y(_),C=_=>{const A=y(_),b=v(_);f.done=Math.abs(A)<=u,f.value=f.done?E:b};let N,V;const S=_=>{g(f.value)&&(N=_,V=WN({keyframes:[f.value,T(f.value)],velocity:qN(v,_,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return S(0),{calculatedDuration:null,next:_=>{let A=!1;return!V&&N===void 0&&(A=!0,C(_),S(_)),N!==void 0&&_>N?V.next(_-N):(!A&&C(_),f)}}}const U8=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Pe.update(e,!0),stop:()=>lr(e),now:()=>ut.isProcessing?ut.timestamp:performance.now()}},tS=2e4;function nS(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<tS;)e+=n,r=t.next(e);return e>=tS?1/0:e}const j8={decay:eS,inertia:eS,tween:Jd,keyframes:Jd,spring:WN};function Bu({autoplay:t=!0,delay:e=0,driver:n=U8,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:h,onUpdate:d,...f}){let g=1,T=!1,w,P;const E=()=>{P=new Promise(ee=>{w=ee})};E();let y;const v=j8[i]||Jd;let C;v!==Jd&&typeof r[0]!="number"&&(C=L_([0,100],r,{clamp:!1}),r=[0,100]);const N=v({...f,keyframes:r});let V;a==="mirror"&&(V=v({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let S="idle",_=null,A=null,b=null;N.calculatedDuration===null&&s&&(N.calculatedDuration=nS(N));const{calculatedDuration:k}=N;let D=1/0,R=1/0;k!==null&&(D=k+o,R=D*(s+1)-o);let oe=0;const _e=ee=>{if(A===null)return;g>0&&(A=Math.min(A,ee)),g<0&&(A=Math.min(ee-R/g,A)),_!==null?oe=_:oe=Math.round(ee-A)*g;const pe=oe-e*(g>=0?1:-1),Bt=g>=0?pe<0:pe>R;oe=Math.max(pe,0),S==="finished"&&_===null&&(oe=R);let B=oe,G=N;if(s){const $n=Math.min(oe,R)/D;let Yt=Math.floor($n),cr=$n%1;!cr&&$n>=1&&(cr=1),cr===1&&Yt--,Yt=Math.min(Yt,s+1),!!(Yt%2)&&(a==="reverse"?(cr=1-cr,o&&(cr-=o/D)):a==="mirror"&&(G=V)),B=Mi(0,1,cr)*D}const z=Bt?{done:!1,value:r[0]}:G.next(B);C&&(z.value=C(z.value));let{done:re}=z;!Bt&&k!==null&&(re=g>=0?oe>=R:oe<=0);const Se=_===null&&(S==="finished"||S==="running"&&re);return d&&d(z.value),Se&&q(),z},ue=()=>{y&&y.stop(),y=void 0},ge=()=>{S="idle",ue(),w(),E(),A=b=null},q=()=>{S="finished",h&&h(),ue(),w()},X=()=>{if(T)return;y||(y=n(_e));const ee=y.now();l&&l(),_!==null?A=ee-_:(!A||S==="finished")&&(A=ee),S==="finished"&&E(),b=A,_=null,S="running",y.start()};t&&X();const J={then(ee,pe){return P.then(ee,pe)},get time(){return ir(oe)},set time(ee){ee=Ai(ee),oe=ee,_!==null||!y||g===0?_=ee:A=y.now()-ee/g},get duration(){const ee=N.calculatedDuration===null?nS(N):N.calculatedDuration;return ir(ee)},get speed(){return g},set speed(ee){ee===g||!y||(g=ee,J.time=ir(oe))},get state(){return S},play:X,pause:()=>{S="paused",_=oe},stop:()=>{T=!0,S!=="idle"&&(S="idle",u&&u(),ge())},cancel:()=>{b!==null&&_e(b),ge()},complete:()=>{S="finished"},sample:ee=>(A=0,_e(ee))};return J}function B8(t){let e;return()=>(e===void 0&&(e=t()),e)}const $8=B8(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),z8=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),lh=10,q8=2e4,W8=(t,e)=>e.type==="spring"||t==="backgroundColor"||!IN(e.ease);function G8(t,e,{onUpdate:n,onComplete:r,...i}){if(!($8()&&z8.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const h=()=>{l=new Promise(v=>{a=v})};h();let{keyframes:d,duration:f=300,ease:g,times:T}=i;if(W8(e,i)){const v=Bu({...i,repeat:0,delay:0});let C={done:!1,value:d[0]};const N=[];let V=0;for(;!C.done&&V<q8;)C=v.sample(V),N.push(C.value),V+=lh;T=void 0,d=N,f=V-lh,g="linear"}const w=n8(t.owner.current,e,d,{...i,duration:f,ease:g,times:T}),P=()=>{u=!1,w.cancel()},E=()=>{u=!0,Pe.update(P),a(),h()};return w.onfinish=()=>{u||(t.set(r8(d,i)),r&&r(),E())},{then(v,C){return l.then(v,C)},attachTimeline(v){return w.timeline=v,w.onfinish=null,qe},get time(){return ir(w.currentTime||0)},set time(v){w.currentTime=Ai(v)},get speed(){return w.playbackRate},set speed(v){w.playbackRate=v},get duration(){return ir(f)},play:()=>{o||(w.play(),lr(P))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:v}=w;if(v){const C=Bu({...i,autoplay:!1});t.setWithVelocity(C.sample(v-lh).value,C.sample(v).value,lh)}E()},complete:()=>{u||w.finish()},cancel:E}}function K8({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:qe,pause:qe,stop:qe,then:s=>(s(),Promise.resolve()),cancel:qe,complete:qe});return e?Bu({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const H8={type:"spring",stiffness:500,damping:25,restSpeed:10},Q8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Y8={type:"keyframes",duration:.8},X8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},J8=(t,{keyframes:e})=>e.length>2?Y8:Xs.has(t)?t.startsWith("scale")?Q8(e[1]):H8:X8,By=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Li.test(e)||e==="0")&&!e.startsWith("url(")),Z8=new Set(["brightness","contrast","saturate","opacity"]);function e7(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(sp)||[];if(!r)return t;const i=n.replace(r,"");let s=Z8.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const t7=/([a-z-]*)\(.*?\)/g,$y={...Li,getAnimatableNone:t=>{const e=t.match(t7);return e?e.map(e7).join(" "):t}},n7={...aN,color:Vt,backgroundColor:Vt,outlineColor:Vt,fill:Vt,stroke:Vt,borderColor:Vt,borderTopColor:Vt,borderRightColor:Vt,borderBottomColor:Vt,borderLeftColor:Vt,filter:$y,WebkitFilter:$y},F_=t=>n7[t];function GN(t,e){let n=F_(t);return n!==$y&&(n=Li),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const KN=t=>/^0[^.\s]+$/.test(t);function r7(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||KN(t)}function i7(t,e,n,r){const i=By(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),r7(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const h=l[u];s[h]=GN(e,a)}return s}function s7({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}function U_(t,e){return t[e]||t.default||t}const o7={skipAnimations:!1},j_=(t,e,n,r={})=>i=>{const s=U_(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Ai(o);const l=i7(e,t,n,s),u=l[0],h=l[l.length-1],d=By(t,u),f=By(t,h);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:T=>{e.set(T),s.onUpdate&&s.onUpdate(T)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(s7(s)||(g={...g,...J8(t,g)}),g.duration&&(g.duration=Ai(g.duration)),g.repeatDelay&&(g.repeatDelay=Ai(g.repeatDelay)),!d||!f||t8.current||s.type===!1||o7.skipAnimations)return K8(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const T=G8(e,t,g);if(T)return T}return Bu(g)};function Zd(t){return!!(Ct(t)&&t.add)}const HN=t=>/^\-?\d*\.?\d+$/.test(t);function B_(t,e){t.indexOf(e)===-1&&t.push(e)}function $_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class z_{constructor(){this.subscriptions=[]}add(e){return B_(this.subscriptions,e),()=>$_(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const a7=t=>!isNaN(parseFloat(t)),nu={current:void 0};class l7{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=ut;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Pe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Pe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=a7(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new z_);const r=this.events[e].add(n);return e==="change"?()=>{r(),Pe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return nu.current&&nu.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?zN(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qs(t,e){return new l7(t,e)}const QN=t=>e=>e.test(t),u7={test:t=>t==="auto",parse:t=>t},YN=[Js,se,rr,Hr,gz,mz,u7],ml=t=>YN.find(QN(t)),c7=[...YN,Vt,Li],h7=t=>c7.find(QN(t));function d7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qs(n))}function q_(t,e){const n=ap(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=Cz(s[o]);d7(t,o,a)}}function zy(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&q_(t,i),t.variantChildren&&t.variantChildren.forEach(s=>{zy(s,e)})})}function f7(t,e){if(Array.isArray(e))return zy(t,e);if(typeof e=="string")return zy(t,[e]);q_(t,e)}function p7(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),h!=null&&(typeof h=="string"&&(HN(h)||KN(h))?h=parseFloat(h):!h7(h)&&Li.test(u)&&(h=GN(l,u)),t.addValue(l,qs(h,{owner:t})),n[l]===void 0&&(n[l]=h),h!==null&&t.setBaseTarget(l,h))}}function m7(t,e){return e?(e[t]||e.default||e).from:void 0}function g7(t,e,n){const r={};for(const i in t){const s=m7(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function y7({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function v7(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function XN(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const u=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const d in a){const f=t.getValue(d),g=a[d];if(!f||g===void 0||h&&y7(h,d))continue;const T={delay:n,elapsed:0,...U_(s||{},d)};if(window.HandoffAppearAnimations){const E=t.getProps()[eN];if(E){const y=window.HandoffAppearAnimations(E,d,f,Pe);y!==null&&(T.elapsed=y,T.isHandoff=!0)}}let w=!T.isHandoff&&!v7(f,g);if(T.type==="spring"&&(f.getVelocity()||T.velocity)&&(w=!1),f.animation&&(w=!1),w)continue;f.start(j_(d,f,g,t.shouldReduceMotion&&Xs.has(d)?{type:!1}:T));const P=f.animation;Zd(l)&&(l.add(d),P.then(()=>l.remove(d))),u.push(P)}return o&&Promise.all(u).then(()=>{o&&q_(t,o)}),u}function qy(t,e,n={}){const r=ap(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(XN(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=i;return _7(t,e,u+l,h,d,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function _7(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(w7).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(qy(u,e,{...s,delay:n+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function w7(t,e){return t.sortNodePosition(e)}function JN(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>qy(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=qy(t,e,n);else{const i=typeof e=="function"?ap(t,e,n.custom):e;r=Promise.all(XN(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const E7=[...I_].reverse(),T7=I_.length;function I7(t){return e=>Promise.all(e.map(({animation:n,options:r})=>JN(t,n,r)))}function S7(t){let e=I7(t);const n=P7();let r=!0;const i=(l,u)=>{const h=ap(t,u);if(h){const{transition:d,transitionEnd:f,...g}=h;l={...l,...g,...f}}return l};function s(l){e=l(t)}function o(l,u){const h=t.getProps(),d=t.getVariantContext(!0)||{},f=[],g=new Set;let T={},w=1/0;for(let E=0;E<T7;E++){const y=E7[E],v=n[y],C=h[y]!==void 0?h[y]:d[y],N=Fu(C),V=y===u?v.isActive:null;V===!1&&(w=E);let S=C===d[y]&&C!==h[y]&&N;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),v.protectedKeys={...T},!v.isActive&&V===null||!C&&!v.prevProp||rp(C)||typeof C=="boolean")continue;let A=A7(v.prevProp,C)||y===u&&v.isActive&&!S&&N||E>w&&N,b=!1;const k=Array.isArray(C)?C:[C];let D=k.reduce(i,{});V===!1&&(D={});const{prevResolvedValues:R={}}=v,oe={...R,...D},_e=ue=>{A=!0,g.has(ue)&&(b=!0,g.delete(ue)),v.needsAnimating[ue]=!0};for(const ue in oe){const ge=D[ue],q=R[ue];if(T.hasOwnProperty(ue))continue;let X=!1;Yd(ge)&&Yd(q)?X=!EN(ge,q):X=ge!==q,X?ge!==void 0?_e(ue):g.add(ue):ge!==void 0&&g.has(ue)?_e(ue):v.protectedKeys[ue]=!0}v.prevProp=C,v.prevResolvedValues=D,v.isActive&&(T={...T,...D}),r&&t.blockInitialAnimation&&(A=!1),A&&(!S||b)&&f.push(...k.map(ue=>({animation:ue,options:{type:y,...l}})))}if(g.size){const E={};g.forEach(y=>{const v=t.getBaseTarget(y);v!==void 0&&(E[y]=v)}),f.push({animation:E})}let P=!!f.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(f):Promise.resolve()}function a(l,u,h){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(g=>{var T;return(T=g.animationState)===null||T===void 0?void 0:T.setActive(l,u)}),n[l].isActive=u;const f=o(h,l);for(const g in n)n[g].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function A7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!EN(e,t):!1}function es(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function P7(){return{animate:es(!0),whileInView:es(),whileHover:es(),whileTap:es(),whileDrag:es(),whileFocus:es(),exit:es()}}class R7 extends Gi{constructor(e){super(e),e.animationState||(e.animationState=S7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),rp(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let x7=0;class b7 extends Gi{constructor(){super(...arguments),this.id=x7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const C7={animation:{Feature:R7},exit:{Feature:b7}},rS=(t,e)=>Math.abs(t-e);function k7(t,e){const n=rS(t.x,e.x),r=rS(t.y,e.y);return Math.sqrt(n**2+r**2)}class ZN{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Gm(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=k7(d.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:T}=d,{timestamp:w}=ut;this.history.push({...T,timestamp:w});const{onStart:P,onMove:E}=this.handlers;f||(P&&P(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Wm(f,this.transformPagePoint),Pe.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:g,onSessionEnd:T,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Gm(d.type==="pointercancel"?this.lastMoveEventInfo:Wm(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,P),T&&T(d,P)},!gN(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=op(e),a=Wm(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=ut;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,Gm(a,this.history)),this.removeListeners=Si(Er(this.contextWindow,"pointermove",this.handlePointerMove),Er(this.contextWindow,"pointerup",this.handlePointerUp),Er(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),lr(this.updatePoint)}}function Wm(t,e){return e?{point:e(t.point)}:t}function iS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Gm({point:t},e){return{point:t,delta:iS(t,eV(e)),offset:iS(t,N7(e)),velocity:V7(e,.1)}}function N7(t){return t[0]}function eV(t){return t[t.length-1]}function V7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=eV(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ai(e)));)n--;if(!r)return{x:0,y:0};const s=ir(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function dn(t){return t.max-t.min}function Wy(t,e=0,n=.01){return Math.abs(t-e)<=n}function sS(t,e,n,r=.5){t.origin=r,t.originPoint=Fe(e.min,e.max,t.origin),t.scale=dn(n)/dn(e),(Wy(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Fe(n.min,n.max,t.origin)-t.originPoint,(Wy(t.translate)||isNaN(t.translate))&&(t.translate=0)}function ru(t,e,n,r){sS(t.x,e.x,n.x,r?r.originX:void 0),sS(t.y,e.y,n.y,r?r.originY:void 0)}function oS(t,e,n){t.min=n.min+e.min,t.max=t.min+dn(e)}function D7(t,e,n){oS(t.x,e.x,n.x),oS(t.y,e.y,n.y)}function aS(t,e,n){t.min=e.min-n.min,t.max=t.min+dn(e)}function iu(t,e,n){aS(t.x,e.x,n.x),aS(t.y,e.y,n.y)}function O7(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Fe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Fe(n,t,r.max):Math.min(t,n)),t}function lS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function M7(t,{top:e,left:n,bottom:r,right:i}){return{x:lS(t.x,n,i),y:lS(t.y,e,r)}}function uS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function L7(t,e){return{x:uS(t.x,e.x),y:uS(t.y,e.y)}}function F7(t,e){let n=.5;const r=dn(t),i=dn(e);return i>r?n=ju(e.min,e.max-r,t.min):r>i&&(n=ju(t.min,t.max-i,e.min)),Mi(0,1,n)}function U7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Gy=.35;function j7(t=Gy){return t===!1?t=0:t===!0&&(t=Gy),{x:cS(t,"left","right"),y:cS(t,"top","bottom")}}function cS(t,e,n){return{min:hS(t,e),max:hS(t,n)}}function hS(t,e){return typeof t=="number"?t:t[e]||0}const dS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oo=()=>({x:dS(),y:dS()}),fS=()=>({min:0,max:0}),Xe=()=>({x:fS(),y:fS()});function gn(t){return[t("x"),t("y")]}function tV({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function B7({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function $7(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Km(t){return t===void 0||t===1}function Ky({scale:t,scaleX:e,scaleY:n}){return!Km(t)||!Km(e)||!Km(n)}function os(t){return Ky(t)||nV(t)||t.z||t.rotate||t.rotateX||t.rotateY}function nV(t){return pS(t.x)||pS(t.y)}function pS(t){return t&&t!=="0%"}function ef(t,e,n){const r=t-n,i=e*r;return n+i}function mS(t,e,n,r,i){return i!==void 0&&(t=ef(t,i,r)),ef(t,n,r)+e}function Hy(t,e=0,n=1,r,i){t.min=mS(t.min,e,n,r,i),t.max=mS(t.max,e,n,r,i)}function rV(t,{x:e,y:n}){Hy(t.x,e.translate,e.scale,e.originPoint),Hy(t.y,n.translate,n.scale,n.originPoint)}function z7(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Mo(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,rV(t,o)),r&&os(s.latestValues)&&Mo(t,s.latestValues))}e.x=gS(e.x),e.y=gS(e.y)}function gS(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Xr(t,e){t.min=t.min+e,t.max=t.max+e}function yS(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Fe(t.min,t.max,s);Hy(t,e[n],e[r],o,e.scale)}const q7=["x","scaleX","originX"],W7=["y","scaleY","originY"];function Mo(t,e){yS(t.x,e,q7),yS(t.y,e,W7)}function iV(t,e){return tV($7(t.getBoundingClientRect(),e))}function G7(t,e,n){const r=iV(t,n),{scroll:i}=e;return i&&(Xr(r.x,i.offset.x),Xr(r.y,i.offset.y)),r}const sV=({current:t})=>t?t.ownerDocument.defaultView:null,K7=new WeakMap;class H7{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xe(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(op(h,"page").point)},s=(h,d)=>{const{drag:f,dragPropagation:g,onDragStart:T}=this.getProps();if(f&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=vN(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gn(P=>{let E=this.getAxisMotionValue(P).get()||0;if(rr.test(E)){const{projection:y}=this.visualElement;if(y&&y.layout){const v=y.layout.layoutBox[P];v&&(E=dn(v)*(parseFloat(E)/100))}}this.originPoint[P]=E}),T&&Pe.update(()=>T(h,d),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:T,onDrag:w}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:P}=d;if(g&&this.currentDirection===null){this.currentDirection=Q7(P),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",d.point,P),this.updateAxis("y",d.point,P),this.visualElement.render(),w&&w(h,d)},a=(h,d)=>this.stop(h,d),l=()=>gn(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new ZN(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:sV(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Pe.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!uh(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=O7(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Vo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=M7(i.layoutBox,n):this.constraints=!1,this.elastic=j7(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&gn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=U7(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Vo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=G7(r,i.root,this.visualElement.getTransformPagePoint());let o=L7(i.layout.layoutBox,s);if(n){const a=n(B7(o));this.hasMutatedConstraints=!!a,a&&(o=tV(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=gn(h=>{if(!uh(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const f=i?200:1e6,g=i?40:1e7,T={type:"inertia",velocity:r?e[h]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,T)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(j_(e,r,0,n))}stopAnimation(){gn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){gn(n=>{const{drag:r}=this.getProps();if(!uh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Fe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Vo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};gn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=F7({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),gn(o=>{if(!uh(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Fe(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;K7.set(this.visualElement,this);const e=this.visualElement.current,n=Er(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Vo(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=vr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(gn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Gy,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function uh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Q7(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Y7 extends Gi{constructor(e){super(e),this.removeGroupControls=qe,this.removeListeners=qe,this.controls=new H7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qe}unmount(){this.removeGroupControls(),this.removeListeners()}}const vS=t=>(e,n)=>{t&&Pe.update(()=>t(e,n))};class X7 extends Gi{constructor(){super(...arguments),this.removePointerDownListener=qe}onPointerDown(e){this.session=new ZN(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sV(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:vS(e),onStart:vS(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Pe.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Er(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function J7(){const t=x.useContext(tp);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=x.useId();return x.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const $h={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _S(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const gl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(se.test(t))t=parseFloat(t);else return t;const n=_S(t,e.target.x),r=_S(t,e.target.y);return`${n}% ${r}%`}},Z7={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Li.parse(t);if(i.length>5)return r;const s=Li.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Fe(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class eq extends On.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;lz(tq),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),$h.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Pe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function oV(t){const[e,n]=J7(),r=x.useContext(A_);return On.createElement(eq,{...t,layoutGroup:r,switchLayoutGroup:x.useContext(nN),isPresent:e,safeToRemove:n})}const tq={borderRadius:{...gl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gl,borderTopRightRadius:gl,borderBottomLeftRadius:gl,borderBottomRightRadius:gl,boxShadow:Z7},aV=["TopLeft","TopRight","BottomLeft","BottomRight"],nq=aV.length,wS=t=>typeof t=="string"?parseFloat(t):t,ES=t=>typeof t=="number"||se.test(t);function rq(t,e,n,r,i,s){i?(t.opacity=Fe(0,n.opacity!==void 0?n.opacity:1,iq(r)),t.opacityExit=Fe(e.opacity!==void 0?e.opacity:1,0,sq(r))):s&&(t.opacity=Fe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<nq;o++){const a=`border${aV[o]}Radius`;let l=TS(e,a),u=TS(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||ES(l)===ES(u)?(t[a]=Math.max(Fe(wS(l),wS(u),r),0),(rr.test(u)||rr.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Fe(e.rotate||0,n.rotate||0,r))}function TS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const iq=lV(0,.5,CN),sq=lV(.5,.95,qe);function lV(t,e,n){return r=>r<t?0:r>e?1:n(ju(t,e,r))}function IS(t,e){t.min=e.min,t.max=e.max}function mn(t,e){IS(t.x,e.x),IS(t.y,e.y)}function SS(t,e,n,r,i){return t-=e,t=ef(t,1/n,r),i!==void 0&&(t=ef(t,1/i,r)),t}function oq(t,e=0,n=1,r=.5,i,s=t,o=t){if(rr.test(e)&&(e=parseFloat(e),e=Fe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Fe(s.min,s.max,r);t===s&&(a-=e),t.min=SS(t.min,e,n,a,i),t.max=SS(t.max,e,n,a,i)}function AS(t,e,[n,r,i],s,o){oq(t,e[n],e[r],e[i],e.scale,s,o)}const aq=["x","scaleX","originX"],lq=["y","scaleY","originY"];function PS(t,e,n,r){AS(t.x,e,aq,n?n.x:void 0,r?r.x:void 0),AS(t.y,e,lq,n?n.y:void 0,r?r.y:void 0)}function RS(t){return t.translate===0&&t.scale===1}function uV(t){return RS(t.x)&&RS(t.y)}function uq(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function cV(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function xS(t){return dn(t.x)/dn(t.y)}class cq{constructor(){this.members=[]}add(e){B_(this.members,e),e.scheduleRender()}remove(e){if($_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bS(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:h}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const hq=(t,e)=>t.depth-e.depth;class dq{constructor(){this.children=[],this.isDirty=!1}add(e){B_(this.children,e),this.isDirty=!0}remove(e){$_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(hq),this.isDirty=!1,this.children.forEach(e)}}function fq(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(lr(r),t(s-e))};return Pe.read(r,!0),()=>lr(r)}function pq(t){window.MotionDebug&&window.MotionDebug.record(t)}function mq(t){return t instanceof SVGElement&&t.tagName!=="svg"}function gq(t,e,n){const r=Ct(t)?t:qs(t);return r.start(j_("",r,e,n)),r.animation}const CS=["","X","Y","Z"],yq={visibility:"hidden"},kS=1e3;let vq=0;const as={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function hV({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=vq++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,as.totalNodes=as.resolvedTargetDeltas=as.recalculatedProjection=0,this.nodes.forEach(Eq),this.nodes.forEach(Pq),this.nodes.forEach(Rq),this.nodes.forEach(Tq),pq(as)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new dq)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new z_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mq(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=fq(f,250),$h.hasAnimatedSinceResize&&($h.hasAnimatedSinceResize=!1,this.nodes.forEach(VS))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||Nq,{onLayoutAnimationStart:P,onLayoutAnimationComplete:E}=h.getProps(),y=!this.targetLayout||!cV(this.targetLayout,T)||g,v=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,v);const C={...U_(w,"layout"),onPlay:P,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else f||VS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,lr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xq),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(NS);return}this.isUpdating||this.nodes.forEach(Sq),this.isUpdating=!1,this.nodes.forEach(Aq),this.nodes.forEach(_q),this.nodes.forEach(wq),this.clearAllSnapshots();const a=performance.now();ut.delta=Mi(0,1e3/60,a-ut.timestamp),ut.timestamp=a,ut.isProcessing=!0,Lm.update.process(ut),Lm.preRender.process(ut),Lm.render.process(ut),ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Iq),this.sharedNodes.forEach(bq)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!uV(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||os(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Vq(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Xe();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Xr(a.x,l.offset.x),Xr(a.y,l.offset.y)),a}removeElementScroll(o){const a=Xe();mn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){mn(a,o);const{scroll:f}=this.root;f&&(Xr(a.x,-f.offset.x),Xr(a.y,-f.offset.y))}Xr(a.x,h.offset.x),Xr(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=Xe();mn(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Mo(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),os(h.latestValues)&&Mo(l,h.latestValues)}return os(this.latestValues)&&Mo(l,this.latestValues),l}removeTransform(o){const a=Xe();mn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!os(u.latestValues))continue;Ky(u.latestValues)&&u.updateSnapshot();const h=Xe(),d=u.measurePageBox();mn(h,d),PS(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return os(this.latestValues)&&PS(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=ut.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xe(),this.relativeTargetOrigin=Xe(),iu(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Xe(),this.targetWithTransforms=Xe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),D7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mn(this.target,this.layout.layoutBox),rV(this.target,this.targetDelta)):mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xe(),this.relativeTargetOrigin=Xe(),iu(this.relativeTargetOrigin,this.target,g.target),mn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}as.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ky(this.parent.latestValues)||nV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ut.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;mn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;z7(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:T}=a;if(!T){this.projectionTransform&&(this.projectionDelta=Oo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Oo(),this.projectionDeltaWithTransform=Oo());const w=this.projectionTransform;ru(this.projectionDelta,this.layoutCorrected,T,this.latestValues),this.projectionTransform=bS(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==f||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T)),as.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},d=Oo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Xe(),g=l?l.source:void 0,T=this.layout?this.layout.source:void 0,w=g!==T,P=this.getStack(),E=!P||P.members.length<=1,y=!!(w&&!E&&this.options.crossfade===!0&&!this.path.some(kq));this.animationProgress=0;let v;this.mixTargetDelta=C=>{const N=C/1e3;DS(d.x,o.x,N),DS(d.y,o.y,N),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(iu(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Cq(this.relativeTarget,this.relativeTargetOrigin,f,N),v&&uq(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Xe()),mn(v,this.relativeTarget)),w&&(this.animationValues=h,rq(h,u,this.latestValues,N,y,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(lr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pe.update(()=>{$h.hasAnimatedSinceResize=!0,this.currentAnimation=gq(0,kS,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(kS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&dV(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Xe();const d=dn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=dn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}mn(a,l),Mo(a,h),ru(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new cq),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<CS.length;h++){const d="rotate"+CS[h];l[d]&&(u[d]=l[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return yq;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Bh(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Bh(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!os(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=bS(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x:g,y:T}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${T.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in Hd){if(f[w]===void 0)continue;const{correct:P,applyTo:E}=Hd[w],y=u.transform==="none"?f[w]:P(f[w],d);if(E){const v=E.length;for(let C=0;C<v;C++)u[E[C]]=y}else u[w]=y}return this.options.layoutId&&(u.pointerEvents=d===this?Bh(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(NS),this.root.sharedNodes.clear()}}}function _q(t){t.updateLayout()}function wq(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?gn(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],g=dn(f);f.min=r[d].min,f.max=f.min+g}):dV(s,n.layoutBox,r)&&gn(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],g=dn(r[d]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const a=Oo();ru(a,r,n.layoutBox);const l=Oo();o?ru(l,t.applyTransform(i,!0),n.measuredBox):ru(l,r,n.layoutBox);const u=!uV(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:g}=d;if(f&&g){const T=Xe();iu(T,n.layoutBox,f.layoutBox);const w=Xe();iu(w,r,g.layoutBox),cV(T,w)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=T,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Eq(t){as.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Tq(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Iq(t){t.clearSnapshot()}function NS(t){t.clearMeasurements()}function Sq(t){t.isLayoutDirty=!1}function Aq(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function VS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Pq(t){t.resolveTargetDelta()}function Rq(t){t.calcProjection()}function xq(t){t.resetRotation()}function bq(t){t.removeLeadSnapshot()}function DS(t,e,n){t.translate=Fe(e.translate,0,n),t.scale=Fe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function OS(t,e,n,r){t.min=Fe(e.min,n.min,r),t.max=Fe(e.max,n.max,r)}function Cq(t,e,n,r){OS(t.x,e.x,n.x,r),OS(t.y,e.y,n.y,r)}function kq(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Nq={duration:.45,ease:[.4,0,.1,1]},MS=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),LS=MS("applewebkit/")&&!MS("chrome/")?Math.round:qe;function FS(t){t.min=LS(t.min),t.max=LS(t.max)}function Vq(t){FS(t.x),FS(t.y)}function dV(t,e,n){return t==="position"||t==="preserve-aspect"&&!Wy(xS(e),xS(n),.2)}const Dq=hV({attachResizeListener:(t,e)=>vr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hm={current:void 0},fV=hV({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Hm.current){const t=new Dq({});t.mount(window),t.setOptions({layoutScroll:!0}),Hm.current=t}return Hm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Oq={pan:{Feature:X7},drag:{Feature:Y7,ProjectionNode:fV,MeasureLayout:oV}},Mq=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Lq(t){const e=Mq.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Qy(t,e,n=1){const[r,i]=Lq(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return HN(o)?parseFloat(o):o}else return Ly(i)?Qy(i,e,n+1):i}function Fq(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!Ly(s))return;const o=Qy(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!Ly(s))continue;const o=Qy(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const Uq=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),pV=t=>Uq.has(t),jq=t=>Object.keys(t).some(pV),US=t=>t===Js||t===se,jS=(t,e)=>parseFloat(t.split(", ")[e]),BS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return jS(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?jS(s[1],t):0}},Bq=new Set(["x","y","z"]),$q=fc.filter(t=>!Bq.has(t));function zq(t){const e=[];return $q.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ta={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:BS(4,13),y:BS(5,14)};Ta.translateX=Ta.x;Ta.translateY=Ta.y;const qq=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=Ta[u](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const h=e.getValue(u);h&&h.jump(a[u]),t[u]=Ta[u](l,s)}),t},Wq=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(pV);let s=[],o=!1;const a=[];if(i.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let h=n[l],d=ml(h);const f=e[l];let g;if(Yd(f)){const T=f.length,w=f[0]===null?1:0;h=f[w],d=ml(h);for(let P=w;P<T&&f[P]!==null;P++)g?V_(ml(f[P])===g):g=ml(f[P])}else g=ml(f);if(d!==g)if(US(d)&&US(g)){const T=u.get();typeof T=="string"&&u.set(parseFloat(T)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&g===se&&(e[l]=f.map(parseFloat))}else d!=null&&d.transform&&(g!=null&&g.transform)&&(h===0||f===0)?h===0?u.set(g.transform(h)):e[l]=d.transform(f):(o||(s=zq(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=qq(e,t,a);return s.length&&s.forEach(([h,d])=>{t.getValue(h).set(d)}),t.render(),np&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function Gq(t,e,n,r){return jq(e)?Wq(t,e,n,r):{target:e,transitionEnd:r}}const Kq=(t,e,n,r)=>{const i=Fq(t,e,r);return e=i.target,r=i.transitionEnd,Gq(t,e,n,r)},tf={current:null},W_={current:!1};function mV(){if(W_.current=!0,!!np)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>tf.current=t.matches;t.addListener(e),e()}else tf.current=!1}function Hq(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(Ct(s))t.addValue(i,s),Zd(r)&&r.add(i);else if(Ct(o))t.addValue(i,qs(s,{owner:t})),Zd(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,qs(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const $S=new WeakMap,gV=Object.keys(Uu),Qq=gV.length,zS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Yq=S_.length;class Xq{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Pe.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=ip(n),this.isVariantNode=tN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const f=h[d];a[d]!==void 0&&Ct(f)&&(f.set(a[d],!1),Zd(u)&&u.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,$S.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),W_.current||mV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:tf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){$S.delete(this.current),this.projection&&this.projection.unmount(),lr(this.notifyUpdate),lr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Xs.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Pe.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<Qq;l++){const u=gV[l],{isEnabled:h,Feature:d,ProjectionNode:f,MeasureLayout:g}=Uu[u];f&&(o=f),h(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:h,dragConstraints:d,layoutScroll:f,layoutRoot:g}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!h||d&&Vo(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zS.length;r++){const i=zS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Hq(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Yq;r++){const i=S_[r],s=this.props[i];(Fu(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=qs(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=N_(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ct(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new z_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class yV extends Xq{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=g7(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){p7(this,r,o);const a=Kq(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function Jq(t){return window.getComputedStyle(t)}class Zq extends yV{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Xs.has(n)){const r=F_(n);return r&&r.default||0}else{const r=Jq(e),i=(sN(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return iV(e,n)}build(e,n,r,i){R_(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return k_(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ct(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){hN(e,n,r,i)}}class eW extends yV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Xs.has(n)){const r=F_(n);return r&&r.default||0}return n=dN.has(n)?n:T_(n),e.getAttribute(n)}measureInstanceViewportBox(){return Xe()}scrapeMotionValuesFromProps(e,n){return pN(e,n)}build(e,n,r,i){b_(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){fN(e,n,r,i)}mount(e){this.isSVGTag=C_(e.tagName),super.mount(e)}}const tW=(t,e)=>P_(t)?new eW(e,{enableHardwareAcceleration:!1}):new Zq(e,{enableHardwareAcceleration:!0}),nW={layout:{ProjectionNode:fV,MeasureLayout:oV}},rW={...C7,...Xz,...Oq,...nW},Ve=oz((t,e)=>Fz(t,e,rW,tW));function vV(){const t=x.useRef(!1);return La(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function iW(){const t=vV(),[e,n]=x.useState(0),r=x.useCallback(()=>{t.current&&n(e+1)},[e]);return[x.useCallback(()=>Pe.postRender(r),[r]),e]}class sW extends x.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function oW({children:t,isPresent:e}){const n=x.useId(),r=x.useRef(null),i=x.useRef({width:0,height:0,top:0,left:0});return x.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),x.createElement(sW,{isPresent:e,childRef:r,sizeRef:i},x.cloneElement(t,{ref:r}))}const Qm=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=gc(aW),l=x.useId(),u=x.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),s?void 0:[n]);return x.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[n]),x.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=x.createElement(oW,{isPresent:n},t)),x.createElement(tp.Provider,{value:u},t)};function aW(){return new Map}function lW(t){return x.useEffect(()=>()=>t(),[])}const ls=t=>t.key||"";function uW(t,e){t.forEach(n=>{const r=ls(n);e.set(r,n)})}function cW(t){const e=[];return x.Children.forEach(t,n=>{x.isValidElement(n)&&e.push(n)}),e}const G_=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=x.useContext(A_).forceRender||iW()[0],l=vV(),u=cW(t);let h=u;const d=x.useRef(new Map).current,f=x.useRef(h),g=x.useRef(new Map).current,T=x.useRef(!0);if(La(()=>{T.current=!1,uW(u,g),f.current=h}),lW(()=>{T.current=!0,g.clear(),d.clear()}),T.current)return x.createElement(x.Fragment,null,h.map(y=>x.createElement(Qm,{key:ls(y),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},y)));h=[...h];const w=f.current.map(ls),P=u.map(ls),E=w.length;for(let y=0;y<E;y++){const v=w[y];P.indexOf(v)===-1&&!d.has(v)&&d.set(v,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((y,v)=>{if(P.indexOf(v)!==-1)return;const C=g.get(v);if(!C)return;const N=w.indexOf(v);let V=y;if(!V){const S=()=>{d.delete(v);const _=Array.from(g.keys()).filter(A=>!P.includes(A));if(_.forEach(A=>g.delete(A)),f.current=u.filter(A=>{const b=ls(A);return b===v||_.includes(b)}),!d.size){if(l.current===!1)return;a(),r&&r()}};V=x.createElement(Qm,{key:ls(C),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:s,mode:o},C),d.set(v,V)}h.splice(N,0,V)}),h=h.map(y=>{const v=y.key;return d.has(v)?y:x.createElement(Qm,{key:ls(y),isPresent:!0,presenceAffectsLayout:s,mode:o},y)}),x.createElement(x.Fragment,null,d.size?h:h.map(y=>x.cloneElement(y)))};function _V(t){const e=gc(()=>qs(t)),{isStatic:n}=x.useContext(Zf);if(n){const[,r]=x.useState(t);x.useEffect(()=>e.on("change",r),[])}return e}const hW=t=>t&&typeof t=="object"&&t.mix,dW=t=>hW(t)?t.mix:void 0;function fW(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],s=t[2+n],o=t[3+n],a=L_(i,s,{mixer:dW(s[0]),...o});return e?a(r):a}function wV(t,e){const n=_V(e()),r=()=>n.set(e());return r(),La(()=>{const i=()=>Pe.update(r,!1,!0),s=t.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),lr(r)}}),n}function pW(t){nu.current=[],t();const e=wV(nu.current,t);return nu.current=void 0,e}function qS(t,e,n,r){if(typeof t=="function")return pW(t);const i=typeof e=="function"?e:fW(e,n,r);return Array.isArray(t)?WS(t,i):WS([t],([s])=>i(s))}function WS(t,e){const n=gc(()=>[]);return wV(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function Ia(t,e={}){const{isStatic:n}=x.useContext(Zf),r=x.useRef(null),i=_V(Ct(t)?t.get():t),s=()=>{r.current&&r.current.stop()};return x.useInsertionEffect(()=>i.attach((o,a)=>{if(n)return a(o);if(s(),r.current=Bu({keyframes:[i.get(),o],velocity:i.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...e,onUpdate:a}),!ut.isProcessing){const l=performance.now()-ut.timestamp;l<30&&(r.current.time=ir(l))}return i.get()},s),[JSON.stringify(e)]),La(()=>{if(Ct(t))return t.on("change",o=>i.set(parseFloat(o)))},[i]),i}function mW(){!W_.current&&mV();const[t]=x.useState(tf.current);return t}function gW(t){t.values.forEach(e=>e.stop())}function yW(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(s=>{i.push(JN(s,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{f7(r,n)})},stop(){t.forEach(n=>{gW(n)})},mount(){return()=>{e.stop()}}};return e}function vW(){const t=gc(yW);return La(t.mount,[]),t}const _W=vW;var EV={exports:{}},wW="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",EW=wW,TW=EW;function TV(){}function IV(){}IV.resetWarningCache=TV;var IW=function(){function t(r,i,s,o,a,l){if(l!==TW){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:IV,resetWarningCache:TV};return n.PropTypes=n,n};EV.exports=IW();var SW=EV.exports;const ho=ZS(SW);var Yy=new Map,ch=new WeakMap,GS=0,AW=void 0;function PW(t){return t?(ch.has(t)||(GS+=1,ch.set(t,GS.toString())),ch.get(t)):"0"}function RW(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?PW(t.root):t[e]}`).toString()}function xW(t){const e=RW(t);let n=Yy.get(e);if(!n){const r=new Map;let i;const s=new IntersectionObserver(o=>{o.forEach(a=>{var l;const u=a.isIntersecting&&i.some(h=>a.intersectionRatio>=h);t.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=u),(l=r.get(a.target))==null||l.forEach(h=>{h(u,a)})})},t);i=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:s,elements:r},Yy.set(e,n)}return n}function bW(t,e,n={},r=AW){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const l=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:i,observer:s,elements:o}=xW(n),a=o.get(t)||[];return o.has(t)||o.set(t,a),a.push(e),s.observe(t),function(){a.splice(a.indexOf(e),1),a.length===0&&(o.delete(t),s.unobserve(t)),o.size===0&&(s.disconnect(),Yy.delete(i))}}function CW({threshold:t,delay:e,trackVisibility:n,rootMargin:r,root:i,triggerOnce:s,skip:o,initialInView:a,fallbackInView:l,onChange:u}={}){var h;const[d,f]=x.useState(null),g=x.useRef(u),[T,w]=x.useState({inView:!!a,entry:void 0});g.current=u,x.useEffect(()=>{if(o||!d)return;let v;return v=bW(d,(C,N)=>{w({inView:C,entry:N}),g.current&&g.current(C,N),N.isIntersecting&&s&&v&&(v(),v=void 0)},{root:i,rootMargin:r,threshold:t,trackVisibility:n,delay:e},l),()=>{v&&v()}},[Array.isArray(t)?t.toString():t,d,i,r,s,o,n,l,e]);const P=(h=T.entry)==null?void 0:h.target,E=x.useRef(void 0);!d&&P&&!s&&!o&&E.current!==P&&(E.current=P,w({inView:!!a,entry:void 0}));const y=[f,T.inView,T.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}const K_=On.memo(({size:t=60,color:e="primary",dotCount:n=16,speed:r="normal",trailEffect:i=!1,ariaLabel:s="Loading..."})=>{var y;const{theme:o}=vi(),a=_W(),[l,u]=CW({threshold:.1});x.useEffect(()=>{u?a.start("animate"):a.start("initial")},[a,u]);const d=((y={primary:{light:"#6366f1",dark:"#818cf8"},secondary:{light:"#8b5cf6",dark:"#a78bfa"},success:{light:"#10b981",dark:"#34d399"},warning:{light:"#f59e0b",dark:"#fbbf24"},danger:{light:"#ef4444",dark:"#f87171"},light:{light:"#e5e7eb",dark:"#f3f4f6"},dark:{light:"#374151",dark:"#4b5563"}}[e])==null?void 0:y[o])||e||"#6366f1",f=t/2,g=t*.12,T=Array.from({length:n}),P={slow:1.2,normal:.8,fast:.5,ultra:.3}[r]||.8,E=v=>{if(!i)return 1;const C=1/n;return Math.max(.2,1-v*C)};return O.jsx("div",{ref:l,className:"relative inline-block",style:{width:t,height:t},"aria-label":s,role:"status",children:T.map((v,C)=>{const N=360/n*C,V=f*Math.cos(N*Math.PI/180),S=f*Math.sin(N*Math.PI/180);return O.jsx(Ve.div,{className:"absolute rounded-full",style:{width:g,height:g,backgroundColor:d,top:f+S-g/2,left:f+V-g/2,opacity:E(C)},initial:{scale:.5,opacity:.3},animate:{scale:[.5,1,.5],opacity:[.3,1,.3]},transition:{repeat:1/0,duration:P,delay:C*P/n,ease:"easeInOut"}},C)})})});K_.propTypes={size:ho.number,color:ho.string,dotCount:ho.number,speed:ho.oneOf(["slow","normal","fast","ultra"]),trailEffect:ho.bool,ariaLabel:ho.string};K_.defaultProps={size:60,color:"primary",dotCount:16,speed:"normal",trailEffect:!1,ariaLabel:"Loading..."};var kW=typeof global=="object"&&global&&global.Object===Object&&global;const NW=kW;var VW=typeof self=="object"&&self&&self.Object===Object&&self,DW=NW||VW||Function("return this")();const SV=DW;var OW=SV.Symbol;const nf=OW;var AV=Object.prototype,MW=AV.hasOwnProperty,LW=AV.toString,yl=nf?nf.toStringTag:void 0;function FW(t){var e=MW.call(t,yl),n=t[yl];try{t[yl]=void 0;var r=!0}catch{}var i=LW.call(t);return r&&(e?t[yl]=n:delete t[yl]),i}var UW=Object.prototype,jW=UW.toString;function BW(t){return jW.call(t)}var $W="[object Null]",zW="[object Undefined]",KS=nf?nf.toStringTag:void 0;function qW(t){return t==null?t===void 0?zW:$W:KS&&KS in Object(t)?FW(t):BW(t)}function WW(t){return t!=null&&typeof t=="object"}var GW="[object Symbol]";function KW(t){return typeof t=="symbol"||WW(t)&&qW(t)==GW}var HW=/\s/;function QW(t){for(var e=t.length;e--&&HW.test(t.charAt(e)););return e}var YW=/^\s+/;function XW(t){return t&&t.slice(0,QW(t)+1).replace(YW,"")}function Xy(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var HS=0/0,JW=/^[-+]0x[0-9a-f]+$/i,ZW=/^0b[01]+$/i,eG=/^0o[0-7]+$/i,tG=parseInt;function QS(t){if(typeof t=="number")return t;if(KW(t))return HS;if(Xy(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Xy(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=XW(t);var n=ZW.test(t);return n||eG.test(t)?tG(t.slice(2),n?2:8):JW.test(t)?HS:+t}var nG=function(){return SV.Date.now()};const Ym=nG;var rG="Expected a function",iG=Math.max,sG=Math.min;function PV(t,e,n){var r,i,s,o,a,l,u=0,h=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(rG);e=QS(e)||0,Xy(n)&&(h=!!n.leading,d="maxWait"in n,s=d?iG(QS(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function g(V){var S=r,_=i;return r=i=void 0,u=V,o=t.apply(_,S),o}function T(V){return u=V,a=setTimeout(E,e),h?g(V):o}function w(V){var S=V-l,_=V-u,A=e-S;return d?sG(A,s-_):A}function P(V){var S=V-l,_=V-u;return l===void 0||S>=e||S<0||d&&_>=s}function E(){var V=Ym();if(P(V))return y(V);a=setTimeout(E,w(V))}function y(V){return a=void 0,f&&r?g(V):(r=i=void 0,o)}function v(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function C(){return a===void 0?o:y(Ym())}function N(){var V=Ym(),S=P(V);if(r=arguments,i=this,l=V,S){if(a===void 0)return T(l);if(d)return clearTimeout(a),a=setTimeout(E,e),g(l)}return a===void 0&&(a=setTimeout(E,e)),o}return N.cancel=v,N.flush=C,N}console.log("DEBUG: SplashScreen module loaded");const fo={LOGO:{DARK:"/logo/logo-dark.png?v=3",LIGHT:"/logo/logo-light.png?v=3",FALLBACK:"/logo/logo-default.png",SVG_FALLBACK:"/logo/logo.svg"},PRELOAD:["/logo/logo-dark.png","/logo/logo-light.png","/logo/logo-default.png","/logo/logo.svg"]},YS=t=>{const[e,n]=x.useState(!1),[r,i]=x.useState(!1);return x.useEffect(()=>{if(i(!0),typeof window>"u")return;const s=window.matchMedia(t);n(s.matches);const o=a=>n(a.matches);return s.addEventListener?(s.addEventListener("change",o),()=>s.removeEventListener("change",o)):(s.addListener(o),()=>s.removeListener(o))},[t]),r?e:!1},RV=On.memo(({theme:t,reducedMotion:e})=>{const n=x.useMemo(()=>{if(e)return[];const s=.618033988749895,o=24,a=[];for(let l=0;l<o;l++){const u=Math.sqrt(l/o)*120,h=l*s*Math.PI*2,d=50+u*Math.cos(h)/3.5,f=50+u*Math.sin(h)/3.5;a.push({id:`quantum-particle-${l}-${Date.now()}`,size:2+l%4*.8,x:d,y:f,delay:l*.12%2,duration:4.2+Math.sin(l)*1.5,opacity:t==="dark"?.08+Math.random()*.06:.05+Math.random()*.04,blur:t==="dark"?.8:.6,color:t==="dark"?`hsla(${260+Math.sin(l)*20}, 85%, ${65+l%20}%, 0.25)`:`hsla(${250+Math.cos(l)*15}, 90%, ${55+l%15}%, 0.18)`})}return a},[t,e]),r=Ia(0,{stiffness:100,damping:30}),i=Ia(0,{stiffness:100,damping:30});return x.useEffect(()=>{if(e)return;const s=PV(o=>{const a=(o.clientX/window.innerWidth-.5)*2,l=(o.clientY/window.innerHeight-.5)*2;r.set(a*10),i.set(l*6)},8);return window.addEventListener("mousemove",s),()=>{s.cancel(),window.removeEventListener("mousemove",s)}},[r,i,e]),e?null:O.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0","aria-hidden":!0,children:n.map(s=>{const o=qS(r,l=>l*(s.size/15)),a=qS(i,l=>l*(s.size/15));return O.jsx(Ve.div,{className:"absolute rounded-full",style:{width:s.size,height:s.size,left:`${s.x}%`,top:`${s.y}%`,backgroundColor:s.color,opacity:s.opacity,filter:`blur(${s.blur}px)`,x:o,y:a},animate:{scale:[1,1.15,1],opacity:[s.opacity*.4,s.opacity,s.opacity*.4],x:[0,Math.sin(s.delay)*s.size*.3,0],y:[0,Math.cos(s.delay)*s.size*.3,0]},transition:{duration:s.duration,repeat:1/0,ease:"easeInOut",delay:s.delay}},s.id)})})});RV.displayName="QuantumParticles";function oG(){const t=Qv(),e=(vi==null?void 0:vi())||{theme:"light"},{theme:n}=e,r=YS("(prefers-color-scheme: dark)"),i=YS("(prefers-reduced-motion: reduce)"),[s,o]=x.useState(!1),[a,l]=x.useState(!0),[u,h]=x.useState("Initializing Quantum Engine..."),[d,f]=x.useState(!1),[g,T]=x.useState(!1),[w,P]=x.useState(0),[E,y]=x.useState("initializing"),v=x.useRef(new Set),C=x.useRef(!0),N=x.useRef(null),V=x.useRef({x:0,y:0,targetX:0,targetY:0}),S=Ia(0,{stiffness:80,damping:25}),_=Ia(0,{stiffness:80,damping:25});x.useEffect(()=>(o(!0),C.current=!0,console.log(" SplashScreen: Quantum Engine Initialized"),()=>{console.log(" SplashScreen: Performing Quantum Cleanup"),C.current=!1,o(!1),v.current.forEach(oe=>{oe&&(clearTimeout(oe),clearInterval(oe))}),v.current.clear(),N.current&&(cancelAnimationFrame(N.current),N.current=null)}),[]),x.useEffect(()=>{if(!s)return;(async()=>{y("preloading"),P(10);const _e=fo.PRELOAD.map((q,X)=>new Promise(J=>{const ee=new Image;ee.src=q,ee.onload=()=>{C.current&&P(10+(X+1)*15),J()},ee.onerror=()=>{C.current&&P(10+(X+1)*15),J()}}));await Promise.allSettled(_e),P(70),y("initialized");const ue=n==="dark"?fo.LOGO.DARK:fo.LOGO.LIGHT,ge=new Image;ge.src=ue,ge.onload=()=>{C.current&&f(!0)},ge.onerror=()=>{C.current&&(T(!0),f(!0))}})()},[s,n]),x.useEffect(()=>{if(i||!s)return;const oe=ge=>{if(!C.current)return;const{innerWidth:q,innerHeight:X}=window;let J,ee;if(ge.type==="deviceorientation"&&ge.gamma!==null&&ge.beta!==null)J=ge.gamma/90*25,ee=ge.beta/180*15;else if(ge.clientX!==void 0)J=(ge.clientX/q-.5)*25,ee=(ge.clientY/X-.5)*15;else return;V.current.targetX=J,V.current.targetY=ee},_e=()=>{if(!C.current)return;const{x:ge,y:q,targetX:X,targetY:J}=V.current;V.current.x+=(X-ge)*.1,V.current.y+=(J-q)*.1,S.set(V.current.x),_.set(V.current.y),N.current=requestAnimationFrame(_e)},ue=PV(oe,8);return window.addEventListener("mousemove",ue,{passive:!0}),window.addEventListener("touchmove",ue,{passive:!0}),window.addEventListener("deviceorientation",ue,{passive:!0}),N.current=requestAnimationFrame(_e),()=>{window.removeEventListener("mousemove",ue),window.removeEventListener("touchmove",ue),window.removeEventListener("deviceorientation",ue),ue.cancel(),N.current&&(cancelAnimationFrame(N.current),N.current=null)}},[s,i,S,_]),x.useEffect(()=>{if(!s)return;console.log(" Navigation System: Initializing"),y("booting"),P(80);const oe=[{text:"Booting Quantum Interface...",duration:800},{text:"Calibrating Neural Network...",duration:800},{text:"Syncing with Arvdoul Cloud...",duration:800},{text:"Ready for Experience...",duration:400}];let _e=0;const ue=()=>{if(!C.current||_e>=oe.length)return;const{text:J,duration:ee}=oe[_e];h(J),P(80+(_e+1)*5),_e++;const pe=setTimeout(ue,ee);v.current.add(pe)};ue();const q=setTimeout(()=>{if(!C.current)return;y("finalizing"),h("Welcome to Arvdoul!"),P(100);const J=setTimeout(()=>{if(!C.current)return;l(!1),console.log(" Navigation: Initiating transition to IntroScreen");const ee=setTimeout(()=>{if(C.current)try{t("/intro",{replace:!0,state:{fromSplash:!0,timestamp:Date.now()}})}catch(pe){console.warn("Primary navigation failed, using fallback:",pe);try{window.location.replace("/intro")}catch(Bt){console.error("All navigation failed, forcing reload:",Bt),window.location.href="/intro"}}},450);v.current.add(ee)},600);v.current.add(J)},3e3);v.current.add(q);const X=setTimeout(()=>{if(console.warn(" Safety timeout triggered - forcing navigation"),C.current){l(!1);const J=setTimeout(()=>{window.location.href="/intro"},200);v.current.add(J)}},8e3);return v.current.add(X),()=>{v.current.forEach(J=>{J&&(clearTimeout(J),clearInterval(J))})}},[s,t]);const A=x.useMemo(()=>n==="system"?r?"dark":"light":n||"light",[n,r]),b=x.useMemo(()=>A==="dark"?{primary:"radial-gradient(circle at 50% 0%, rgba(8,10,30,0.98) 0%, rgba(2,6,25,1) 70%)",secondary:"linear-gradient(135deg, rgba(88,28,135,0.15) 0%, transparent 50%)",accent:"radial-gradient(circle at 80% 20%, rgba(139,92,246,0.08) 0%, transparent 70%)"}:{primary:"radial-gradient(circle at 50% 0%, rgba(255,255,255,0.98) 0%, rgba(240,244,250,1) 70%)",secondary:"linear-gradient(135deg, rgba(139,92,246,0.05) 0%, transparent 50%)",accent:"radial-gradient(circle at 80% 20%, rgba(79,70,229,0.04) 0%, transparent 70%)"},[A]),k=x.useMemo(()=>g?fo.LOGO.SVG_FALLBACK:A==="dark"?fo.LOGO.DARK:fo.LOGO.LIGHT,[A,g]),D=A==="dark"?"#8b5cf6":"#4f46e5",R=x.useMemo(()=>({gradient:A==="dark"?"bg-gradient-to-r from-purple-400 via-blue-400 to-cyan-400":"bg-gradient-to-r from-purple-600 via-blue-600 to-cyan-500",primary:A==="dark"?"text-gray-100":"text-gray-900",secondary:A==="dark"?"text-gray-300":"text-gray-600",tertiary:A==="dark"?"text-gray-400":"text-gray-500",accent:A==="dark"?"text-purple-300":"text-purple-600"}),[A]);return s?O.jsx(G_,{mode:"wait",children:a&&O.jsxs(Ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5,ease:"easeInOut"},className:"fixed inset-0 z-[9999] flex flex-col items-center justify-center overflow-hidden",role:"dialog","aria-label":"Arvdoul Quantum Loading Interface","aria-live":"polite",children:[O.jsxs("div",{className:"absolute inset-0 z-0",children:[O.jsx("div",{className:"absolute inset-0",style:{background:b.primary}}),O.jsx("div",{className:"absolute inset-0 opacity-40",style:{background:b.secondary}}),O.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:b.accent}}),O.jsx("div",{className:"absolute inset-0 opacity-[0.015]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.4'/%3E%3C/svg%3E")`}})]}),O.jsx(RV,{theme:A,reducedMotion:i}),O.jsxs(Ve.div,{className:"relative z-20 flex flex-col items-center justify-center px-6 w-full max-w-md",style:{x:i?0:S,y:i?0:_},children:[O.jsxs("div",{className:"relative mb-8",children:[!i&&O.jsx(Ve.div,{className:"absolute -inset-8 rounded-full",animate:{scale:[1,1.08,1],opacity:[.1,.3,.1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},style:{background:A==="dark"?"radial-gradient(circle, rgba(139,92,246,0.2) 0%, transparent 70%)":"radial-gradient(circle, rgba(79,70,229,0.15) 0%, transparent 70%)",filter:"blur(25px)"}}),O.jsxs("div",{className:"relative w-36 h-36 sm:w-40 sm:h-40 md:w-44 md:h-44",children:[!d&&O.jsx(Ve.div,{className:"absolute inset-0 rounded-full",initial:{opacity:0},animate:{opacity:1},style:{background:A==="dark"?"linear-gradient(90deg, #1f2937 0%, #374151 50%, #1f2937 100%)":"linear-gradient(90deg, #f3f4f6 0%, #e5e7eb 50%, #f3f4f6 100%)",backgroundSize:"200% 100%"},transition:{duration:1.5,repeat:1/0,ease:"linear"}}),O.jsxs(Ve.div,{className:"relative w-full h-full rounded-full overflow-hidden",initial:{scale:.85,opacity:0,rotate:-5},animate:{scale:1,opacity:1,rotate:0},transition:{type:"spring",stiffness:200,damping:20,delay:.2},style:{boxShadow:A==="dark"?"0 25px 75px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 0 0 1px rgba(255,255,255,0.03)":"0 25px 75px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.9), 0 0 0 1px rgba(0,0,0,0.02)",backgroundColor:A==="dark"?"#111827":"#ffffff"},children:[O.jsx("img",{src:k,alt:"Arvdoul Interface",className:`w-full h-full object-cover transition-all duration-500 ${d?"opacity-100 scale-100":"opacity-0 scale-95"}`,draggable:"false",onLoad:()=>f(!0),onError:()=>{T(!0),f(!0)}}),O.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none",style:{background:A==="dark"?"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.03) 0%, transparent 50%)":"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8) 0%, transparent 50%)"}})]})]})]}),O.jsx(Ve.div,{className:"mt-8",initial:{y:15,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},children:O.jsx("h1",{className:`text-5xl sm:text-6xl font-bold bg-clip-text text-transparent ${R.gradient} tracking-tight`,children:"Arvdoul"})}),O.jsx(Ve.div,{className:"mt-10 flex items-center justify-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},"aria-label":"Arvdoul Loading in Progress",children:O.jsx(K_,{size:40,thickness:2.8,color:D,className:i?"":"animate-pulse-slow"})}),O.jsxs(Ve.div,{className:"mt-8 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[O.jsx("p",{className:`text-lg font-medium ${R.secondary} tracking-wide`,role:"status","aria-live":"polite",children:u}),O.jsx("div",{className:"mt-2",children:O.jsx("span",{className:`text-xs font-semibold uppercase tracking-wider ${R.accent}`,children:E})})]}),O.jsxs(Ve.div,{className:"mt-10 w-64",initial:{opacity:0,width:0},animate:{opacity:1,width:"16rem"},transition:{delay:.6},children:[O.jsxs("div",{className:"relative h-1.5 bg-gray-200/30 dark:bg-gray-800/30 rounded-full overflow-hidden",children:[O.jsx(Ve.div,{className:"absolute top-0 left-0 h-full rounded-full",style:{background:R.gradient.replace("bg-gradient-to-r ",""),width:`${w}%`},transition:{type:"spring",damping:30}}),!i&&O.jsx(Ve.div,{className:"absolute top-0 left-0 h-full w-8",style:{background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent)"},animate:{x:["0%","400%"]},transition:{duration:2,repeat:1/0,ease:"linear"}})]}),O.jsxs("div",{className:"mt-2 flex justify-between",children:[O.jsx("span",{className:`text-xs ${R.tertiary}`,children:"aria-live app"}),O.jsxs("span",{className:`text-xs font-medium ${R.accent}`,children:[w,"%"]})]})]}),O.jsxs(Ve.div,{className:"mt-12 text-center",initial:{opacity:0},animate:{opacity:.7},transition:{delay:.7},children:[O.jsx("p",{className:`text-sm font-medium tracking-wide ${R.tertiary}`,children:"Crafted for Visionaries  Engineered for Communities"}),O.jsxs("div",{className:"mt-2 flex items-center justify-center space-x-4",children:[O.jsx("span",{className:`text-xs ${R.tertiary}`,children:"Arvdoul 1.0"}),O.jsx("span",{className:"text-xs text-gray-400",children:""}),O.jsx("span",{className:`text-xs ${R.tertiary}`,children:"Production Ready"})]})]})]}),O.jsxs("div",{className:`absolute bottom-6 text-xs ${R.tertiary} font-mono tracking-tight`,children:[" ",new Date().getFullYear()," Arvdoul  Build ","Prod"]}),O.jsxs("div",{className:"sr-only","aria-live":"assertive",children:["Arvdoul . Current status: ",u,". Progress: ",w," percent."]})]},"arvdoul-splash-ultra-pro-max")}):O.jsx("div",{className:"fixed inset-0 bg-gray-50 dark:bg-gray-900 transition-colors duration-500",style:{background:b.primary}})}/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lG=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),XS=t=>{const e=lG(t);return e.charAt(0).toUpperCase()+e.slice(1)},xV=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),uG=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hG=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>x.createElement("svg",{ref:l,...cG,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:xV("lucide",i),...!s&&!uG(a)&&{"aria-hidden":"true"},...a},[...o.map(([u,h])=>x.createElement(u,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=(t,e)=>{const n=x.forwardRef(({className:r,...i},s)=>x.createElement(hG,{ref:s,iconNode:e,className:xV(`lucide-${aG(XS(t))}`,`lucide-${t}`,r),...i}));return n.displayName=XS(t),n};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dG=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],fG=H_("monitor",dG);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pG=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],mG=H_("moon",pG);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gG=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],yG=H_("sun",gG);function JS(...t){return t.filter(Boolean).join(" ")}function vG({variant:t="default"}){const{theme:e,toggleTheme:n,systemTheme:r}=vi(),[i,s]=x.useState(!1);if(x.useEffect(()=>{s(!0)},[]),!i)return O.jsx("div",{className:JS(t==="icon"?"w-10 h-10":"px-3 py-2","rounded-xl border border-transparent")});const o=e==="system"?r:e,a={light:O.jsx(yG,{className:"w-5 h-5"}),dark:O.jsx(mG,{className:"w-5 h-5"}),system:O.jsx(fG,{className:"w-5 h-5"})}[o],l={light:"Light",dark:"Dark",system:"System"}[e],u=()=>{n()};return O.jsxs(Ve.button,{onClick:u,className:JS("flex items-center justify-center gap-2 rounded-xl transition-all","focus:outline-none focus:ring-2 focus:ring-primary/50 focus:ring-offset-2 dark:focus:ring-offset-gray-900",t==="icon"?"w-10 h-10":"px-3 py-2",t==="icon"?"hover:bg-gray-100 dark:hover:bg-white/10":"border hover:bg-gray-100 dark:hover:bg-white/10",t==="icon"?"":"border-gray-300 dark:border-gray-700","text-gray-700 dark:text-gray-300"),"aria-label":`Toggle theme, current: ${l}`,type:"button",children:[O.jsx(G_,{mode:"wait",children:O.jsx(Ve.div,{initial:{opacity:0,rotate:-45},animate:{opacity:1,rotate:0},exit:{opacity:0,rotate:45},transition:{duration:.2},children:a},e)}),t!=="icon"&&O.jsx(Ve.span,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},transition:{delay:.1},children:l})]})}console.log("DEBUG: IntroScreen module loaded");const _G=(t,e=8)=>{let n=null;const r=(...i)=>{n&&clearTimeout(n),n=setTimeout(()=>{t.apply(null,i),n=null},e)};return r.cancel=()=>{n&&clearTimeout(n),n=null},r};class wG extends x.Component{constructor(e){super(e),this.state={hasError:!1,error:null,info:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("IntroScreen crashed:",e,n),this.setState({info:n})}render(){return this.state.hasError?O.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-6 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-black dark:to-gray-900",children:O.jsxs("div",{className:"max-w-xl text-center space-y-6",children:[O.jsx("h2",{className:"text-2xl font-bold",children:"Something went wrong"}),O.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Intro screen encountered an error. This is isolated  you can retry or continue to the app. Error details are logged to console."}),O.jsxs("div",{className:"flex items-center gap-4 justify-center",children:[O.jsx("button",{className:"px-6 py-2 rounded-md bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold",onClick:()=>this.setState({hasError:!1,error:null,info:null}),children:"Retry"}),O.jsx("button",{className:"px-6 py-2 rounded-md border",onClick:()=>window.location.href="/",children:"Go Home"})]}),O.jsx("pre",{className:"text-xs text-left max-h-40 overflow-auto p-3 bg-black/5 dark:bg-white/5 rounded-md",children:String(this.state.error??"No error details")})]})}):this.props.children}}const EG=x.memo(function({theme:e}){const n=x.useRef(null),r=x.useRef(null),i=x.useRef({w:0,h:0}),s=x.useRef([]),o=x.useRef([]),a=x.useRef(0);return x.useEffect(()=>{if(typeof window>"u")return;const l=()=>{i.current={w:window.innerWidth,h:window.innerHeight};const u=Math.min(28,Math.max(8,Math.floor(i.current.w/60)));s.current=Array.from({length:u},(h,d)=>({id:d,x:Math.random()*i.current.w,y:Math.random()*i.current.h,size:Math.random()*3+2,speed:Math.random()*.9+.2,phase:Math.random()*Math.PI*2})),o.current=[];for(let h=0;h<u;h++){const d=Math.floor(Math.random()*3)+1;for(let f=0;f<d;f++){const g=Math.floor(Math.random()*u);g!==h&&o.current.push({from:h,to:g,strength:Math.random()*.45+.25,pulse:Math.random()*Math.PI*2})}}};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[e]),x.useEffect(()=>{const l=n.current;if(!l)return;const u=l.getContext("2d"),h=()=>{const{w:d,h:f}=i.current;if(!d||!f)return r.current=requestAnimationFrame(h);l.width=d,l.height=f,a.current+=.014,u.fillStyle=e==="dark"?"rgba(6,8,17,0.08)":"rgba(250,250,252,0.08)",u.fillRect(0,0,d,f);for(const g of o.current){const T=s.current[g.from],w=s.current[g.to];if(!T||!w)continue;const P=Math.sin(a.current+g.pulse)*.5+.5,E=g.strength*P*(e==="dark"?.18:.08);u.strokeStyle=e==="dark"?`rgba(139,92,246,${E})`:`rgba(99,102,241,${E})`,u.lineWidth=1,u.beginPath(),u.moveTo(T.x,T.y),u.lineTo(w.x,w.y),u.stroke(),P>.78&&(u.beginPath(),u.arc((T.x+w.x)/2,(T.y+w.y)/2,P*3,0,Math.PI*2),u.fillStyle=e==="dark"?`rgba(99,102,241,${P*.08})`:`rgba(79,70,229,${P*.06})`,u.fill())}for(const g of s.current){const T=Math.sin(a.current*g.speed+g.phase)*.5+.5,w=g.size+T*2,P=u.createRadialGradient(g.x,g.y,0,g.x,g.y,w*2);P.addColorStop(0,e==="dark"?`rgba(139,92,246,${.28+T*.15})`:`rgba(79,70,229,${.18+T*.08})`),P.addColorStop(1,"transparent"),u.fillStyle=P,u.beginPath(),u.arc(g.x,g.y,w*2,0,Math.PI*2),u.fill(),u.fillStyle="rgba(255,255,255,0.95)",u.beginPath(),u.arc(g.x,g.y,w*.65,0,Math.PI*2),u.fill(),g.x+=Math.sin(a.current*.6+g.id)*.3,g.y+=Math.cos(a.current*.6+g.id)*.3,g.x<0&&(g.x=d),g.x>d&&(g.x=0),g.y<0&&(g.y=f),g.y>f&&(g.y=0)}r.current=requestAnimationFrame(h)};return r.current=requestAnimationFrame(h),()=>{r.current&&cancelAnimationFrame(r.current)}},[e]),O.jsx("canvas",{"aria-hidden":!0,ref:n,className:"absolute inset-0 w-full h-full pointer-events-none",style:{opacity:e==="dark"?.32:.14,mixBlendMode:e==="dark"?"screen":"overlay"}})}),TG=({emoji:t,title:e,description:n,index:r,theme:i,reducedMotion:s,isActive:o,onHover:a})=>{const[l,u]=x.useState(!1);return x.useEffect(()=>{const h=setTimeout(()=>{},r*80);return()=>clearTimeout(h)},[r]),O.jsx(Ve.div,{initial:{opacity:0,y:28},animate:{opacity:1,y:0},transition:{delay:r*.05,duration:.6,type:"spring",stiffness:110},onMouseEnter:()=>{u(!0),a&&a(r)},onMouseLeave:()=>{u(!1),a&&a(null)},className:"relative group cursor-pointer",children:O.jsxs("div",{className:`relative rounded-2xl p-6 border transition-all duration-300 ${i==="dark"?"bg-gray-900/70 border-gray-700/40":"bg-white/90 border-gray-200/60"} shadow-lg`,children:[O.jsx("div",{className:"text-3xl mb-3 select-none",children:t}),O.jsx("h4",{className:"font-semibold text-lg mb-2",children:O.jsx("span",{className:`bg-clip-text text-transparent ${i==="dark"?"bg-gradient-to-r from-purple-400 to-cyan-300":"bg-gradient-to-r from-purple-600 to-cyan-500"}`,children:e})}),O.jsx("p",{className:`text-sm ${i==="dark"?"text-gray-300":"text-gray-600"}`,children:n}),O.jsx("div",{className:`absolute bottom-4 left-4 right-4 h-1 rounded-full transition-all ${l||o?i==="dark"?"bg-gradient-to-r from-purple-500 to-blue-400":"bg-gradient-to-r from-purple-400 to-blue-500":"bg-transparent"}`})]})})};function IG(){return O.jsx(wG,{children:O.jsx(SG,{})})}function SG(){const t=Qv(),e=(vi==null?void 0:vi())||{theme:"light",systemTheme:"light"},{theme:n}=e;Mm!=null&&Mm();const r=mW(),i=typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,[s,o]=x.useState(!1),[a,l]=x.useState(null),[u,h]=x.useState(!1),[d,f]=x.useState(0),[g,T]=x.useState({x:0,y:0}),w=Ia(0,{stiffness:100,damping:30}),P=Ia(0,{stiffness:100,damping:30}),E=x.useMemo(()=>n==="system"?i?"dark":"light":n||"light",[n,i]);x.useEffect(()=>(o(!0),console.info("IntroScreen mounted (Arvdoul)  resolvedTheme:",E),()=>{console.info("IntroScreen unmounted")}),[E]),x.useEffect(()=>{if(r||typeof window>"u")return;const N=_G(S=>{const _=S.clientX,A=S.clientY;T({x:_,y:A}),w.set((_/window.innerWidth-.5)*20),P.set((A/window.innerHeight-.5)*15)},8),V=()=>{const S=window.pageYOffset||document.documentElement.scrollTop||0,_=Math.max(document.documentElement.scrollHeight-window.innerHeight,1);f(Math.min(1,Math.max(0,S/_)))};return window.addEventListener("mousemove",N),window.addEventListener("scroll",V,{passive:!0}),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("scroll",V),N.cancel()}},[r,w,P]),x.useEffect(()=>{const N=V=>{if((V.ctrlKey||V.metaKey)&&V.key.toLowerCase()==="k"){V.preventDefault(),h(S=>!S);return}if((V.key==="Enter"||V.key===" ")&&(V.preventDefault(),t("/signup/step1")),V.key.toLowerCase()==="l"&&(V.preventDefault(),t("/login")),V.key.toLowerCase()==="h"&&(V.preventDefault(),t("/home")),V.key>="1"&&V.key<="6"){const S=parseInt(V.key,10)-1;l(S),setTimeout(()=>l(null),1100)}V.key==="Escape"&&h(!1)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[t]);const y=x.useMemo(()=>[{emoji:"",title:"Quantum Processing",description:"Real-time neural processing with sub-millisecond inference."},{emoji:"",title:"AI Co-Pilot",description:"Personalized assistant to accelerate content creation."},{emoji:"",title:"Quantum Encryption",description:"Post-quantum safe messaging and storage."},{emoji:"",title:"Metaverse Ready",description:"Spatial and immersive experiences baked-in."},{emoji:"",title:"Predictive Analytics",description:"Actionable insights driven by advanced models."},{emoji:"",title:"Decentralized Network",description:"True ownership and control for creators."}],[]),v=x.useMemo(()=>[{value:"500M+",label:"Quantum Nodes",description:"Distributed computing fabric"},{value:"99.999%",label:"Uptime",description:"Enterprise reliability"},{value:"0.001s",label:"Latency",description:"Near-instant responses"},{value:"",label:"Scalability",description:"Designed to grow"}],[]),C=x.useMemo(()=>({gradient:E==="dark"?"bg-gradient-to-r from-purple-400 to-cyan-300":"bg-gradient-to-r from-purple-600 to-cyan-500",primary:E==="dark"?"text-gray-100":"text-gray-900",secondary:E==="dark"?"text-gray-300":"text-gray-700"}),[E]);return s?O.jsxs("div",{className:"relative w-full min-h-screen overflow-hidden bg-transparent",children:[O.jsxs("div",{className:"absolute inset-0",children:[O.jsx("div",{className:"absolute inset-0",style:{background:E==="dark"?"radial-gradient(ellipse at 20% 10%, rgba(139,92,246,0.12), transparent), radial-gradient(ellipse at 80% 90%, rgba(6,182,212,0.08), transparent), #030517":"radial-gradient(ellipse at 20% 10%, rgba(139,92,246,0.06), transparent), radial-gradient(ellipse at 80% 90%, rgba(6,182,212,0.04), transparent), #f7f9fc"}}),O.jsx(EG,{theme:E}),O.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:"linear-gradient(45deg, transparent 49.5%, rgba(255,255,255,0.04) 49.5%, rgba(255,255,255,0.04) 50.5%, transparent 50.5%)",backgroundSize:"60px 60px",mixBlendMode:E==="dark"?"screen":"overlay"}})]}),O.jsxs("div",{className:"relative z-10",children:[O.jsx(Ve.nav,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.45},className:"fixed top-0 left-0 right-0 z-50 px-6 py-4 backdrop-blur-md",style:{background:E==="dark"?"rgba(6,8,17,0.6)":"rgba(255,255,255,0.7)",borderBottom:E==="dark"?"1px solid rgba(255,255,255,0.02)":"1px solid rgba(0,0,0,0.04)"},children:O.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[O.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("/"),children:[O.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center",children:O.jsx("span",{className:"text-white font-bold",children:"A"})}),O.jsx("div",{className:`font-extrabold text-2xl bg-clip-text text-transparent ${C.gradient}`,children:"Arvdoul"})]}),O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx(vG,{variant:"icon",size:"lg"}),O.jsx("button",{onClick:()=>h(!0),className:`px-3 py-2 rounded-lg text-sm ${E==="dark"?"bg-black/30":"bg-white/60"} border`,children:"K"}),O.jsx("button",{onClick:()=>t("/login"),className:`px-4 py-2 rounded-lg text-sm ${E==="dark"?"bg-gray-800":"bg-white"} border`,children:"Sign In"}),O.jsx("button",{onClick:()=>t("/signup/step1"),className:"px-4 py-2 rounded-lg text-sm font-semibold bg-gradient-to-r from-purple-600 to-blue-600 text-white",children:"Get Started"})]})]})}),O.jsx("section",{className:"pt-28 pb-20 px-6",children:O.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[O.jsxs(Ve.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.6},children:[O.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-extrabold leading-tight",children:[O.jsx("span",{className:"block",children:"Welcome to the"}),O.jsx("span",{className:`block ${C.gradient} bg-clip-text text-transparent`,children:"Quantum Social Era"})]}),O.jsx("p",{className:"mt-6 text-lg md:text-xl max-w-3xl mx-auto text-gray-600 dark:text-gray-300",children:"Arvdoul is built for creators and communities  a secure, fast, and intelligent social platform."})]}),O.jsx(Ve.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.45},children:v.map((N,V)=>O.jsxs("div",{className:`p-4 rounded-xl ${E==="dark"?"bg-gray-900/60 border border-gray-800":"bg-white/90 border border-gray-200"}`,children:[O.jsx("div",{className:`text-2xl font-bold ${C.gradient} bg-clip-text text-transparent`,children:N.value}),O.jsx("div",{className:"font-semibold",children:N.label}),O.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:N.description})]},V))}),O.jsxs("div",{className:"mt-16",children:[O.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-8",children:"Why Arvdoul"}),O.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((N,V)=>O.jsx(TG,{...N,index:V,theme:E,reducedMotion:r,isActive:a===V,onHover:l},V))})]}),O.jsx("div",{className:"mt-14",children:O.jsxs("div",{className:`mx-auto max-w-3xl p-8 rounded-3xl ${E==="dark"?"bg-gray-900/70 border border-gray-800":"bg-white/80 border border-gray-200"}`,children:[O.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Ready to join?"}),O.jsx("p",{className:"text-sm mb-6 text-gray-600 dark:text-gray-300",children:"Sign up now and start creating with powerful tools and safe defaults."}),O.jsxs("div",{className:"flex items-center justify-center gap-4",children:[O.jsx("button",{onClick:()=>t("/signup/step1"),className:"px-8 py-3 rounded-2xl font-semibold text-white bg-gradient-to-r from-purple-600 to-blue-600",children:"Start your journey"}),O.jsx("button",{onClick:()=>t("/login"),className:"px-6 py-3 rounded-2xl border",children:"Sign In"})]})]})})]})}),O.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-40",children:O.jsx("div",{className:`px-4 py-2 rounded-full ${E==="dark"?"bg-gray-900/70 border border-gray-800":"bg-white/80 border border-gray-200"}`,children:O.jsxs("div",{className:"flex items-center gap-4",children:[O.jsx("div",{className:"w-40 h-1 bg-gray-200 rounded-full overflow-hidden",children:O.jsx(Ve.div,{className:"h-full bg-gradient-to-r from-purple-500 to-blue-500",style:{width:`${Math.round(d*100)}%`}})}),O.jsxs("div",{className:"text-sm font-medium",children:[Math.round(d*100),"% explored"]})]})})})]}),O.jsx(G_,{children:u&&O.jsxs(Ve.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>h(!1),children:[O.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:N=>N.stopPropagation()}),O.jsxs(Ve.div,{className:`relative w-full max-w-2xl rounded-2xl p-4 ${E==="dark"?"bg-gray-900 border border-gray-800":"bg-white border border-gray-200"}`,initial:{scale:.96,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.96,opacity:0},onClick:N=>N.stopPropagation(),children:[O.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[O.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center text-white",children:""}),O.jsxs("div",{children:[O.jsx("div",{className:"font-semibold",children:"Arvdoul Command Center"}),O.jsx("div",{className:"text-xs text-gray-500",children:"Quick actions & navigation"})]})]}),O.jsx("div",{className:"space-y-2",children:[{label:"New Space",action:()=>t("/create"),hint:"N"},{label:"AI Assistant",action:()=>{},hint:"A"},{label:"Settings",action:()=>t("/settings"),hint:","}].map((N,V)=>O.jsx("button",{onClick:N.action,className:`w-full p-3 rounded-lg text-left ${E==="dark"?"hover:bg-gray-800":"hover:bg-gray-100"}`,children:O.jsxs("div",{className:"flex items-center justify-between",children:[O.jsx("div",{children:N.label}),O.jsx("div",{className:"text-xs text-gray-400 px-2 py-1 border rounded",children:N.hint})]})},V))})]})]})}),O.jsx("div",{className:"sr-only","aria-live":"polite",children:"Welcome to Arvdoul  the next generation social platform."})]}):O.jsx("div",{className:"w-full min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-white dark:from-black dark:to-gray-900",children:O.jsxs("div",{className:"text-center",children:[O.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-indigo-500 mb-4"}),O.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Initializing Arvdoul..."})]})})}const AG=()=>O.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:O.jsxs("div",{className:"text-center",children:[O.jsxs("div",{className:"relative",children:[O.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500/30 border-t-indigo-500 rounded-full animate-spin mx-auto mb-6"}),O.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-purple-500 rounded-full animate-spin mx-auto mb-6",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),O.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Loading Arvdoul..."})]})}),PG=()=>O.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-900 dark:to-gray-800",children:O.jsxs("div",{className:"text-center p-8 max-w-lg",children:[O.jsx("h1",{className:"text-5xl font-bold text-gray-800 dark:text-white mb-6",children:"Welcome to Arvdoul! "}),O.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-8",children:"This is the home screen. The splash screen successfully navigated here."}),O.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg",children:[O.jsx("h2",{className:"text-2xl font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Home Screen "}),O.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"This screen is for logged-in users. You'll build the full dashboard here."}),O.jsxs("div",{className:"mt-6 flex gap-4 justify-center",children:[O.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium",children:"Go Back"}),O.jsx("button",{onClick:()=>window.location.href="/",className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white rounded-lg font-medium",children:"Restart"})]})]})]})});function RG(){return O.jsx(x.Suspense,{fallback:O.jsx(AG,{}),children:O.jsxs(wM,{children:[O.jsx(Tl,{path:"/",element:O.jsx(oG,{})}),O.jsx(Tl,{path:"/intro",element:O.jsx(IG,{})}),O.jsx(Tl,{path:"/home",element:O.jsx(PG,{})}),O.jsx(Tl,{path:"*",element:O.jsx(vM,{to:"/",replace:!0})})]})})}function xG(){return O.jsx(RG,{})}Xm.createRoot(document.getElementById("root")).render(O.jsx(On.StrictMode,{children:O.jsx(IM,{children:O.jsx(Y$,{children:O.jsx(SM,{children:O.jsx(xG,{})})})})}));
